advisory_id: CVE-2021-47205
datasource_id: vulnrichment_importer_v2/CVE-2021-47205
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2021/47xxx/CVE-2021-47205.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  clk: sunxi-ng: Unregister clocks/resets when unbinding

  Currently, unbinding a CCU driver unmaps the device's MMIO region, while
  leaving its clocks/resets and their providers registered. This can cause
  a page fault later when some clock operation tries to perform MMIO. Fix
  this by separating the CCU initialization from the memory allocation,
  and then using a devres callback to unregister the clocks and resets.

  This also fixes a memory leak of the `struct ccu_reset`, and uses the
  correct owner (the specific platform driver) for the clocks and resets.

  Early OF clock providers are never unregistered, and limited error
  handling is possible, so they are mostly unchanged. The error reporting
  is made more consistent by moving the message inside of_sunxi_ccu_probe.
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-04-12T16:35:34Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/9bec2b9c6134052994115d2d3374e96f2ccb9b9d
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/b5dd513daa70ee8f6d281a20bd28485ee9bb7db2
    reference_type:
    reference_id:
