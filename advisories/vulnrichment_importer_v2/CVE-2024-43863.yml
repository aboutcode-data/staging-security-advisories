advisory_id: CVE-2024-43863
datasource_id: vulnrichment_importer_v2/CVE-2024-43863
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2024/43xxx/CVE-2024-43863.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  drm/vmwgfx: Fix a deadlock in dma buf fence polling

  Introduce a version of the fence ops that on release doesn't remove
  the fence from the pending list, and thus doesn't require a lock to
  fix poll->fence wait->fence unref deadlocks.

  vmwgfx overwrites the wait callback to iterate over the list of all
  fences and update their status, to do that it holds a lock to prevent
  the list modifcations from other threads. The fence destroy callback
  both deletes the fence and removes it from the list of pending
  fences, for which it holds a lock.

  dma buf polling cb unrefs a fence after it's been signaled: so the poll
  calls the wait, which signals the fences, which are being destroyed.
  The destruction tries to acquire the lock on the pending fences list
  which it can never get because it's held by the wait from which it
  was called.

  Old bug, but not a lot of userspace apps were using dma-buf polling
  interfaces. Fix those, in particular this fixes KDE stalls/deadlock.
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-09-10T16:06:45Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/3b933b16c996af8adb6bc1b5748a63dfb41a82bc
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/9908dc0d2ef0e4aec8a242c098455729c0e2f017
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/9e20d028d8d1deb1e7fed18f22ffc01669cf3237
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/a8943969f9ead2fd3044fc826140a21622ef830e
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/c98ab18b9f315ff977c2c65d7c71298ef98be8e3
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/e58337100721f3cc0c7424a18730e4f39844934f
    reference_type:
    reference_id:
