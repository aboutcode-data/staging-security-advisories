advisory_id: CVE-2024-46706
datasource_id: vulnrichment_importer_v2/CVE-2024-46706
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2024/46xxx/CVE-2024-46706.json
aliases: []
summary: "In the Linux kernel, the following vulnerability has been resolved:\n\ntty: serial:\
  \ fsl_lpuart: mark last busy before uart_add_one_port\n\nWith \"earlycon initcall_debug=1\
  \ loglevel=8\" in bootargs, kernel\nsometimes boot hang. It is because normal console still\
  \ is not ready,\nbut runtime suspend is called, so early console putchar will hang\nin waiting\
  \ TRDE set in UARTSTAT.\n\nThe lpuart driver has auto suspend delay set to 3000ms, but during\n\
  uart_add_one_port, a child device serial ctrl will added and probed with\nits pm runtime enabled(see\
  \ serial_ctrl.c).\nThe runtime suspend call path is:\ndevice_add\n     |-> bus_probe_device\n\
  \           |->device_initial_probe\n\t           |->__device_attach\n                   \
  \      |-> pm_runtime_get_sync(dev->parent);\n\t\t\t |-> pm_request_idle(dev);\n\t\t\t |->\
  \ pm_runtime_put(dev->parent);\n\nSo in the end, before normal console ready, the lpuart get\
  \ runtime\nsuspended. And earlycon putchar will hang.\n\nTo address the issue, mark last busy\
  \ just after pm_runtime_enable,\nthree seconds is long enough to switch from bootconsole to\
  \ normal\nconsole."
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-09-29T15:02:49Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/3ecf625d4acb71d726bc0b49403cf68388b3d58d
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/8eb92cfca6c2c5a15ab1773f3d18ab8d8f7dbb68
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/dc98d76a15bc29a9a4e76f2f65f39f3e590fb15c
    reference_type:
    reference_id:
