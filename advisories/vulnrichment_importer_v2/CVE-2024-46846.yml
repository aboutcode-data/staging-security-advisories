advisory_id: CVE-2024-46846
datasource_id: vulnrichment_importer_v2/CVE-2024-46846
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2024/46xxx/CVE-2024-46846.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  spi: rockchip: Resolve unbalanced runtime PM / system PM handling

  Commit e882575efc77 ("spi: rockchip: Suspend and resume the bus during
  NOIRQ_SYSTEM_SLEEP_PM ops") stopped respecting runtime PM status and
  simply disabled clocks unconditionally when suspending the system. This
  causes problems when the device is already runtime suspended when we go
  to sleep -- in which case we double-disable clocks and produce a
  WARNing.

  Switch back to pm_runtime_force_{suspend,resume}(), because that still
  seems like the right thing to do, and the aforementioned commit makes no
  explanation why it stopped using it.

  Also, refactor some of the resume() error handling, because it's not
  actually a good idea to re-disable clocks on failure.
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-09-29T13:59:01Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/0efbad8445fbba7896402500a1473450a299a08a
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/14f970a8d03d882b15b97beb83bd84ac8ba6298c
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/be721b451affbecc4ba4eaac3b71cdbdcade1b1b
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d034bff62faea1a2219e0d2f3d17263265f24087
    reference_type:
    reference_id:
