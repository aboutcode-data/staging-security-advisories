advisory_id: CVE-2024-46691
datasource_id: vulnrichment_importer_v2/CVE-2024-46691
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2024/46xxx/CVE-2024-46691.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  usb: typec: ucsi: Move unregister out of atomic section

  Commit '9329933699b3 ("soc: qcom: pmic_glink: Make client-lock
  non-sleeping")' moved the pmic_glink client list under a spinlock, as it
  is accessed by the rpmsg/glink callback, which in turn is invoked from
  IRQ context.

  This means that ucsi_unregister() is now called from atomic context,
  which isn't feasible as it's expecting a sleepable context. An effort is
  under way to get GLINK to invoke its callbacks in a sleepable context,
  but until then lets schedule the unregistration.

  A side effect of this is that ucsi_unregister() can now happen
  after the remote processor, and thereby the communication link with it, is
  gone. pmic_glink_send() is amended with a check to avoid the resulting NULL
  pointer dereference.
  This does however result in the user being informed about this error by
  the following entry in the kernel log:

    ucsi_glink.pmic_glink_ucsi pmic_glink.ucsi.0: failed to send UCSI write request: -5
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-09-29T15:06:52Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/095b0001aefddcd9361097c971b7debc84e72714
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/11bb2ffb679399f99041540cf662409905179e3a
    reference_type:
    reference_id:
