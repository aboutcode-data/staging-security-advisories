advisory_id: CVE-2024-26858
datasource_id: vulnrichment_importer_v2/CVE-2024-26858
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2024/26xxx/CVE-2024-26858.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  net/mlx5e: Use a memory barrier to enforce PTP WQ xmit submission tracking occurs after populating the metadata_map

  Just simply reordering the functions mlx5e_ptp_metadata_map_put and
  mlx5e_ptpsq_track_metadata in the mlx5e_txwqe_complete context is not good
  enough since both the compiler and CPU are free to reorder these two
  functions. If reordering does occur, the issue that was supposedly fixed by
  7e3f3ba97e6c ("net/mlx5e: Track xmit submission to PTP WQ after populating
  metadata map") will be seen. This will lead to NULL pointer dereferences in
  mlx5e_ptpsq_mark_ts_cqes_undelivered in the NAPI polling context due to the
  tracking list being populated before the metadata map.
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-06-17T17:41:34Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/936ef086161ab89a7f38f7a0761d6a3063c3277e
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/b7cf07586c40f926063d4d09f7de28ff82f62b2a
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d1f71615dbb305f14f3b756cce015d70d8667549
    reference_type:
    reference_id:
