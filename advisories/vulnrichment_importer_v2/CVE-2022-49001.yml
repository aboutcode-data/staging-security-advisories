advisory_id: CVE-2022-49001
datasource_id: vulnrichment_importer_v2/CVE-2022-49001
datasource_url: https://github.com/cisagov/vulnrichment/blob/develop/2022/49xxx/CVE-2022-49001.json
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  riscv: fix race when vmap stack overflow

  Currently, when detecting vmap stack overflow, riscv firstly switches
  to the so called shadow stack, then use this shadow stack to call the
  get_overflow_stack() to get the overflow stack. However, there's
  a race here if two or more harts use the same shadow stack at the same
  time.

  To solve this race, we introduce spin_shadow_stack atomic var, which
  will be swap between its own address and 0 in atomic way, when the
  var is set, it means the shadow_stack is being used; when the var
  is cleared, it means the shadow_stack isn't being used.

  [Palmer: Add AQ to the swap, and also some comments.]
impacted_packages: []
severities:
  - score: Track
    scoring_system: ssvc
    scoring_elements: SSVCv2/E:N/A:N/T:P/P:M/B:A/M:M/D:T/2024-10-22T13:15:10Z/
    published_at: None
    url:
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/7e1864332fbc1b993659eab7974da9fe8bf8c128
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/879fabc5a95401d9bce357e4b1d24ae4a360a81f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/ac00301adb19df54f2eae1efc4bad7447c0156ce
    reference_type:
    reference_id:
