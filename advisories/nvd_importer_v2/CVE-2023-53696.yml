advisory_id: CVE-2023-53696
datasource_id: nvd_importer_v2/CVE-2023-53696
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2023-53696
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  scsi: qla2xxx: Fix memory leak in qla2x00_probe_one()

  There is a memory leak reported by kmemleak:

    unreferenced object 0xffffc900003f0000 (size 12288):
      comm "modprobe", pid 19117, jiffies 4299751452 (age 42490.264s)
      hex dump (first 32 bytes):
        00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
        00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
      backtrace:
        [<00000000629261a8>] __vmalloc_node_range+0xe56/0x1110
        [<0000000001906886>] __vmalloc_node+0xbd/0x150
        [<000000005bb4dc34>] vmalloc+0x25/0x30
        [<00000000a2dc1194>] qla2x00_create_host+0x7a0/0xe30 [qla2xxx]
        [<0000000062b14b47>] qla2x00_probe_one+0x2eb8/0xd160 [qla2xxx]
        [<00000000641ccc04>] local_pci_probe+0xeb/0x1a0

  The root cause is traced to an error-handling path in qla2x00_probe_one()
  when the adapter "base_vha" initialize failed. The fab_scan_rp "scan.l" is
  used to record the port information and it is allocated in
  qla2x00_create_host(). However, it is not released in the error handling
  path "probe_failed".

  Fix this by freeing the memory of "scan.l" when an error occurs in the
  adapter initialization process.
impacted_packages: []
severities: []
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/44374911ac63f769c442f56fdfadea673c5f4425
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/582e35e97318ccd9c81774bac08938291679525f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/85ade4010e13ef152ea925c74d94253db92e5428
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/ae73c4dd48f2c79d515d509a0cbe9efb0a197f44
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/detail/CVE-2023-53696
    reference_type:
    reference_id: CVE-2023-53696
