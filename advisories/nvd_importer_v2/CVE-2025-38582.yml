advisory_id: CVE-2025-38582
datasource_id: nvd_importer_v2/CVE-2025-38582
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-38582
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  RDMA/hns: Fix double destruction of rsv_qp

  rsv_qp may be double destroyed in error flow, first in free_mr_init(),
  and then in hns_roce_exit(). Fix it by moving the free_mr_init() call
  into hns_roce_v2_init().

  list_del corruption, ffff589732eb9b50->next is LIST_POISON1 (dead000000000100)
  WARNING: CPU: 8 PID: 1047115 at lib/list_debug.c:53 __list_del_entry_valid+0x148/0x240
  ...
  Call trace:
   __list_del_entry_valid+0x148/0x240
   hns_roce_qp_remove+0x4c/0x3f0 [hns_roce_hw_v2]
   hns_roce_v2_destroy_qp_common+0x1dc/0x5f4 [hns_roce_hw_v2]
   hns_roce_v2_destroy_qp+0x22c/0x46c [hns_roce_hw_v2]
   free_mr_exit+0x6c/0x120 [hns_roce_hw_v2]
   hns_roce_v2_exit+0x170/0x200 [hns_roce_hw_v2]
   hns_roce_exit+0x118/0x350 [hns_roce_hw_v2]
   __hns_roce_hw_v2_init_instance+0x1c8/0x304 [hns_roce_hw_v2]
   hns_roce_hw_v2_reset_notify_init+0x170/0x21c [hns_roce_hw_v2]
   hns_roce_hw_v2_reset_notify+0x6c/0x190 [hns_roce_hw_v2]
   hclge_notify_roce_client+0x6c/0x160 [hclge]
   hclge_reset_rebuild+0x150/0x5c0 [hclge]
   hclge_reset+0x10c/0x140 [hclge]
   hclge_reset_subtask+0x80/0x104 [hclge]
   hclge_reset_service_task+0x168/0x3ac [hclge]
   hclge_service_task+0x50/0x100 [hclge]
   process_one_work+0x250/0x9a0
   worker_thread+0x324/0x990
   kthread+0x190/0x210
   ret_from_fork+0x10/0x18
impacted_packages: []
severities:
  - score: '7.8'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2025-38582
weaknesses:
  - CWE-415
references:
  - url: https://git.kernel.org/stable/c/10b083dbba22be19baa848432b6f25aa68ab2db5
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/c6957b95ecc5b63c5a4bb4ecc28af326cf8f6dc8
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/dab173bae3303f074f063750a8dead2550d8c782
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/fc8b0f5b16bab2e032b4cfcd6218d5df3b80b2ea
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-38582
    reference_type:
    reference_id: CVE-2025-38582
