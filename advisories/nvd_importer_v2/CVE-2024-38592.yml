advisory_id: CVE-2024-38592
datasource_id: nvd_importer_v2/CVE-2024-38592
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2024-38592
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  drm/mediatek: Init `ddp_comp` with devm_kcalloc()

  In the case where `conn_routes` is true we allocate an extra slot in
  the `ddp_comp` array but mtk_drm_crtc_create() never seemed to
  initialize it in the test case I ran. For me, this caused a later
  crash when we looped through the array in mtk_drm_crtc_mode_valid().
  This showed up for me when I booted with `slub_debug=FZPUA` which
  poisons the memory initially. Without `slub_debug` I couldn't
  reproduce, presumably because the later code handles the value being
  NULL and in most cases (not guaranteed in all cases) the memory the
  allocator returned started out as 0.

  It really doesn't hurt to initialize the array with devm_kcalloc()
  since the array is small and the overhead of initting a handful of
  elements to 0 is small. In general initting memory to zero is a safer
  practice and usually it's suggested to only use the non-initting alloc
  functions if you really need to.

  Let's switch the function to use an allocation function that zeros the
  memory. For me, this avoids the crash.
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2024-38592
weaknesses:
  - CWE-908
references:
  - url: https://git.kernel.org/stable/c/01a2c5123e27b3c4685bf2fc4c2e879f6e0c7b33
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/9fe2cc3fa44f7ad7ba5f29c1a68b2b924c17b9b1
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/cf69d0af7db917b82aceaa44b7b1b9376609da22
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2024-38592
    reference_type:
    reference_id: CVE-2024-38592
