advisory_id: CVE-2022-50225
datasource_id: nvd_importer_v2/CVE-2022-50225
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-50225
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  riscv:uprobe fix SR_SPIE set/clear handling

  In riscv the process of uprobe going to clear spie before exec
  the origin insn,and set spie after that.But When access the page
  which origin insn has been placed a page fault may happen and
  irq was disabled in arch_uprobe_pre_xol function,It cause a WARN
  as follows.
  There is no need to clear/set spie in arch_uprobe_pre/post/abort_xol.
  We can just remove it.

  [   31.684157] BUG: sleeping function called from invalid context at kernel/locking/rwsem.c:1488
  [   31.684677] in_atomic(): 0, irqs_disabled(): 1, non_block: 0, pid: 76, name: work
  [   31.684929] preempt_count: 0, expected: 0
  [   31.685969] CPU: 2 PID: 76 Comm: work Tainted: G
  [   31.686542] Hardware name: riscv-virtio,qemu (DT)
  [   31.686797] Call Trace:
  [   31.687053] [<ffffffff80006442>] dump_backtrace+0x30/0x38
  [   31.687699] [<ffffffff80812118>] show_stack+0x40/0x4c
  [   31.688141] [<ffffffff8081817a>] dump_stack_lvl+0x44/0x5c
  [   31.688396] [<ffffffff808181aa>] dump_stack+0x18/0x20
  [   31.688653] [<ffffffff8003e454>] __might_resched+0x114/0x122
  [   31.688948] [<ffffffff8003e4b2>] __might_sleep+0x50/0x7a
  [   31.689435] [<ffffffff80822676>] down_read+0x30/0x130
  [   31.689728] [<ffffffff8000b650>] do_page_fault+0x166/x446
  [   31.689997] [<ffffffff80003c0c>] ret_from_exception+0x0/0xc
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-50225
weaknesses:
  - CWE-667
references:
  - url: https://git.kernel.org/stable/c/3811d51778900064d27d8c9a98f73410fb3b471d
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/3dbe5829408bc1586f75b4667ef60e5aab0209c7
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/73fc099eaefd9a92c83b6c07dad066411fd5a192
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/c71e000db8536d27ec410abb3e314896a78b4f19
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-50225
    reference_type:
    reference_id: CVE-2022-50225
