advisory_id: CVE-2024-26830
datasource_id: nvd_importer_v2/CVE-2024-26830
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2024-26830
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  i40e: Do not allow untrusted VF to remove administratively set MAC

  Currently when PF administratively sets VF's MAC address and the VF
  is put down (VF tries to delete all MACs) then the MAC is removed
  from MAC filters and primary VF MAC is zeroed.

  Do not allow untrusted VF to remove primary MAC when it was set
  administratively by PF.

  Reproducer:
  1) Create VF
  2) Set VF interface up
  3) Administratively set the VF's MAC
  4) Put VF interface down

  [root@host ~]# echo 1 > /sys/class/net/enp2s0f0/device/sriov_numvfs
  [root@host ~]# ip link set enp2s0f0v0 up
  [root@host ~]# ip link set enp2s0f0 vf 0 mac fe:6c:b5:da:c7:7d
  [root@host ~]# ip link show enp2s0f0
  23: enp2s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
      link/ether 3c:ec:ef:b7:dd:04 brd ff:ff:ff:ff:ff:ff
      vf 0     link/ether fe:6c:b5:da:c7:7d brd ff:ff:ff:ff:ff:ff, spoof checking on, link-state auto, trust off
  [root@host ~]# ip link set enp2s0f0v0 down
  [root@host ~]# ip link show enp2s0f0
  23: enp2s0f0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
      link/ether 3c:ec:ef:b7:dd:04 brd ff:ff:ff:ff:ff:ff
      vf 0     link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff, spoof checking on, link-state auto, trust off
impacted_packages: []
severities:
  - score: '6.3'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:H/PR:L/UI:N/S:U/C:N/I:H/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2024-26830
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/1c981792e4ccbc134b468797acdd7781959e6893
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/73d9629e1c8c1982f13688c4d1019c3994647ccc
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/be147926140ac48022c9605d7ab0a67387e4b404
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d250a81ba813a93563be68072c563aa1e346346d
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.8:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.8:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.8:rc2:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.8:rc2:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.8:rc3:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.8:rc3:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.8:rc4:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.8:rc4:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2024-26830
    reference_type:
    reference_id: CVE-2024-26830
