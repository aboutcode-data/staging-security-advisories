advisory_id: CVE-2022-49606
datasource_id: nvd_importer_v2/CVE-2022-49606
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-49606
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  RDMA/irdma: Fix sleep from invalid context BUG

  Taking the qos_mutex to process RoCEv2 QP's on netdev events causes a
  kernel splat.

  Fix this by removing the handling for RoCEv2 in
  irdma_cm_teardown_connections that uses the mutex. This handling is only
  needed for iWARP to avoid having connections established while the link is
  down or having connections remain functional after the IP address is
  removed.

    BUG: sleeping function called from invalid context at kernel/locking/mutex.
    Call Trace:
    kernel: dump_stack+0x66/0x90
    kernel: ___might_sleep.cold.92+0x8d/0x9a
    kernel: mutex_lock+0x1c/0x40
    kernel: irdma_cm_teardown_connections+0x28e/0x4d0 [irdma]
    kernel: ? check_preempt_curr+0x7a/0x90
    kernel: ? select_idle_sibling+0x22/0x3c0
    kernel: ? select_task_rq_fair+0x94c/0xc90
    kernel: ? irdma_exec_cqp_cmd+0xc27/0x17c0 [irdma]
    kernel: ? __wake_up_common+0x7a/0x190
    kernel: irdma_if_notify+0x3cc/0x450 [irdma]
    kernel: ? sched_clock_cpu+0xc/0xb0
    kernel: irdma_inet6addr_event+0xc6/0x150 [irdma]
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-49606
weaknesses:
  - CWE-667
references:
  - url: https://git.kernel.org/stable/c/2cae7e519032e4b4672cb9204d5586a441924364
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/a4c5115140ed1833197bad9a6b80265840ff427f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/cc0315564d6eec91c716d314b743321be24c70b3
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc2:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc2:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc3:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc3:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc4:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc4:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc5:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc5:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc6:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc6:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.19:rc7:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.19:rc7:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-49606
    reference_type:
    reference_id: CVE-2022-49606
