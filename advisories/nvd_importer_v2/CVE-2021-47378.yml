advisory_id: CVE-2021-47378
datasource_id: nvd_importer_v2/CVE-2021-47378
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2021-47378
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  nvme-rdma: destroy cm id before destroy qp to avoid use after free

  We should always destroy cm_id before destroy qp to avoid to get cma
  event after qp was destroyed, which may lead to use after free.
  In RDMA connection establishment error flow, don't destroy qp in cm
  event handler.Just report cm_error to upper level, qp will be destroy
  in nvme_rdma_alloc_queue() after destroy cm id.
impacted_packages: []
severities:
  - score: '9.8'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2021-47378
weaknesses:
  - CWE-416
references:
  - url: https://git.kernel.org/stable/c/9817d763dbe15327b9b3ff4404fa6f27f927e744
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d268a182c56e8361e19fb781137411643312b994
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/ecf0dc5a904830c926a64feffd8e01141f89822f
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:5.15:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:5.15:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2021-47378
    reference_type:
    reference_id: CVE-2021-47378
