advisory_id: CVE-2025-37868
datasource_id: nvd_importer_v2/CVE-2025-37868
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-37868
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  drm/xe/userptr: fix notifier vs folio deadlock

  User is reporting what smells like notifier vs folio deadlock, where
  migrate_pages_batch() on core kernel side is holding folio lock(s) and
  then interacting with the mappings of it, however those mappings are
  tied to some userptr, which means calling into the notifier callback and
  grabbing the notifier lock. With perfect timing it looks possible that
  the pages we pulled from the hmm fault can get sniped by
  migrate_pages_batch() at the same time that we are holding the notifier
  lock to mark the pages as accessed/dirty, but at this point we also want
  to grab the folio locks(s) to mark them as dirty, but if they are
  contended from notifier/migrate_pages_batch side then we deadlock since
  folio lock won't be dropped until we drop the notifier lock.

  Fortunately the mark_page_accessed/dirty is not really needed in the
  first place it seems and should have already been done by hmm fault, so
  just remove it.

  (cherry picked from commit bd7c0cb695e87c0e43247be8196b4919edbe0e85)
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2025-37868
weaknesses:
  - CWE-667
references:
  - url: https://git.kernel.org/stable/c/2577b202458cddff85cc154b1fe7f313e0d1f418
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/65dc4e3d5b01db0179fc95c1f0bdb87194c28ab5
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/90574ecf6052be83971d91d16600c5cf07003bbb
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.14:-:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.14:-:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.14:rc6:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.14:rc6:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.14:rc7:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.14:rc7:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.15:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.15:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.15:rc2:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.15:rc2:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-37868
    reference_type:
    reference_id: CVE-2025-37868
