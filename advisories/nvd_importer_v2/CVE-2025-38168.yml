advisory_id: CVE-2025-38168
datasource_id: nvd_importer_v2/CVE-2025-38168
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-38168
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  perf: arm-ni: Unregister PMUs on probe failure

  When a resource allocation fails in one clock domain of an NI device,
  we need to properly roll back all previously registered perf PMUs in
  other clock domains of the same device.

  Otherwise, it can lead to kernel panics.

  Calling arm_ni_init+0x0/0xff8 [arm_ni] @ 2374
  arm-ni ARMHCB70:00: Failed to request PMU region 0x1f3c13000
  arm-ni ARMHCB70:00: probe with driver arm-ni failed with error -16
  list_add corruption: next->prev should be prev (fffffd01e9698a18),
  but was 0000000000000000. (next=ffff10001a0decc8).
  pstate: 6340009 (nZCv daif +PAN -UAO +TCO +DIT -SSBS BTYPE=--)
  pc : list_add_valid_or_report+0x7c/0xb8
  lr : list_add_valid_or_report+0x7c/0xb8
  Call trace:
   __list_add_valid_or_report+0x7c/0xb8
   perf_pmu_register+0x22c/0x3a0
   arm_ni_probe+0x554/0x70c [arm_ni]
   platform_probe+0x70/0xe8
   really_probe+0xc6/0x4d8
   driver_probe_device+0x48/0x170
   __driver_attach+0x8e/0x1c0
   bus_for_each_dev+0x64/0xf0
   driver_add+0x138/0x260
   bus_add_driver+0x68/0x138
   __platform_driver_register+0x2c/0x40
   arm_ni_init+0x14/0x2a [arm_ni]
   do_init_module+0x36/0x298
  ---[ end trace 0000000000000000 ]---
  Kernel panic - not syncing: Oops - BUG: Fatal exception
  SMP: stopping secondary CPUs
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2025-38168
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/72caf9886e9c1731cf7bfe3eabc308b9268b21d6
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/7e958e116e3be05a1f869b5a885fc5d674c7725f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/7f57afde6a44d9e044885e1125034edd4fda02e8
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-38168
    reference_type:
    reference_id: CVE-2025-38168
