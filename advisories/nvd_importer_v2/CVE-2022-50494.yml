advisory_id: CVE-2022-50494
datasource_id: nvd_importer_v2/CVE-2022-50494
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-50494
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  thermal: intel_powerclamp: Use get_cpu() instead of smp_processor_id() to avoid crash

  When CPU 0 is offline and intel_powerclamp is used to inject
  idle, it generates kernel BUG:

  BUG: using smp_processor_id() in preemptible [00000000] code: bash/15687
  caller is debug_smp_processor_id+0x17/0x20
  CPU: 4 PID: 15687 Comm: bash Not tainted 5.19.0-rc7+ #57
  Call Trace:
  <TASK>
  dump_stack_lvl+0x49/0x63
  dump_stack+0x10/0x16
  check_preemption_disabled+0xdd/0xe0
  debug_smp_processor_id+0x17/0x20
  powerclamp_set_cur_state+0x7f/0xf9 [intel_powerclamp]
  ...
  ...

  Here CPU 0 is the control CPU by default and changed to the current CPU,
  if CPU 0 offlined. This check has to be performed under cpus_read_lock(),
  hence the above warning.

  Use get_cpu() instead of smp_processor_id() to avoid this BUG.

  [ rjw: Subject edits ]
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-50494
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/0f91f66c568b316b19cb042cf50584467b3bdff4
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/3e799e815097febbcb81b472285be824f5d089f9
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/418fae0700e85a498062424f8656435c32cdb200
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/513943bf879d45005213e6f5cfb7d9e9943f589f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/5614908434451aafbf9b24cb5247cf1d21269f76
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/5a646c38f648185ee2c62f2a19da3c6f04e27612
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/68b99e94a4a2db6ba9b31fe0485e057b9354a640
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/6904727db0eb62fb0c2dce1cf331c341d97ee4b7
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/6e2a347b304224b2aeb1c0ea000d1cf8a02cc592
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-50494
    reference_type:
    reference_id: CVE-2022-50494
