advisory_id: CVE-2025-38624
datasource_id: nvd_importer_v2/CVE-2025-38624
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-38624
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  PCI: pnv_php: Clean up allocated IRQs on unplug

  When the root of a nested PCIe bridge configuration is unplugged, the
  pnv_php driver leaked the allocated IRQ resources for the child bridges'
  hotplug event notifications, resulting in a panic.

  Fix this by walking all child buses and deallocating all its IRQ resources
  before calling pci_hp_remove_devices().

  Also modify the lifetime of the workqueue at struct pnv_php_slot::wq so
  that it is only destroyed in pnv_php_free_slot(), instead of
  pnv_php_disable_irq(). This is required since pnv_php_disable_irq() will
  now be called by workers triggered by hot unplug interrupts, so the
  workqueue needs to stay allocated.

  The abridged kernel panic that occurs without this patch is as follows:

    WARNING: CPU: 0 PID: 687 at kernel/irq/msi.c:292 msi_device_data_release+0x6c/0x9c
    CPU: 0 UID: 0 PID: 687 Comm: bash Not tainted 6.14.0-rc5+ #2
    Call Trace:
     msi_device_data_release+0x34/0x9c (unreliable)
     release_nodes+0x64/0x13c
     devres_release_all+0xc0/0x140
     device_del+0x2d4/0x46c
     pci_destroy_dev+0x5c/0x194
     pci_hp_remove_devices+0x90/0x128
     pci_hp_remove_devices+0x44/0x128
     pnv_php_disable_slot+0x54/0xd4
     power_write_file+0xf8/0x18c
     pci_slot_attr_store+0x40/0x5c
     sysfs_kf_write+0x64/0x78
     kernfs_fop_write_iter+0x1b0/0x290
     vfs_write+0x3bc/0x50c
     ksys_write+0x84/0x140
     system_call_exception+0x124/0x230
     system_call_vectored_common+0x15c/0x2ec

  [bhelgaas: tidy comments]
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2025-38624
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/1773c19fa55e944cdd2634e2d9e552f87f2d38d5
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/28aa3cfce12487614219e7667ec84424e1f43227
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/32173edf3fe2d447e14e5e3b299387c6f9602a88
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/398170b7fd0e0db2f8096df5206c75e5ff41415a
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/4668619092554e1b95c9a5ac2941ca47ba6d548a
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/8c1ad4af160691e157d688ad9619ced2df556aac
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/912e200240b6f9758f0b126e64a61c9227f4ad37
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/bbd302c4b79df10197ffa7270ca3aa572eeca33c
    reference_type:
    reference_id:
  - url: https://lists.debian.org/debian-lts-announce/2025/10/msg00008.html
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:debian:debian_linux:11.0:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:debian:debian_linux:11.0:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-38624
    reference_type:
    reference_id: CVE-2025-38624
