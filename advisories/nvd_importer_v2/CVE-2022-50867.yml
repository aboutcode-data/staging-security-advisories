advisory_id: CVE-2022-50867
datasource_id: nvd_importer_v2/CVE-2022-50867
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-50867
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  drm/msm/a6xx: Fix kvzalloc vs state_kcalloc usage

  adreno_show_object() is a trap!  It will re-allocate the pointer it is
  passed on first call, when the data is ascii85 encoded, using kvmalloc/
  kvfree().  Which means the data *passed* to it must be kvmalloc'd, ie.
  we cannot use the state_kcalloc() helper.

  This partially reverts commit ec8f1813bf8d ("drm/msm/a6xx: Replace
  kcalloc() with kvzalloc()"), but adds the missing kvfree() to fix the
  memory leak that was present previously.  And adds a warning comment.

  Patchwork: https://patchwork.freedesktop.org/patch/507014/
impacted_packages: []
severities: []
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/4b1bbc0571a5d7ee10f754186dc3d619b9ced5c1
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/83d18e9d9c0150d98dc24e3642ea93f5e245322c
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-50867
    reference_type:
    reference_id: CVE-2022-50867
