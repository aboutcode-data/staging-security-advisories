advisory_id: CVE-2025-68248
datasource_id: nvd_importer_v2/CVE-2025-68248
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-68248
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  vmw_balloon: indicate success when effectively deflating during migration

  When migrating a balloon page, we first deflate the old page to then
  inflate the new page.

  However, if inflating the new page succeeded, we effectively deflated the
  old page, reducing the balloon size.

  In that case, the migration actually worked: similar to migrating+
  immediately deflating the new page.  The old page will be freed back to
  the buddy.

  Right now, the core will leave the page be marked as isolated (as we
  returned an error).  When later trying to putback that page, we will run
  into the WARN_ON_ONCE() in balloon_page_putback().

  That handling was changed in commit 3544c4faccb8 ("mm/balloon_compaction:
  stop using __ClearPageMovable()"); before that change, we would have
  tolerated that way of handling it.

  To fix it, let's just return 0 in that case, making the core effectively
  just clear the "isolated" flag + freeing it back to the buddy as if the
  migration succeeded.  Note that the new page will also get freed when the
  core puts the last reference.

  Note that this also makes it all be more consistent: we will no longer
  unisolate the page in the balloon driver while keeping it marked as being
  isolated in migration core.

  This was found by code inspection.
impacted_packages: []
severities: []
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/4ba5a8a7faa647ada8eae61a36517cf369f5bbe4
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/aa05a044c5c2e147d726ac2fae1a97e0775eac11
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-68248
    reference_type:
    reference_id: CVE-2025-68248
