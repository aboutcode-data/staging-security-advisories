advisory_id: CVE-2024-46691
datasource_id: nvd_importer_v2/CVE-2024-46691
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2024-46691
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  usb: typec: ucsi: Move unregister out of atomic section

  Commit '9329933699b3 ("soc: qcom: pmic_glink: Make client-lock
  non-sleeping")' moved the pmic_glink client list under a spinlock, as it
  is accessed by the rpmsg/glink callback, which in turn is invoked from
  IRQ context.

  This means that ucsi_unregister() is now called from atomic context,
  which isn't feasible as it's expecting a sleepable context. An effort is
  under way to get GLINK to invoke its callbacks in a sleepable context,
  but until then lets schedule the unregistration.

  A side effect of this is that ucsi_unregister() can now happen
  after the remote processor, and thereby the communication link with it, is
  gone. pmic_glink_send() is amended with a check to avoid the resulting NULL
  pointer dereference.
  This does however result in the user being informed about this error by
  the following entry in the kernel log:

    ucsi_glink.pmic_glink_ucsi pmic_glink.ucsi.0: failed to send UCSI write request: -5
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2024-46691
weaknesses:
  - CWE-476
references:
  - url: https://git.kernel.org/stable/c/095b0001aefddcd9361097c971b7debc84e72714
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/11bb2ffb679399f99041540cf662409905179e3a
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc2:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc2:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc3:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc3:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc4:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc4:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc5:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc5:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2024-46691
    reference_type:
    reference_id: CVE-2024-46691
