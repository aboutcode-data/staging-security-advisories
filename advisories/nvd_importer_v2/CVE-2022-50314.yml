advisory_id: CVE-2022-50314
datasource_id: nvd_importer_v2/CVE-2022-50314
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-50314
aliases: []
summary: "In the Linux kernel, the following vulnerability has been resolved:\n\nnbd: Fix hung\
  \ when signal interrupts nbd_start_device_ioctl()\n\nsyzbot reported hung task [1].  The following\
  \ program is a simplified\nversion of the reproducer:\n\nint main(void)\n{\n\tint sv[2], fd;\n\
  \n\tif (socketpair(AF_UNIX, SOCK_STREAM, 0, sv) < 0)\n\t\treturn 1;\n\tif ((fd = open(\"/dev/nbd0\"\
  , 0)) < 0)\n\t\treturn 1;\n\tif (ioctl(fd, NBD_SET_SIZE_BLOCKS, 0x81) < 0)\n\t\treturn 1;\n\
  \tif (ioctl(fd, NBD_SET_SOCK, sv[0]) < 0)\n\t\treturn 1;\n\tif (ioctl(fd, NBD_DO_IT) < 0)\n\
  \t\treturn 1;\n\treturn 0;\n}\n\nWhen signal interrupt nbd_start_device_ioctl() waiting the\
  \ condition\natomic_read(&config->recv_threads) == 0, the task can hung because it\nwaits\
  \ the completion of the inflight IOs.\n\nThis patch fixes the issue by clearing queue, not\
  \ just shutdown, when\nsignal interrupt nbd_start_device_ioctl()."
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-50314
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/1de7c3cf48fc41cd95adb12bd1ea9033a917798a
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/3575949513ea3b387b30dac1e69468a923c86caf
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/35fb7d4a53d9e36d1b91161ea9870d9c6d57dccf
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/3ba3846cb3e2fb3c6fbf79e998472821b298419e
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/62006a72b05e0d38727eef5188700f2488be5e89
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/b2700f98b3f4dd19fb4315b70581e5caff89eb49
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/c0d73be0af8c1310713bc39a8d7a22e35084e14f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/c7b4641bd2395c2f3cd3b0a0cbf292ed9d489398
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-50314
    reference_type:
    reference_id: CVE-2022-50314
