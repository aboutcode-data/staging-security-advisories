advisory_id: CVE-2024-46706
datasource_id: nvd_importer_v2/CVE-2024-46706
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2024-46706
aliases: []
summary: "In the Linux kernel, the following vulnerability has been resolved:\n\ntty: serial:\
  \ fsl_lpuart: mark last busy before uart_add_one_port\n\nWith \"earlycon initcall_debug=1\
  \ loglevel=8\" in bootargs, kernel\nsometimes boot hang. It is because normal console still\
  \ is not ready,\nbut runtime suspend is called, so early console putchar will hang\nin waiting\
  \ TRDE set in UARTSTAT.\n\nThe lpuart driver has auto suspend delay set to 3000ms, but during\n\
  uart_add_one_port, a child device serial ctrl will added and probed with\nits pm runtime enabled(see\
  \ serial_ctrl.c).\nThe runtime suspend call path is:\ndevice_add\n     |-> bus_probe_device\n\
  \           |->device_initial_probe\n\t           |->__device_attach\n                   \
  \      |-> pm_runtime_get_sync(dev->parent);\n\t\t\t |-> pm_request_idle(dev);\n\t\t\t |->\
  \ pm_runtime_put(dev->parent);\n\nSo in the end, before normal console ready, the lpuart get\
  \ runtime\nsuspended. And earlycon putchar will hang.\n\nTo address the issue, mark last busy\
  \ just after pm_runtime_enable,\nthree seconds is long enough to switch from bootconsole to\
  \ normal\nconsole."
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2024-46706
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/3ecf625d4acb71d726bc0b49403cf68388b3d58d
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/8eb92cfca6c2c5a15ab1773f3d18ab8d8f7dbb68
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/dc98d76a15bc29a9a4e76f2f65f39f3e590fb15c
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc1:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc1:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc2:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc2:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:6.11:rc3:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:6.11:rc3:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2024-46706
    reference_type:
    reference_id: CVE-2024-46706
