advisory_id: CVE-2025-21805
datasource_id: nvd_importer_v2/CVE-2025-21805
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2025-21805
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  RDMA/rtrs: Add missing deinit() call

  A warning is triggered when repeatedly connecting and disconnecting the
  rnbd:
   list_add corruption. prev->next should be next (ffff88800b13e480), but was ffff88801ecd1338. (prev=ffff88801ecd1340).
   WARNING: CPU: 1 PID: 36562 at lib/list_debug.c:32 __list_add_valid_or_report+0x7f/0xa0
   Workqueue: ib_cm cm_work_handler [ib_cm]
   RIP: 0010:__list_add_valid_or_report+0x7f/0xa0
    ? __list_add_valid_or_report+0x7f/0xa0
    ib_register_event_handler+0x65/0x93 [ib_core]
    rtrs_srv_ib_dev_init+0x29/0x30 [rtrs_server]
    rtrs_ib_dev_find_or_add+0x124/0x1d0 [rtrs_core]
    __alloc_path+0x46c/0x680 [rtrs_server]
    ? rtrs_rdma_connect+0xa6/0x2d0 [rtrs_server]
    ? rcu_is_watching+0xd/0x40
    ? __mutex_lock+0x312/0xcf0
    ? get_or_create_srv+0xad/0x310 [rtrs_server]
    ? rtrs_rdma_connect+0xa6/0x2d0 [rtrs_server]
    rtrs_rdma_connect+0x23c/0x2d0 [rtrs_server]
    ? __lock_release+0x1b1/0x2d0
    cma_cm_event_handler+0x4a/0x1a0 [rdma_cm]
    cma_ib_req_handler+0x3a0/0x7e0 [rdma_cm]
    cm_process_work+0x28/0x1a0 [ib_cm]
    ? _raw_spin_unlock_irq+0x2f/0x50
    cm_req_handler+0x618/0xa60 [ib_cm]
    cm_work_handler+0x71/0x520 [ib_cm]

  Commit 667db86bcbe8 ("RDMA/rtrs: Register ib event handler") introduced a
  new element .deinit but never used it at all. Fix it by invoking the
  `deinit()` to appropriately unregister the IB event handler.
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2025-21805
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/1af2c769032b6b334cd2a867d7d8c7cbbc527b2d
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/5a79cc9bc961fafe90787f86e8f53ba6fad8d63b
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/81468c4058a62e84e475433b83b3edc613294f5e
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2025-21805
    reference_type:
    reference_id: CVE-2025-21805
