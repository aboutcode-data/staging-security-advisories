advisory_id: CVE-2022-49157
datasource_id: nvd_importer_v2/CVE-2022-49157
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-49157
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  scsi: qla2xxx: Fix premature hw access after PCI error

  After a recoverable PCI error has been detected and recovered, qla driver
  needs to check to see if the error condition still persist and/or wait
  for the OS to give the resume signal.

  Sep  8 22:26:03 localhost kernel: WARNING: CPU: 9 PID: 124606 at qla_tmpl.c:440
  qla27xx_fwdt_entry_t266+0x55/0x60 [qla2xxx]
  Sep  8 22:26:03 localhost kernel: RIP: 0010:qla27xx_fwdt_entry_t266+0x55/0x60
  [qla2xxx]
  Sep  8 22:26:03 localhost kernel: Call Trace:
  Sep  8 22:26:03 localhost kernel: ? qla27xx_walk_template+0xb1/0x1b0 [qla2xxx]
  Sep  8 22:26:03 localhost kernel: ? qla27xx_execute_fwdt_template+0x12a/0x160
  [qla2xxx]
  Sep  8 22:26:03 localhost kernel: ? qla27xx_fwdump+0xa0/0x1c0 [qla2xxx]
  Sep  8 22:26:03 localhost kernel: ? qla2xxx_pci_mmio_enabled+0xfb/0x120
  [qla2xxx]
  Sep  8 22:26:03 localhost kernel: ? report_mmio_enabled+0x44/0x80
  Sep  8 22:26:03 localhost kernel: ? report_slot_reset+0x80/0x80
  Sep  8 22:26:03 localhost kernel: ? pci_walk_bus+0x70/0x90
  Sep  8 22:26:03 localhost kernel: ? aer_dev_correctable_show+0xc0/0xc0
  Sep  8 22:26:03 localhost kernel: ? pcie_do_recovery+0x1bb/0x240
  Sep  8 22:26:03 localhost kernel: ? aer_recover_work_func+0xaa/0xd0
  Sep  8 22:26:03 localhost kernel: ? process_one_work+0x1a7/0x360
  ..
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-8041:22: detected PCI
  disconnect.
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-107ff:22:
  qla27xx_fwdt_entry_t262: dump ram MB failed. Area 5h start 198013h end 198013h
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-107ff:22: Unable to
  capture FW dump
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-1015:22: cmd=0x0,
  waited 5221 msecs
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-680d:22: mmio
  enabled returning.
  Sep  8 22:26:03 localhost kernel: qla2xxx [0000:42:00.2]-d04c:22: MBX
  Command timeout for cmd 0, iocontrol=ffffffff jiffies=10140f2e5
  mb[0-3]=[0xffff 0xffff 0xffff 0xffff]
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-49157
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/5ef6319f9882699613d5182fbd7929b017e8c5ab
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/6c125fd5ad035777f7b471553f7ddda76e8e7136
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d7994dff9071555a959a168f9184dd9abae68a6b
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/e35920ab7874d5e2faeb4f958a74bfa793f1ce5a
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-49157
    reference_type:
    reference_id: CVE-2022-49157
