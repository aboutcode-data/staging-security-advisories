advisory_id: CVE-2022-50270
datasource_id: nvd_importer_v2/CVE-2022-50270
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-50270
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  f2fs: fix the assign logic of iocb

  commit 18ae8d12991b ("f2fs: show more DIO information in tracepoint")
  introduces iocb field in 'f2fs_direct_IO_enter' trace event
  And it only assigns the pointer and later it accesses its field
  in trace print log.

  Unable to handle kernel paging request at virtual address ffffffc04cef3d30
  Mem abort info:
  ESR = 0x96000007
  EC = 0x25: DABT (current EL), IL = 32 bits

   pc : trace_raw_output_f2fs_direct_IO_enter+0x54/0xa4
   lr : trace_raw_output_f2fs_direct_IO_enter+0x2c/0xa4
   sp : ffffffc0443cbbd0
   x29: ffffffc0443cbbf0 x28: ffffff8935b120d0 x27: ffffff8935b12108
   x26: ffffff8935b120f0 x25: ffffff8935b12100 x24: ffffff8935b110c0
   x23: ffffff8935b10000 x22: ffffff88859a936c x21: ffffff88859a936c
   x20: ffffff8935b110c0 x19: ffffff8935b10000 x18: ffffffc03b195060
   x17: ffffff8935b11e76 x16: 00000000000000cc x15: ffffffef855c4f2c
   x14: 0000000000000001 x13: 000000000000004e x12: ffff0000ffffff00
   x11: ffffffef86c350d0 x10: 00000000000010c0 x9 : 000000000fe0002c
   x8 : ffffffc04cef3d28 x7 : 7f7f7f7f7f7f7f7f x6 : 0000000002000000
   x5 : ffffff8935b11e9a x4 : 0000000000006250 x3 : ffff0a00ffffff04
   x2 : 0000000000000002 x1 : ffffffef86a0a31f x0 : ffffff8935b10000
   Call trace:
    trace_raw_output_f2fs_direct_IO_enter+0x54/0xa4
    print_trace_fmt+0x9c/0x138
    print_trace_line+0x154/0x254
    tracing_read_pipe+0x21c/0x380
    vfs_read+0x108/0x3ac
    ksys_read+0x7c/0xec
    __arm64_sys_read+0x20/0x30
    invoke_syscall+0x60/0x150
    el0_svc_common.llvm.1237943816091755067+0xb8/0xf8
    do_el0_svc+0x28/0xa0

  Fix it by copying the required variables for printing and while at
  it fix the similar issue at some other places in the same file.
impacted_packages: []
severities:
  - score: '7.1'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:H/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-50270
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/0db18eec0d9a7ee525209e31e3ac2f673545b12f
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/b4244ca341ea95c52ee8fa93d04f5af3e584dd37
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d555aa37566c5c3728f2e52047a9722eae2aed93
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-50270
    reference_type:
    reference_id: CVE-2022-50270
