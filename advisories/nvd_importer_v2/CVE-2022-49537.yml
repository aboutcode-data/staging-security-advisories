advisory_id: CVE-2022-49537
datasource_id: nvd_importer_v2/CVE-2022-49537
datasource_url: https://nvd.nist.gov/vuln/detail/CVE-2022-49537
aliases: []
summary: |
  In the Linux kernel, the following vulnerability has been resolved:

  scsi: lpfc: Fix call trace observed during I/O with CMF enabled

  The following was seen with CMF enabled:

  BUG: using smp_processor_id() in preemptible
  code: systemd-udevd/31711
  kernel: caller is lpfc_update_cmf_cmd+0x214/0x420  [lpfc]
  kernel: CPU: 12 PID: 31711 Comm: systemd-udevd
  kernel: Call Trace:
  kernel: <TASK>
  kernel: dump_stack_lvl+0x44/0x57
  kernel: check_preemption_disabled+0xbf/0xe0
  kernel: lpfc_update_cmf_cmd+0x214/0x420 [lpfc]
  kernel: lpfc_nvme_fcp_io_submit+0x23b4/0x4df0 [lpfc]

  this_cpu_ptr() calls smp_processor_id() in a preemptible context.

  Fix by using per_cpu_ptr() with raw_smp_processor_id() instead.
impacted_packages: []
severities:
  - score: '5.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://nvd.nist.gov/vuln/detail/CVE-2022-49537
weaknesses: []
references:
  - url: https://git.kernel.org/stable/c/517e0835cfb2007713ff16c4fb8479f08b16aec7
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/ae373d66c427812754db5292eb1481b181daf9ce
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/cd7f899de4b1b829125d72ee6fbfd878b637b815
    reference_type:
    reference_id:
  - url: https://git.kernel.org/stable/c/d6d45f67a11136cb88a70a29ab22ea6db8ae6bd5
    reference_type:
    reference_id:
  - url: https://nvd.nist.gov/vuln/search/results?adv_search=true&isCpeNameSearch=true&query=cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
    reference_type:
    reference_id: cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*
  - url: https://nvd.nist.gov/vuln/detail/CVE-2022-49537
    reference_type:
    reference_id: CVE-2022-49537
