advisory_id: GHSA-2rxc-gjrp-vjhx
datasource_id: github_osv_importer_v2/GHSA-2rxc-gjrp-vjhx
datasource_url: https://github.com/github/advisory-database/blob/main/advisories/github-reviewed/2024/12/GHSA-2rxc-gjrp-vjhx/GHSA-2rxc-gjrp-vjhx.json
aliases: []
summary: |
  Unsoundness in anstream
  When given a valid UTF8 string "Ã¶\x1bðŸ˜€", the function in crates/anstream/src/adapter/strip.rs will be confused. The UTF8 bytes are \xc3\xb6 then \x1b then \xf0\x9f\x98\x80.

  When looping over "non-printable bytes" \x1b\xf0 will be considered as some non-printable sequence.

  This will produce a broken str from the incorrectly segmented bytes via str::from_utf8_unchecked, and that should never happen.

  Full credit goes to @Ralith who reviewed this code and asked @burakemir to follow up.
impacted_packages: []
severities:
  - score: MODERATE
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url:
weaknesses: []
references:
  - url: https://github.com/rust-cli/anstyle
    reference_type:
    reference_id:
  - url: https://github.com/rust-cli/anstyle/issues/156
    reference_type:
    reference_id:
  - url: https://rustsec.org/advisories/RUSTSEC-2024-0404.html
    reference_type:
    reference_id:
