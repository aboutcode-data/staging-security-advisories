advisory_id: GHSA-8hxh-r6f7-jf45
datasource_id: github_osv_importer_v2/GHSA-8hxh-r6f7-jf45
datasource_url: https://github.com/github/advisory-database/blob/main/advisories/github-reviewed/2020/10/GHSA-8hxh-r6f7-jf45/GHSA-8hxh-r6f7-jf45.json
aliases: []
summary: |
  Memory exhaustion in http4s-async-http-client with large or malicious compressed responses
  ### Impact
  A server we connect to with http4s-async-http-client could theoretically respond with a large or malicious compressed stream and exhaust memory in the client JVM.  It does not affect http4s servers, other client backends, or clients that speak only to trusted servers.  This is related to a transitive dependency on netty-codec-4.1.45.Final, which is affected by [CVE-2020-11612](https://app.snyk.io/vuln/SNYK-JAVA-IONETTY-564897).

  ### Patches
  Upgrade to http4s-async-http-client >= 0.21.8.  All 1.0 milestones are also safe.

  ### Workarounds
  Add an explicit runtime dependency on async-http-client's netty dependencies that evicts them to an unaffected version:

  ```scala
  libraryDependencies ++= Seq(
    "io.netty" %  "netty-codec"         % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-codec-socks"   % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-handler-proxy" % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-common"        % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-transport"     % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-handler"       % "4.1.53.Final" % Runtime,
    "io.netty" %  "netty-resolver-dns"  % "4.1.53.Final" % Runtime
  )
  ```

  ### References
  * https://app.snyk.io/vuln/SNYK-JAVA-IONETTY-564897
  * https://github.com/http4s/http4s/issues/3681

  ### For more information
  If you have any questions or comments about this advisory:
  * Open an issue in [http4s](https://github.com/http4s/http4s/issues/new)
  * Contact a maintainer privately per [http4s' security policy](https://github.com/http4s/http4s/blob/master/SECURITY.md#reporting-a-vulnerability)
impacted_packages:
  - purl: pkg:maven/org.http4s/http4s-async-http-client_2.13
    affected_versions: vers:maven/<=0.21.7
    fixed_versions: vers:maven/0.21.8
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:maven/org.http4s/http4s-async-http-client_2.12
    affected_versions: vers:maven/<=0.21.7
    fixed_versions: vers:maven/0.21.8
    fixed_in_commits: []
    introduced_in_commits: []
severities:
  - score: LOW
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url:
weaknesses:
  - CWE-400
references:
  - url: https://github.com/http4s/http4s
    reference_type:
    reference_id:
  - url: https://github.com/http4s/http4s/security/advisories/GHSA-8hxh-r6f7-jf45
    reference_type:
    reference_id:
