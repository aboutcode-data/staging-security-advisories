advisory_id: CVE-2022-26358
datasource_id: collect_xen_project_fix_commits/CVE-2022-26358
datasource_url: https://github.com/xen-project/xen
aliases: []
summary: |
  7b0d89d547d4a7428133d837ef2e69ad474fa3e7:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
  master commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
  master date: 2022-04-05 14:15:33 +0200
  650b888c8a0a03d796632597e6adfd0075f13954:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
  master commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
  master date: 2022-04-05 14:15:33 +0200
  b382b7d2ff7a92ccafe741f05fdc630d87ef7062:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
  master commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
  master date: 2022-04-05 14:15:33 +0200
  1427c846e47b44a3833641639fe5726ae355fbde:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
  master commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
  master date: 2022-04-05 14:15:33 +0200
  2c0e367013f7f17753b48f2bd5ed34d85dcb8881:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
  master commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
  master date: 2022-04-05 14:15:33 +0200
  78a40f8b5dfa1a3aec43528663f39473d4429101:VT-d: fix (de)assign ordering when RMRRs are in use

  In the event that the RMRR mappings are essential for device operation,
  they should be established before updating the device's context entry,
  while they should be torn down only after the device's context entry was
  successfully updated.

  Also adjust a related log message.

  This is CVE-2022-26358 / part of XSA-400.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Reviewed-by: Roger Pau Monné <roger.pau@citrix.com>
  Reviewed-by: Paul Durrant <paul@xen.org>
  Reviewed-by: Kevin Tian <kevin.tian@intel.com>
impacted_packages:
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 1427c846e47b44a3833641639fe5726ae355fbde
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 2c0e367013f7f17753b48f2bd5ed34d85dcb8881
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: b382b7d2ff7a92ccafe741f05fdc630d87ef7062
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 78a40f8b5dfa1a3aec43528663f39473d4429101
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 7b0d89d547d4a7428133d837ef2e69ad474fa3e7
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 650b888c8a0a03d796632597e6adfd0075f13954
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/xen-project/xen/tree/1427c846e47b44a3833641639fe5726ae355fbde
    reference_type: commit
    reference_id: 1427c846e47b44a3833641639fe5726ae355fbde
  - url: https://github.com/xen-project/xen/tree/2c0e367013f7f17753b48f2bd5ed34d85dcb8881
    reference_type: commit
    reference_id: 2c0e367013f7f17753b48f2bd5ed34d85dcb8881
  - url: https://github.com/xen-project/xen/tree/650b888c8a0a03d796632597e6adfd0075f13954
    reference_type: commit
    reference_id: 650b888c8a0a03d796632597e6adfd0075f13954
  - url: https://github.com/xen-project/xen/tree/78a40f8b5dfa1a3aec43528663f39473d4429101
    reference_type: commit
    reference_id: 78a40f8b5dfa1a3aec43528663f39473d4429101
  - url: https://github.com/xen-project/xen/tree/7b0d89d547d4a7428133d837ef2e69ad474fa3e7
    reference_type: commit
    reference_id: 7b0d89d547d4a7428133d837ef2e69ad474fa3e7
  - url: https://github.com/xen-project/xen/tree/b382b7d2ff7a92ccafe741f05fdc630d87ef7062
    reference_type: commit
    reference_id: b382b7d2ff7a92ccafe741f05fdc630d87ef7062
