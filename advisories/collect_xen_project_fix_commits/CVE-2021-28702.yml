advisory_id: CVE-2021-28702
datasource_id: collect_xen_project_fix_commits/CVE-2021-28702
datasource_url: https://github.com/xen-project/xen
aliases: []
summary: |
  192aaf7e146c0b41dbdd35ccdb13eb33ced13633:VT-d: fix deassign of device with RMRR

  Ignoring a specific error code here was not meant to short circuit
  deassign to _just_ the unmapping of RMRRs. This bug was previously
  hidden by the bogus (potentially indefinite) looping in
  pci_release_devices(), until f591755823a7 ("IOMMU/PCI: don't let domain
  cleanup continue when device de-assignment failed") fixed that loop.

  This is CVE-2021-28702 / XSA-386.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Reported-by: Ivan Kardykov <kardykov@tabit.pro>
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Tested-by: Ivan Kardykov <kardykov@tabit.pro>
  95172a6347111247287ca6d7966aff69aa379965:VT-d: fix deassign of device with RMRR

  Ignoring a specific error code here was not meant to short circuit
  deassign to _just_ the unmapping of RMRRs. This bug was previously
  hidden by the bogus (potentially indefinite) looping in
  pci_release_devices(), until f591755823a7 ("IOMMU/PCI: don't let domain
  cleanup continue when device de-assignment failed") fixed that loop.

  This is CVE-2021-28702 / XSA-386.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Reported-by: Ivan Kardykov <kardykov@tabit.pro>
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Tested-by: Ivan Kardykov <kardykov@tabit.pro>
  (cherry picked from commit 24ebe875a77833696bbe5c9372e9e1590a7e7101)
  b4bb02d5999a56c93f0733b589b717e7cece9c09:VT-d: fix deassign of device with RMRR

  Ignoring a specific error code here was not meant to short circuit
  deassign to _just_ the unmapping of RMRRs. This bug was previously
  hidden by the bogus (potentially indefinite) looping in
  pci_release_devices(), until f591755823a7 ("IOMMU/PCI: don't let domain
  cleanup continue when device de-assignment failed") fixed that loop.

  This is CVE-2021-28702 / XSA-386.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Reported-by: Ivan Kardykov <kardykov@tabit.pro>
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Tested-by: Ivan Kardykov <kardykov@tabit.pro>
  (cherry picked from commit 24ebe875a77833696bbe5c9372e9e1590a7e7101)
  ba45e99aa4da5dae6f42819ceb9372764fea410d:VT-d: fix deassign of device with RMRR

  Ignoring a specific error code here was not meant to short circuit
  deassign to _just_ the unmapping of RMRRs. This bug was previously
  hidden by the bogus (potentially indefinite) looping in
  pci_release_devices(), until f591755823a7 ("IOMMU/PCI: don't let domain
  cleanup continue when device de-assignment failed") fixed that loop.

  This is CVE-2021-28702 / XSA-386.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Reported-by: Ivan Kardykov <kardykov@tabit.pro>
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Tested-by: Ivan Kardykov <kardykov@tabit.pro>
  (cherry picked from commit 24ebe875a77833696bbe5c9372e9e1590a7e7101)
  3b98d9f35a9edd2502ff9466341132baa6664cc3:VT-d: fix deassign of device with RMRR

  Ignoring a specific error code here was not meant to short circuit
  deassign to _just_ the unmapping of RMRRs. This bug was previously
  hidden by the bogus (potentially indefinite) looping in
  pci_release_devices(), until f591755823a7 ("IOMMU/PCI: don't let domain
  cleanup continue when device de-assignment failed") fixed that loop.

  This is CVE-2021-28702 / XSA-386.

  Fixes: 8b99f4400b69 ("VT-d: fix RMRR related error handling")
  Reported-by: Ivan Kardykov <kardykov@tabit.pro>
  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Tested-by: Ivan Kardykov <kardykov@tabit.pro>
  (cherry picked from commit 24ebe875a77833696bbe5c9372e9e1590a7e7101)
impacted_packages:
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 3b98d9f35a9edd2502ff9466341132baa6664cc3
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: ba45e99aa4da5dae6f42819ceb9372764fea410d
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 95172a6347111247287ca6d7966aff69aa379965
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: b4bb02d5999a56c93f0733b589b717e7cece9c09
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: '192aaf7e146c0b41dbdd35ccdb13eb33ced13633'
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/xen-project/xen/tree/192aaf7e146c0b41dbdd35ccdb13eb33ced13633
    reference_type: commit
    reference_id: '192aaf7e146c0b41dbdd35ccdb13eb33ced13633'
  - url: https://github.com/xen-project/xen/tree/3b98d9f35a9edd2502ff9466341132baa6664cc3
    reference_type: commit
    reference_id: 3b98d9f35a9edd2502ff9466341132baa6664cc3
  - url: https://github.com/xen-project/xen/tree/95172a6347111247287ca6d7966aff69aa379965
    reference_type: commit
    reference_id: 95172a6347111247287ca6d7966aff69aa379965
  - url: https://github.com/xen-project/xen/tree/b4bb02d5999a56c93f0733b589b717e7cece9c09
    reference_type: commit
    reference_id: b4bb02d5999a56c93f0733b589b717e7cece9c09
  - url: https://github.com/xen-project/xen/tree/ba45e99aa4da5dae6f42819ceb9372764fea410d
    reference_type: commit
    reference_id: ba45e99aa4da5dae6f42819ceb9372764fea410d
