advisory_id: CVE-2015-8340
datasource_id: collect_xen_project_fix_commits/CVE-2015-8340
datasource_url: https://github.com/xen-project/xen
aliases: []
summary: |
  3b60a4b27188d8d688189b6cddb607df7fde850f:memory: fix XENMEM_exchange error handling

  assign_pages() can fail due to the domain getting killed in parallel,
  which should not result in a hypervisor crash.

  Reported-by: Julien Grall <julien.grall@citrix.com>

  Also delete a redundant put_gfn() - all relevant paths leading to the
  "fail" label already do this (and there are also paths where it was
  plain wrong). All of the put_gfn()-s got introduced by 51032ca058
  ("Modify naming of queries into the p2m"), including the otherwise
  unneeded initializer for k (with even a kind of misleading comment -
  the compiler warning could actually have served as a hint that the use
  is wrong).

  This is CVE-2015-8339 + CVE-2015-8340 / XSA-159.

  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Acked-by: Ian Campbell <ian.campbell@citrix.com>
  master commit: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
  master date: 2015-12-08 14:01:43 +0100
  2432628c93b8a2c819d4b827c4379fb30a20d489:memory: fix XENMEM_exchange error handling

  assign_pages() can fail due to the domain getting killed in parallel,
  which should not result in a hypervisor crash.

  Reported-by: Julien Grall <julien.grall@citrix.com>

  Also delete a redundant put_gfn() - all relevant paths leading to the
  "fail" label already do this (and there are also paths where it was
  plain wrong). All of the put_gfn()-s got introduced by 51032ca058
  ("Modify naming of queries into the p2m"), including the otherwise
  unneeded initializer for k (with even a kind of misleading comment -
  the compiler warning could actually have served as a hint that the use
  is wrong).

  This is CVE-2015-8339 + CVE-2015-8340 / XSA-159.

  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Acked-by: Ian Campbell <ian.campbell@citrix.com>
  master commit: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
  master date: 2015-12-08 14:01:43 +0100
  746534ff5e60a8f4fcc250ccab39f9a1fd382f55:memory: fix XENMEM_exchange error handling

  assign_pages() can fail due to the domain getting killed in parallel,
  which should not result in a hypervisor crash.

  Reported-by: Julien Grall <julien.grall@citrix.com>

  Also delete a redundant put_gfn() - all relevant paths leading to the
  "fail" label already do this (and there are also paths where it was
  plain wrong). All of the put_gfn()-s got introduced by 51032ca058
  ("Modify naming of queries into the p2m"), including the otherwise
  unneeded initializer for k (with even a kind of misleading comment -
  the compiler warning could actually have served as a hint that the use
  is wrong).

  This is CVE-2015-8339 + CVE-2015-8340 / XSA-159.

  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Acked-by: Ian Campbell <ian.campbell@citrix.com>
  master commit: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
  master date: 2015-12-08 14:01:43 +0100
  2633d57c3aa849ccb5fb541d96aa953104f824c9:memory: fix XENMEM_exchange error handling

  assign_pages() can fail due to the domain getting killed in parallel,
  which should not result in a hypervisor crash.

  Reported-by: Julien Grall <julien.grall@citrix.com>

  Also delete a redundant put_gfn() - all relevant paths leading to the
  "fail" label already do this (and there are also paths where it was
  plain wrong). All of the put_gfn()-s got introduced by 51032ca058
  ("Modify naming of queries into the p2m"), including the otherwise
  unneeded initializer for k (with even a kind of misleading comment -
  the compiler warning could actually have served as a hint that the use
  is wrong).

  This is CVE-2015-8339 + CVE-2015-8340 / XSA-159.

  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Acked-by: Ian Campbell <ian.campbell@citrix.com>
  master commit: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
  master date: 2015-12-08 14:01:43 +0100
  eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9:memory: fix XENMEM_exchange error handling

  assign_pages() can fail due to the domain getting killed in parallel,
  which should not result in a hypervisor crash.

  Reported-by: Julien Grall <julien.grall@citrix.com>

  Also delete a redundant put_gfn() - all relevant paths leading to the
  "fail" label already do this (and there are also paths where it was
  plain wrong). All of the put_gfn()-s got introduced by 51032ca058
  ("Modify naming of queries into the p2m"), including the otherwise
  unneeded initializer for k (with even a kind of misleading comment -
  the compiler warning could actually have served as a hint that the use
  is wrong).

  This is CVE-2015-8339 + CVE-2015-8340 / XSA-159.

  Signed-off-by: Jan Beulich <jbeulich@suse.com>
  Acked-by: Ian Campbell <ian.campbell@citrix.com>
impacted_packages:
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 746534ff5e60a8f4fcc250ccab39f9a1fd382f55
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 2633d57c3aa849ccb5fb541d96aa953104f824c9
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 2432628c93b8a2c819d4b827c4379fb30a20d489
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
    introduced_in_commits: []
  - purl: pkg:github/xen-project/xen
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/xen-project/xen
        commit: 3b60a4b27188d8d688189b6cddb607df7fde850f
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/xen-project/xen/tree/2432628c93b8a2c819d4b827c4379fb30a20d489
    reference_type: commit
    reference_id: 2432628c93b8a2c819d4b827c4379fb30a20d489
  - url: https://github.com/xen-project/xen/tree/2633d57c3aa849ccb5fb541d96aa953104f824c9
    reference_type: commit
    reference_id: 2633d57c3aa849ccb5fb541d96aa953104f824c9
  - url: https://github.com/xen-project/xen/tree/3b60a4b27188d8d688189b6cddb607df7fde850f
    reference_type: commit
    reference_id: 3b60a4b27188d8d688189b6cddb607df7fde850f
  - url: https://github.com/xen-project/xen/tree/746534ff5e60a8f4fcc250ccab39f9a1fd382f55
    reference_type: commit
    reference_id: 746534ff5e60a8f4fcc250ccab39f9a1fd382f55
  - url: https://github.com/xen-project/xen/tree/eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
    reference_type: commit
    reference_id: eedecb3cf0b2ce1ffc2eb08f3c73f88d42c382c9
