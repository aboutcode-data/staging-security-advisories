advisory_id: RHSA-2016:1034
datasource_id: redhat_importer_v2/RHSA-2016:1034
datasource_url: https://security.access.redhat.com/data/csaf/v2/advisories/2016/rhsa-2016_1034.json
aliases:
  - CVE-2016-3697
summary: "An update for docker is now available for Red Hat Enterprise Linux 7 Extras.\n\nRed\
  \ Hat Product Security has rated this update as having a security impact of Moderate. A Common\
  \ Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating,\
  \ is available for each vulnerability from the CVE link(s) in the References section.\n\n\
  Docker is an open-source engine that automates the deployment of any application as a lightweight,\
  \ portable, self-sufficient container that will run virtually anywhere.\n\nSecurity Fix(es):\n\
  \n* It was found that Docker would launch containers under the specified UID instead of a\
  \ username. An attacker able to launch a container could use this flaw to escalate their privileges\
  \ to root within the launched container. (CVE-2016-3697)\n\nThis issue was discovered by Mrunal\
  \ Patel (Red Hat).\n\nBug Fix(es):\n\n* The process of pulling an image spawns a new \"goroutine\"\
  \ for each layer in the image manifest. If any of these downloads, everything stops and an\
  \ error is returned, even though other goroutines would still be running and writing output\
  \ through a progress reader which is attached to an http response writer. Since the request\
  \ handler had already returned from the first error, the http server panics when one of these\
  \ download goroutines makes a write to the response writer buffer. This bug has been fixed,\
  \ and docker no longer panics when pulling an image. (BZ#1264562)\n\n* Previously, in certain\
  \ situations, a container rootfs remained busy during container removal. This typically happened\
  \ if a container mount point leaked into another mount namespace. As a consequence, container\
  \ removal failed. To fix this bug, a new docker daemon option \"dm.use_deferred_deletion\"\
  \ has been provided. If set to true, this option will defer the container rootfs deletion.\
  \ The user will see success on container removal but the actual thin device backing the rootfs\
  \ will be deleted later when it is not busy anymore. (BZ#1190492)\n \t\n* Previously, the\
  \ Docker unit file had the \"Restart\" option set to \"on-failure\". Consequently, the docker\
  \ daemon was forced to restart even in cases where it couldn't be started because of configuration\
  \ or other issues and this situation forced unnecessary restarts of the docker-storage-setup\
  \ service in a loop. This also caused real error messages to be lost due to so many restarts.\
  \ To fix this bug, \"Restart=on-failure\" has been replaced with \"Restart=on-abnormal\" in\
  \ the docker unit file. As a result, the docker daemon will not automatically restart if it\
  \ fails with an unclean exit code. (BZ#1319783)\n\n* Previously, the request body was incorrectly\
  \ read twice by the docker daemon and consequently, an EOF error was returned. To fix this\
  \ bug, the code which incorrectly read the request body the first time has been removed. As\
  \ a result, the EOF error is no longer returned and the body is correctly read when really\
  \ needed. (BZ#1329743)\n\nEnhancement(s):\n\n* The /usr/bin/docker script now calls /usr/bin/docker-current\
  \ or /usr/bin/docker-latest based on the value of the sysconfig variable DOCKERBINARY present\
  \ in /etc/sysconfig/docker. /usr/bin/docker and /etc/sysconfig/docker provided by the docker-common\
  \ package allow the admin to configure which docker client binary gets called. /usr/bin/docker\
  \ will call /usr/bin/docker-latest by default when docker is not installed. If docker is installed,\
  \ /usr/bin/docker will call /usr/bin/docker-current by default, unless DOCKERBINARY is set\
  \ to /usr/bin/docker-latest in /etc/sysconfig/docker. This way, you can use docker-latest\
  \ or docker without the need to check which version of the daemon is currently running. (BZ#1328219)"
impacted_packages:
  - purl: pkg:rpm/redhat/docker-logrotate?arch=x86_64
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/docker-selinux?arch=x86_64
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/docker?arch=x86_64
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/docker-forward-journald?arch=x86_64
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/docker-common?arch=x86_64
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/docker?arch=src
    affected_versions: vers:rpm/<1.9.1-40.el7
    fixed_versions: vers:rpm/1.9.1-40.el7
    fixed_in_commits: []
    introduced_in_commits: []
severities:
  - score: Moderate
    scoring_system: rhas
    scoring_elements:
    published_at: None
    url: https://security.access.redhat.com/data/csaf/v2/advisories/2016/rhsa-2016_1034.json
weaknesses: []
references:
  - url: https://access.redhat.com/security/updates/classification/#moderate
    reference_type:
    reference_id:
  - url: https://security.access.redhat.com/data/csaf/v2/advisories/2016/rhsa-2016_1034.json
    reference_type:
    reference_id:
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1186066
    reference_type: bug
    reference_id: 1186066
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1261565
    reference_type: bug
    reference_id: 1261565
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1266307
    reference_type: bug
    reference_id: 1266307
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1268059
    reference_type: bug
    reference_id: 1268059
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1272143
    reference_type: bug
    reference_id: 1272143
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1303110
    reference_type: bug
    reference_id: 1303110
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1309739
    reference_type: bug
    reference_id: 1309739
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1316651
    reference_type: bug
    reference_id: 1316651
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1319783
    reference_type: bug
    reference_id: 1319783
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1322762
    reference_type: bug
    reference_id: 1322762
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1328219
    reference_type: bug
    reference_id: 1328219
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1329423
    reference_type: bug
    reference_id: 1329423
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1329450
    reference_type: bug
    reference_id: 1329450
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1329743
    reference_type: bug
    reference_id: 1329743
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1330595
    reference_type: bug
    reference_id: 1330595
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1330622
    reference_type: bug
    reference_id: 1330622
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1331007
    reference_type: bug
    reference_id: 1331007
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1332592
    reference_type: bug
    reference_id: 1332592
  - url: https://access.redhat.com/errata/RHSA-2016:1034
    reference_type:
    reference_id: RHSA-2016:1034
