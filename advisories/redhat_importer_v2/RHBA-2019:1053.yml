advisory_id: RHBA-2019:1053
datasource_id: redhat_importer_v2/RHBA-2019:1053
datasource_url: https://security.access.redhat.com/data/csaf/v2/advisories/2019/rhba-2019_1053.json
aliases:
  - CVE-2018-5407
summary: |
  Updated ​​redhat-virtualization-host packages that fix several bugs and add various enhancements are now available.

  The imgbased packages provide a way to create read-only base images from squashfs images, and a way to manage writable filesystem layers on top of those base images, including the installation of new images through yum and selection of a layer from runtime.

  The redhat-virtualization-host packages provide the Red Hat Virtualization Host. These packages include redhat-release-virtualization-host. Red Hat Virtualization Hosts (RHVH) are installed using a special build of Red Hat Enterprise Linux with only the packages required to host virtual machines. RHVH features a Cockpit user interface for monitoring the host's resources and performing administrative tasks.

  The redhat-release-virtualization-host package provides the Red Hat Virtualization Host. Red Hat Virtualization Hosts (RHVH) are installed using a special build of Red Hat Enterprise Linux with only the packages required to host virtual machines. RHVH features a Cockpit user interface for monitoring the host's resources and performing administrative tasks.

  Changes to the imgbased component:

  * Previously, Red Hat Virtualization Host entered emergency mode after it was updated to the latest version and rebooted twice. This was due to the presence of a local disk WWID in /etc/multipath/wwids.

  In the current release, /etc/multipath/wwids has been removed. During upgrades, imgbased now calls "vdsm-tool configure --force" in the new layer, using the SYSTEMD_IGNORE_CHROOT environment variable. (BZ#1636028)

  * Previously, the default ntp.conf file was migrated to chrony even when NTP was disabled, overwriting chrony.conf file with incorrect values. In the current release, ntp.conf is only migrated if NTP is enabled. (BZ#1638606)

  * Previously, imgbased failed upon receiving the e2fsck return code 1 when creating a new layer. In the current release, imgbased handles the  e2fsck return code 1 as a success, since the new file system is correct and the new layer is installed successfully. (BZ#1645395)

  * Previously, even if lvmetad was disabled in the configuration, the lvmetad service left a pid file hanging. As a result, entering lvm commands displayed warnings.

  The current release masks the lvmetad service during build so it never starts and lvm commands do not show warnings. (BZ#1652795)

  Changes to the redhat-virtualization-host component:

  * Previously, during an upgrade, dracut running inside chroot did not detect the cpuinfo and the kernel config files because /proc was not mounted and /boot was bindmounted. As a result, the correct microcode was missing from the initramfs.

  The current release bindmounts /proc to the chroot and removes the --hostonly flag. This change inserts both AMD and Intel microcodes into the initramfs and boots the host after an upgrade. (BZ#1652519)

  * The current release applies the OpenSCAP security profile when installing and upgrading RHV-H. This feature helps organizations comply with the Security Content Automation Protocol (SCAP) standards. (BZ#1654253)

  * Do not use a VNC-based connection to deploy Red Hat Virtualization Manager as a self-hosted engine. The VNC protocol does not support password auth in FIPS mode. As a result, the self-hosted engine will fail to deploy.

  Instead, deploy the Manager as a self-hosted engine, use a SPICE-based connection. (BZ#1591693)

  * The current release ships a new version of Red Hat Gluster Storage, RHGS  3.4.4, in Red Hat Virtualization Host (RHVH). (BZ#1679133)

  * Previously, changing log levels required editing libvirt.conf and restarting the libvirtd service. This restart prevented support from collecting data and made reproducing issues more difficult.

  The current release adds the libvirt-admin package to the optional channel for Red Hat Virtualization Host. Installing this package enables you to run the virt-admin command to change libvirt logging levels on the fly. (BZ#1571283)
impacted_packages:
  - purl: pkg:rpm/redhat/ovirt-node-ng?arch=src
    affected_versions: vers:rpm/<4.3.0-0.20181213.0.el7ev
    fixed_versions: vers:rpm/4.3.0-0.20181213.0.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/redhat-release-virtualization-host?arch=src
    affected_versions: vers:rpm/<4.3-0.5.el7
    fixed_versions: vers:rpm/4.3-0.5.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/imgbased?arch=src
    affected_versions: vers:rpm/<1.1.7-0.1.el7ev
    fixed_versions: vers:rpm/1.1.7-0.1.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/redhat-virtualization-host?arch=src
    affected_versions: vers:rpm/<4.3-20190409.0.el7_6
    fixed_versions: vers:rpm/4.3-20190409.0.el7_6
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/python2-ovirt-node-ng-nodectl?arch=noarch
    affected_versions: vers:rpm/<4.3.0-0.20181213.0.el7ev
    fixed_versions: vers:rpm/4.3.0-0.20181213.0.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/ovirt-node-ng-nodectl?arch=noarch
    affected_versions: vers:rpm/<4.3.0-0.20181213.0.el7ev
    fixed_versions: vers:rpm/4.3.0-0.20181213.0.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/redhat-virtualization-host-image-update-placeholder?arch=noarch
    affected_versions: vers:rpm/<4.3-0.5.el7
    fixed_versions: vers:rpm/4.3-0.5.el7
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/imgbased?arch=noarch
    affected_versions: vers:rpm/<1.1.7-0.1.el7ev
    fixed_versions: vers:rpm/1.1.7-0.1.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/python-imgbased?arch=noarch
    affected_versions: vers:rpm/<1.1.7-0.1.el7ev
    fixed_versions: vers:rpm/1.1.7-0.1.el7ev
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/redhat-virtualization-host-image-update?arch=noarch
    affected_versions: vers:rpm/<4.3-20190409.0.el7_6
    fixed_versions: vers:rpm/4.3-20190409.0.el7_6
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/redhat-release-virtualization-host?arch=x86_64
    affected_versions: vers:rpm/<4.3-0.5.el7
    fixed_versions: vers:rpm/4.3-0.5.el7
    fixed_in_commits: []
    introduced_in_commits: []
severities:
  - score: Moderate
    scoring_system: rhas
    scoring_elements:
    published_at: None
    url: https://security.access.redhat.com/data/csaf/v2/advisories/2019/rhba-2019_1053.json
weaknesses: []
references:
  - url: https://security.access.redhat.com/data/csaf/v2/advisories/2019/rhba-2019_1053.json
    reference_type:
    reference_id:
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1436519
    reference_type: bug
    reference_id: 1436519
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1571283
    reference_type: bug
    reference_id: 1571283
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1591693
    reference_type: bug
    reference_id: 1591693
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1630263
    reference_type: bug
    reference_id: 1630263
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1630267
    reference_type: bug
    reference_id: 1630267
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1632741
    reference_type: bug
    reference_id: 1632741
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1633069
    reference_type: bug
    reference_id: 1633069
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1633075
    reference_type: bug
    reference_id: 1633075
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1636028
    reference_type: bug
    reference_id: 1636028
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1638606
    reference_type: bug
    reference_id: 1638606
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1645395
    reference_type: bug
    reference_id: 1645395
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1646147
    reference_type: bug
    reference_id: 1646147
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1652519
    reference_type: bug
    reference_id: 1652519
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1652789
    reference_type: bug
    reference_id: 1652789
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1652795
    reference_type: bug
    reference_id: 1652795
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1652817
    reference_type: bug
    reference_id: 1652817
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1653137
    reference_type: bug
    reference_id: 1653137
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1653669
    reference_type: bug
    reference_id: 1653669
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1654253
    reference_type: bug
    reference_id: 1654253
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1655003
    reference_type: bug
    reference_id: 1655003
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1669377
    reference_type: bug
    reference_id: 1669377
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1673953
    reference_type: bug
    reference_id: 1673953
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1679133
    reference_type: bug
    reference_id: 1679133
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1693710
    reference_type: bug
    reference_id: 1693710
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=1693897
    reference_type: bug
    reference_id: 1693897
  - url: https://access.redhat.com/errata/RHBA-2019:1053
    reference_type:
    reference_id: RHBA-2019:1053
