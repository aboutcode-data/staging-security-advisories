advisory_id: RHSA-2023:2101
datasource_id: redhat_importer_v2/RHSA-2023:2101
datasource_url: https://security.access.redhat.com/data/csaf/v2/advisories/2023/rhsa-2023_2101.json
aliases:
  - CVE-2022-40899
  - CVE-2023-23969
  - CVE-2023-24580
summary: |
  An updated version of Red Hat Update Infrastructure (RHUI) is now available. RHUI 4.4 fixes several security and operational bugs, and introduces multiple new features.

  Red Hat Update Infrastructure (RHUI) offers a highly scalable, highly redundant framework that enables you to manage repositories and content. It also enables cloud providers to deliver content and updates to Red Hat Enterprise Linux (RHEL) instances.

  Security Fix(es):
  * Django: Potential denial-of-service vulnerability due to large Accept-Language header values (CVE-2023-23969)

  * Django: Potential denial-of-service vulnerability when uploading multiple files (CVE-2023-24580)

  * Future: Remote attackers can cause denial-of-service using crafted Set-Cookie header from a malicious web server (CVE-2022-40899)

  This RHUI update fixes the following bugs:

  * Previously, when the `rhui-services-restart` command was run, it restarted only those `pulpcore-worker` services that were already running and ignored services that were not running. With this update, the `rhui-services-restart` command restarts all `pulpcore-worker` services irrespective of their status.

  * Previously, the `rhui-manager status` command returned an incorrect exit status when there was a problem. With this update, the issue has been fixed and the command now returns the correct exit status. (BZ#2174633)

  * Previously, `rhui-installer` ignored the `--rhua-mount-options` parameter and only used the read-write (`rw`) mount option to set up RHUI remote share. With this update, `rhui-installer` uses the `--rhua-mount-options` parameter. However, `rhui-installer` still uses the read-write (`rw`) option by default. (BZ#2174316)

  * Previously, when you ran `rhui-installer`, it rewrote the `/etc/rhui/rhui-tools.conf` file, resetting all container-related settings. With this update, the command saves the container-related settings from the `/etc/rhui/rhui-tools.conf` file and restores them after the file is rewritten.

  This RHUI update introduces the following enhancements:

  * The `rhui-installer` command now supports the `--pulp-workers _COUNT_` argument. RHUI administrators can use this argument to set up a number of Pulp workers. (BZ#2036408)

  * You can now configure CDS nodes to never fetch non-exported content from the RHUA node. To configure the node, rerun the `rhui-installer` command with the `--fetch-missing-symlinks False` argument, and then apply this configuration to all CDS nodes. If you configure your CDS nodes this way, ensure that the content has been exported before RHUI clients start consuming it. (BZ#2084950)

  * Support for containers in RHUI is disabled by default. If you want to use containers, you must manually enable container support by rerunning `rhui-installer` with the `--container-support-enabled True` argument, and then applying this configuration to all CDS nodes.

  * Transport Layer Security (TLS) 1.3 and HTTP Strict Transport Security (HSTS)  is now enabled in RHUI. This update improves overall RHUI security and also removes unsafe ciphers from the `nginx` configuration on CDS nodes. (BZ#1887903)

  * You can now remove packages from custom repositories using the text user interface (TUI) as well as the command line. For more information, see the release notes or the product documentation.(BZ#2165444)

  * You can now set up the Alternate Content Source (ACS) configuration in RHUI to quickly synchronize new repositories and content by substituting remote content with matching content that is available locally or geographically closer to your instance of RHUI. For more information, see the release notes or the product documentation. (BZ#2001087)

  * You can now use a custom prefix, or no prefix at all, when naming your RHUI repositories. You can change the prefix by rerunning the `rhui-installer` command with the `--client-repo-prefix <prefix>` argument. To remove the prefix entirely, use two quotation marks ("") as the `<prefix>` parameter. For more information, see the release notes or the product documentation.
impacted_packages:
  - purl: pkg:rpm/redhat/python-future?arch=src
    affected_versions: vers:rpm/<0.18.3-1.0.1.el8ui
    fixed_versions: vers:rpm/0.18.3-1.0.1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/rhui-installer?arch=src
    affected_versions: vers:rpm/<4.4.0.5-1.el8ui
    fixed_versions: vers:rpm/4.4.0.5-1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/rhui-tools?arch=src
    affected_versions: vers:rpm/<4.4.0.5-1.el8ui
    fixed_versions: vers:rpm/4.4.0.5-1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/python-django?arch=src
    affected_versions: vers:rpm/<3.2.18-1.0.1.el8ui
    fixed_versions: vers:rpm/3.2.18-1.0.1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/python39-future?arch=noarch
    affected_versions: vers:rpm/<0.18.3-1.0.1.el8ui
    fixed_versions: vers:rpm/0.18.3-1.0.1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/rhui-installer?arch=noarch
    affected_versions: vers:rpm/<4.4.0.5-1.el8ui
    fixed_versions: vers:rpm/4.4.0.5-1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/rhui-tools?arch=noarch
    affected_versions: vers:rpm/<4.4.0.5-1.el8ui
    fixed_versions: vers:rpm/4.4.0.5-1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/rhui-tools-libs?arch=noarch
    affected_versions: vers:rpm/<4.4.0.5-1.el8ui
    fixed_versions: vers:rpm/4.4.0.5-1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:rpm/redhat/python39-django?arch=noarch
    affected_versions: vers:rpm/<3.2.18-1.0.1.el8ui
    fixed_versions: vers:rpm/3.2.18-1.0.1.el8ui
    fixed_in_commits: []
    introduced_in_commits: []
severities:
  - score: Moderate
    scoring_system: rhas
    scoring_elements:
    published_at: None
    url: https://security.access.redhat.com/data/csaf/v2/advisories/2023/rhsa-2023_2101.json
weaknesses: []
references:
  - url: https://access.redhat.com/security/updates/classification/#moderate
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-134
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-148
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-199
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-230
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-342
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-354
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-362
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-368
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-370
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-371
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-372
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-376
    reference_type:
    reference_id:
  - url: https://issues.redhat.com/browse/RHUI-377
    reference_type:
    reference_id:
  - url: https://security.access.redhat.com/data/csaf/v2/advisories/2023/rhsa-2023_2101.json
    reference_type:
    reference_id:
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2036408
    reference_type: bug
    reference_id: 2036408
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2084950
    reference_type: bug
    reference_id: 2084950
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2165444
    reference_type: bug
    reference_id: 2165444
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2165866
    reference_type: bug
    reference_id: 2165866
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2166457
    reference_type: bug
    reference_id: 2166457
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2169402
    reference_type: bug
    reference_id: 2169402
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2174316
    reference_type: bug
    reference_id: 2174316
  - url: https://bugzilla.redhat.com/show_bug.cgi?id=2174633
    reference_type: bug
    reference_id: 2174633
  - url: https://access.redhat.com/errata/RHSA-2023:2101
    reference_type:
    reference_id: RHSA-2023:2101
