advisory_id: linux/CVE-2022-50552
datasource_id: debian_importer_v2/linux/CVE-2022-50552
datasource_url: https://security-tracker.debian.org/tracker/CVE-2022-50552
aliases:
  - CVE-2022-50552
summary: 'In the Linux kernel, the following vulnerability has been resolved:  blk-mq: use quiesced
  elevator switch when reinitializing queues  The hctx''s run_work may be racing with the elevator
  switch when reinitializing hardware queues. The queue is merely frozen in this context, but
  that only prevents requests from allocating and doesn''t stop the hctx work from running.
  The work may get an elevator pointer that''s being torn down, and can result in use-after-free
  errors and kernel panics (example below). Use the quiesced elevator switch instead, and make
  the previous one static since it is now only used locally.    nvme nvme0: resetting controller   nvme
  nvme0: 32/0/0 default/read/poll queues   BUG: kernel NULL pointer dereference, address: 0000000000000008   #PF:
  supervisor read access in kernel mode   #PF: error_code(0x0000) - not-present page   PGD 80000020c8861067
  P4D 80000020c8861067 PUD 250f8c8067 PMD 0   Oops: 0000 [#1] SMP PTI   Workqueue: kblockd blk_mq_run_work_fn   RIP:
  0010:kyber_has_work+0x29/0x70  ...    Call Trace:    __blk_mq_do_dispatch_sched+0x83/0x2b0    __blk_mq_sched_dispatch_requests+0x12e/0x170    blk_mq_sched_dispatch_requests+0x30/0x60    __blk_mq_run_hw_queue+0x2b/0x50    process_one_work+0x1ef/0x380    worker_thread+0x2d/0x3e0'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.0.3-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.18.15-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
