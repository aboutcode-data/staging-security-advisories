advisory_id: linux/CVE-2023-52699
datasource_id: debian_importer_v2/linux/CVE-2023-52699
datasource_url: https://security-tracker.debian.org/tracker/CVE-2023-52699
aliases:
  - CVE-2023-52699
summary: 'In the Linux kernel, the following vulnerability has been resolved:  sysv: don''t
  call sb_bread() with pointers_lock held  syzbot is reporting sleep in atomic context in SysV
  filesystem [1], for sb_bread() is called with rw_spinlock held.  A "write_lock(&pointers_lock)
  => read_lock(&pointers_lock) deadlock" bug and a "sb_bread() with write_lock(&pointers_lock)"
  bug were introduced by "Replace BKL for chain locking with sysvfs-private rwlock" in Linux
  2.5.12.  Then, "[PATCH] err1-40: sysvfs locking fix" in Linux 2.6.8 fixed the former bug by
  moving pointers_lock lock to the callers, but instead introduced a "sb_bread() with read_lock(&pointers_lock)"
  bug (which made this problem easier to hit).  Al Viro suggested that why not to do like get_branch()/get_block()/
  find_shared() in Minix filesystem does. And doing like that is almost a revert of "[PATCH]
  err1-40: sysvfs locking fix" except that get_branch()  from with find_shared() is called without
  write_lock(&pointers_lock).'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.90-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.216-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.8.9-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
