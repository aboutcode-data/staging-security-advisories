advisory_id: linux/CVE-2023-53149
datasource_id: debian_importer_v2/linux/CVE-2023-53149
datasource_url: https://security-tracker.debian.org/tracker/CVE-2023-53149
aliases:
  - CVE-2023-53149
summary: 'In the Linux kernel, the following vulnerability has been resolved:  ext4: avoid deadlock
  in fs reclaim with page writeback  Ext4 has a filesystem wide lock protecting ext4_writepages()
  calls to avoid races with switching of journalled data flag or inode format. This lock can
  however cause a deadlock like:  CPU0                            CPU1  ext4_writepages()   percpu_down_read(sbi->s_writepages_rwsem);                                 ext4_change_inode_journal_flag()                                   percpu_down_write(sbi->s_writepages_rwsem);                                     -
  blocks, all readers block from now on   ext4_do_writepages()     ext4_init_io_end()       kmem_cache_zalloc(io_end_cachep,
  GFP_KERNEL)         fs_reclaim frees dentry...           dentry_unlink_inode()             iput()
  - last ref =>               iput_final() - inode dirty =>                 write_inode_now()...                   ext4_writepages()
  tries to acquire sbi->s_writepages_rwsem                     and blocks forever  Make sure
  we cannot recurse into filesystem reclaim from writeback code to avoid the deadlock.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.3.7-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.18.13-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
