advisory_id: linux/CVE-2024-26758
datasource_id: debian_importer_v2/linux/CVE-2024-26758
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-26758
aliases:
  - CVE-2024-26758
summary: 'In the Linux kernel, the following vulnerability has been resolved:  md: Don''t ignore
  suspended array in md_check_recovery()  mddev_suspend() never stop sync_thread, hence it doesn''t
  make sense to ignore suspended array in md_check_recovery(), which might cause sync_thread
  can''t be unregistered.  After commit f52f5c71f3d4 ("md: fix stopping sync thread"), following
  hang can be triggered by test shell/integrity-caching.sh:  1) suspend the array: raid_postsuspend  mddev_suspend  2)
  stop the array: raid_dtr  md_stop   __md_stop_writes    stop_sync_thread     set_bit(MD_RECOVERY_INTR,
  &mddev->recovery);     md_wakeup_thread_directly(mddev->sync_thread);     wait_event(...,
  !test_bit(MD_RECOVERY_RUNNING, &mddev->recovery))  3) sync thread done: md_do_sync  set_bit(MD_RECOVERY_DONE,
  &mddev->recovery);  md_wakeup_thread(mddev->thread);  4) daemon thread can''t unregister sync
  thread: md_check_recovery  if (mddev->suspended)    return; -> return directly  md_read_sync_thread  clear_bit(MD_RECOVERY_RUNNING,
  &mddev->recovery);  -> MD_RECOVERY_RUNNING can''t be cleared, hence step 2 hang;  This problem
  is not just related to dm-raid, fix it by ignoring suspended array in md_check_recovery().
  And follow up patches will improve dm-raid better to frozen sync thread during suspend.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.7.7-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.18.13-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
