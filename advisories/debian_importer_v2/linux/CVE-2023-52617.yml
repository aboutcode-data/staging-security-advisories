advisory_id: linux/CVE-2023-52617
datasource_id: debian_importer_v2/linux/CVE-2023-52617
datasource_url: https://security-tracker.debian.org/tracker/CVE-2023-52617
aliases:
  - CVE-2023-52617
summary: 'In the Linux kernel, the following vulnerability has been resolved:  PCI: switchtec:
  Fix stdev_release() crash after surprise hot remove  A PCI device hot removal may occur while
  stdev->cdev is held open. The call to stdev_release() then happens during close or exit, at
  a point way past switchtec_pci_remove(). Otherwise the last ref would vanish with the trailing
  put_device(), just before return.  At that later point in time, the devm cleanup has already
  removed the stdev->mmio_mrpc mapping. Also, the stdev->pdev reference was not a counted one.
  Therefore, in DMA mode, the iowrite32() in stdev_release() will cause a fatal page fault,
  and the subsequent dma_free_coherent(), if reached, would pass a stale &stdev->pdev->dev pointer.  Fix
  by moving MRPC DMA shutdown into switchtec_pci_remove(), after stdev_kill(). Counting the
  stdev->pdev ref is now optional, but may prevent future accidents.  Reproducible via the script
  at https://lore.kernel.org/r/20231113212150.96410-1-dns@arista.com'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.82-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.216-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.7.7-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
