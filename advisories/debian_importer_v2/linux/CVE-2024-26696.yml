advisory_id: linux/CVE-2024-26696
datasource_id: debian_importer_v2/linux/CVE-2024-26696
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-26696
aliases:
  - CVE-2024-26696
summary: 'In the Linux kernel, the following vulnerability has been resolved:  nilfs2: fix hang
  in nilfs_lookup_dirty_data_buffers()  Syzbot reported a hang issue in migrate_pages_batch()
  called by mbind() and nilfs_lookup_dirty_data_buffers() called in the log writer of nilfs2.  While
  migrate_pages_batch() locks a folio and waits for the writeback to complete, the log writer
  thread that should bring the writeback to completion picks up the folio being written back
  in nilfs_lookup_dirty_data_buffers() that it calls for subsequent log creation and was trying
  to lock the folio.  Thus causing a deadlock.  In the first place, it is unexpected that folios/pages
  in the middle of writeback will be updated and become dirty.  Nilfs2 adds a checksum to verify
  the validity of the log being written and uses it for recovery at mount, so data changes during
  writeback are suppressed.  Since this is broken, an unclean shutdown could potentially cause
  recovery to fail.  Investigation revealed that the root cause is that the wait for writeback
  completion in nilfs_page_mkwrite() is conditional, and if the backing device does not require
  stable writes, data may be modified without waiting.  Fix these issues by making nilfs_page_mkwrite()
  wait for writeback to finish regardless of the stable write requirement of the backing device.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.82-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.216-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.7.7-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
