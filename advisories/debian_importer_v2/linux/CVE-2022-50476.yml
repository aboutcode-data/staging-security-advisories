advisory_id: linux/CVE-2022-50476
datasource_id: debian_importer_v2/linux/CVE-2022-50476
datasource_url: https://security-tracker.debian.org/tracker/CVE-2022-50476
aliases:
  - CVE-2022-50476
summary: 'In the Linux kernel, the following vulnerability has been resolved:  ntb_netdev: Use
  dev_kfree_skb_any() in interrupt context  TX/RX callback handlers (ntb_netdev_tx_handler(),
  ntb_netdev_rx_handler()) can be called in interrupt context via the DMA framework when the
  respective DMA operations have completed. As such, any calls by these routines to free skb''s,
  should use the interrupt context safe dev_kfree_skb_any() function.  Previously, these callback
  handlers would call the interrupt unsafe version of dev_kfree_skb(). This has not presented
  an issue on Intel IOAT DMA engines as that driver utilizes tasklets rather than a hard interrupt
  handler, like the AMD PTDMA DMA driver. On AMD systems, a kernel WARNING message is encountered,
  which is being issued from skb_release_head_state() due to in_hardirq() being true.  Besides
  the user visible WARNING from the kernel, the other symptom of this bug was that TCP/IP performance
  across the ntb_netdev interface was very poor, i.e. approximately an order of magnitude below
  what was expected. With the repair to use dev_kfree_skb_any(), kernel WARNINGs from skb_release_head_state()
  ceased and TCP/IP performance, as measured by iperf, was on par with expected results, approximately
  20 Gb/s on AMD Milan based server. Note that this performance is comparable with Intel based
  servers.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.4-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.178-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
