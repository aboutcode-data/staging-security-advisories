advisory_id: linux/CVE-2021-47622
datasource_id: debian_importer_v2/linux/CVE-2021-47622
datasource_url: https://security-tracker.debian.org/tracker/CVE-2021-47622
aliases:
  - CVE-2021-47622
summary: 'In the Linux kernel, the following vulnerability has been resolved:  scsi: ufs: Fix
  a deadlock in the error handler  The following deadlock has been observed on a test setup:   -
  All tags allocated   - The SCSI error handler calls ufshcd_eh_host_reset_handler()   - ufshcd_eh_host_reset_handler()
  queues work that calls    ufshcd_err_handler()   - ufshcd_err_handler() locks up as follows:  Workqueue:
  ufs_eh_wq_0 ufshcd_err_handler.cfi_jt Call trace:  __switch_to+0x298/0x5d8  __schedule+0x6cc/0xa94  schedule+0x12c/0x298  blk_mq_get_tag+0x210/0x480  __blk_mq_alloc_request+0x1c8/0x284  blk_get_request+0x74/0x134  ufshcd_exec_dev_cmd+0x68/0x640  ufshcd_verify_dev_init+0x68/0x35c  ufshcd_probe_hba+0x12c/0x1cb8  ufshcd_host_reset_and_restore+0x88/0x254  ufshcd_reset_and_restore+0xd0/0x354  ufshcd_err_handler+0x408/0xc58  process_one_work+0x24c/0x66c  worker_thread+0x3e8/0xa4c  kthread+0x150/0x1b4  ret_from_fork+0x10/0x30  Fix
  this lockup by making ufshcd_exec_dev_cmd() allocate a reserved request.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/5.16.11-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.18.15-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
