advisory_id: linux/CVE-2024-38600
datasource_id: debian_importer_v2/linux/CVE-2024-38600
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-38600
aliases:
  - CVE-2024-38600
summary: 'In the Linux kernel, the following vulnerability has been resolved:  ALSA: Fix deadlocks
  with kctl removals at disconnection  In snd_card_disconnect(), we set card->shutdown flag
  at the beginning, call callbacks and do sync for card->power_ref_sleep waiters at the end.  The
  callback may delete a kctl element, and this can lead to a deadlock when the device was in
  the suspended state.  Namely:  * A process waits for the power up at snd_power_ref_and_wait()
  in   snd_ctl_info() or read/write() inside card->controls_rwsem.  * The system gets disconnected
  meanwhile, and the driver tries to   delete a kctl via snd_ctl_remove*(); it tries to take   card->controls_rwsem
  again, but this is already locked by the   above.  Since the sleeper isn''t woken up, this
  deadlocks.  An easy fix is to wake up sleepers before processing the driver disconnect callbacks
  but right after setting the card->shutdown flag. Then all sleepers will abort immediately,
  and the code flows again.  So, basically this patch moves the wait_event() call at the right
  timing.  While we''re at it, just to be sure, call wait_event_all() instead of wait_event(),
  although we don''t use exclusive events on this queue for now.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.94-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/0
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.8.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
