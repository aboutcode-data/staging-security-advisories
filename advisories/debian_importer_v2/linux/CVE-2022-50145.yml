advisory_id: linux/CVE-2022-50145
datasource_id: debian_importer_v2/linux/CVE-2022-50145
datasource_url: https://security-tracker.debian.org/tracker/CVE-2022-50145
aliases:
  - CVE-2022-50145
summary: 'In the Linux kernel, the following vulnerability has been resolved:  dmaengine: sf-pdma:
  Add multithread support for a DMA channel  When we get a DMA channel and try to use it in
  multiple threads it will cause oops and hanging the system.  % echo 64 > /sys/module/dmatest/parameters/threads_per_chan
  % echo 10000 > /sys/module/dmatest/parameters/iterations % echo 1 > /sys/module/dmatest/parameters/run
  [   89.480664] Unable to handle kernel NULL pointer dereference at virtual                address
  00000000000000a0 [   89.488725] Oops [#1] [   89.494708] CPU: 2 PID: 1008 Comm: dma0chan0-copy0
  Not tainted                5.17.0-rc5 [   89.509385] epc : vchan_find_desc+0x32/0x46 [   89.513553]  ra
  : sf_pdma_tx_status+0xca/0xd6  This happens because of data race. Each thread rewrite channels''s
  descriptor as soon as device_prep_dma_memcpy() is called. It leads to the situation when the
  driver thinks that it uses right descriptor that actually is freed or substituted for other
  one.  With current fixes a descriptor changes its value only when it has been used. A new
  descriptor is acquired from vc->desc_issued queue that is already filled with descriptors
  that are ready to be sent. Threads have no direct access to DMA channel descriptor. Now it
  is just possible to queue a descriptor for further processing.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.0.2-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.140-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
