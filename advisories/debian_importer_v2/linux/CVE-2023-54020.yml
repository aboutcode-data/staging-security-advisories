advisory_id: linux/CVE-2023-54020
datasource_id: debian_importer_v2/linux/CVE-2023-54020
datasource_url: https://security-tracker.debian.org/tracker/CVE-2023-54020
aliases:
  - CVE-2023-54020
summary: 'In the Linux kernel, the following vulnerability has been resolved:  dmaengine: sf-pdma:
  pdma_desc memory leak fix  Commit b2cc5c465c2c ("dmaengine: sf-pdma: Add multithread support
  for a DMA channel") changed sf_pdma_prep_dma_memcpy() to unconditionally allocate a new sf_pdma_desc
  each time it is called.  The driver previously recycled descs, by checking the in_use flag,
  only allocating additional descs if the existing one was in use. This logic was removed in
  commit b2cc5c465c2c ("dmaengine: sf-pdma: Add multithread support for a DMA channel"), but
  sf_pdma_free_desc() was not changed to handle the new behaviour.  As a result, each time sf_pdma_prep_dma_memcpy()
  is called, the previous descriptor is leaked, over time leading to memory starvation:    unreferenced
  object 0xffffffe008447300 (size 192):   comm "irq/39-mchp_dsc", pid 343, jiffies 4294906910
  (age 981.200s)   hex dump (first 32 bytes):     00 00 00 ff 00 00 00 00 b8 c1 00 00 00 00
  00 00  ................     00 00 70 08 10 00 00 00 00 00 00 c0 00 00 00 00  ..p.............   backtrace:     [<00000000064a04f4>]
  kmemleak_alloc+0x1e/0x28     [<00000000018927a7>] kmem_cache_alloc+0x11e/0x178     [<000000002aea8d16>]
  sf_pdma_prep_dma_memcpy+0x40/0x112  Add the missing kfree() to sf_pdma_free_desc(), and remove
  the redundant in_use flag.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.1.20-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
