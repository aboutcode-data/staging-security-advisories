advisory_id: linux/CVE-2024-40969
datasource_id: debian_importer_v2/linux/CVE-2024-40969
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-40969
aliases:
  - CVE-2024-40969
summary: 'In the Linux kernel, the following vulnerability has been resolved:  f2fs: don''t
  set RO when shutting down f2fs  Shutdown does not check the error of thaw_super due to readonly,
  which causes a deadlock like below.  f2fs_ioc_shutdown(F2FS_GOING_DOWN_FULLSYNC)        issue_discard_thread  -
  bdev_freeze   - freeze_super  - f2fs_stop_checkpoint()   - f2fs_handle_critical_error                     -
  sb_start_write     - set RO                                         - waiting  - bdev_thaw   -
  thaw_super_locked     - return -EINVAL, if sb_rdonly()  - f2fs_stop_discard_thread   -> wait
  for kthread_stop(discard_thread);'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.9.7-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions: vers:deb/5.10.223-1|6.1.159-1
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
