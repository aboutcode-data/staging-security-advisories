advisory_id: linux/CVE-2024-42231
datasource_id: debian_importer_v2/linux/CVE-2024-42231
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-42231
aliases:
  - CVE-2024-42231
summary: 'In the Linux kernel, the following vulnerability has been resolved:  btrfs: zoned:
  fix calc_available_free_space() for zoned mode  calc_available_free_space() returns the total
  size of metadata (or system) block groups, which can be allocated from unallocated disk space.
  The logic is wrong on zoned mode in two places.  First, the calculation of data_chunk_size
  is wrong. We always allocate one zone as one chunk, and no partial allocation of a zone. So,
  we should use zone_size (= data_sinfo->chunk_size) as it is.  Second, the result "avail" may
  not be zone aligned. Since we always allocate one zone as one chunk on zoned mode, returning
  non-zone size aligned bytes will result in less pressure on the async metadata reclaim process.  This
  is serious for the nearly full state with a large zone size device. Allowing over-commit too
  much will result in less async reclaim work and end up in ENOSPC. We can align down to the
  zone size to avoid that.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/0
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.9.9-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
