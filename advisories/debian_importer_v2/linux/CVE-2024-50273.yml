advisory_id: linux/CVE-2024-50273
datasource_id: debian_importer_v2/linux/CVE-2024-50273
datasource_url: https://security-tracker.debian.org/tracker/CVE-2024-50273
aliases:
  - CVE-2024-50273
summary: 'In the Linux kernel, the following vulnerability has been resolved:  btrfs: reinitialize
  delayed ref list after deleting it from the list  At insert_delayed_ref() if we need to update
  the action of an existing ref to BTRFS_DROP_DELAYED_REF, we delete the ref from its ref head''s
  ref_add_list using list_del(), which leaves the ref''s add_list member not reinitialized,
  as list_del() sets the next and prev members of the list to LIST_POISON1 and LIST_POISON2,
  respectively.  If later we end up calling drop_delayed_ref() against the ref, which can happen
  during merging or when destroying delayed refs due to a transaction abort, we can trigger
  a crash since at drop_delayed_ref() we call list_empty() against the ref''s add_list, which
  returns false since the list was not reinitialized after the list_del() and as a consequence
  we call list_del() again at drop_delayed_ref(). This results in an invalid list access since
  the next and prev members are set to poison pointers, resulting in a splat if CONFIG_LIST_HARDENED
  and CONFIG_DEBUG_LIST are set or invalid poison pointer dereferences otherwise.  So fix this
  by deleting from the list with list_del_init() instead.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.119-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.234-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.11.9-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.13-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
