advisory_id: linux/CVE-2023-52765
datasource_id: debian_importer_v2/linux/CVE-2023-52765
datasource_url: https://security-tracker.debian.org/tracker/CVE-2023-52765
aliases:
  - CVE-2023-52765
summary: 'In the Linux kernel, the following vulnerability has been resolved:  mfd: qcom-spmi-pmic:
  Fix revid implementation  The Qualcomm SPMI PMIC revid implementation is broken in multiple
  ways.  First, it assumes that just because the sibling base device has been registered that
  means that it is also bound to a driver, which may not be the case (e.g. due to probe deferral
  or asynchronous probe). This could trigger a NULL-pointer dereference when attempting to access
  the driver data of the unbound device.  Second, it accesses driver data of a sibling device
  directly and without any locking, which means that the driver data may be freed while it is
  being accessed (e.g. on driver unbind).  Third, it leaks a struct device reference to the
  sibling device which is looked up using the spmi_device_from_of() every time a function (child)
  device is calling the revid function (e.g. on probe).  Fix this mess by reimplementing the
  revid lookup so that it is done only at probe of the PMIC device; the base device fetches
  the revid info from the hardware, while any secondary SPMI device fetches the information
  from the base device and caches it so that it can be accessed safely from its children. If
  the base device has not been probed yet then probe of a secondary device is deferred.'
impacted_packages:
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.159-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.1.64-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/5.10.223-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/0
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.12-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.6.8-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.18.13-1
    fixed_in_commits: []
    introduced_in_commits: []
  - purl: pkg:deb/debian/linux?distro=trixie
    affected_versions:
    fixed_versions: vers:deb/6.12.63-1
    fixed_in_commits: []
    introduced_in_commits: []
severities: []
weaknesses: []
references: []
