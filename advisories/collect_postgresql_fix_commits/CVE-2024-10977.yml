advisory_id: CVE-2024-10977
datasource_id: collect_postgresql_fix_commits/CVE-2024-10977
datasource_url: https://github.com/postgres/postgres
aliases: []
summary: |
  aee114bf1c84368db9e50ba4e7340ce632f89e19:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  b3db5fdb05b6ca499f75d0ecf290dbd057bfb075:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  575d673fe78f76e396ea7eb8160c30d96ccfea0f:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  b83b358b1bac61ca46af995a3da83cc515a434c6:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  03dc78ff644ca0c090cb4cdbf8fba64230e54238:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  052aa02971f2dd476c14689033727a0b8563d5d2:Last-minute updates for release notes.

  Security: CVE-2024-10976, CVE-2024-10977, CVE-2024-10978, CVE-2024-10979
  2a951ef0aace58026c31b9a88aeeda19c9af4205:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  7b49707b72612ef068ce9275b9b6da104f1960f3:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  e6c9454764d880ee30735aa8c1e05d3674722ff9:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  d2c3e31c13a6820980c2c6019f0b8f9f0b63ae6e:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  67d28bd02ec06f5056754bc295f57d2dd2bbd749:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  a5cc4c66719be2ae1eebe92ad97727dc905bbc6d:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
  bf8835ea9717df50230c12133cff1b486dcc57be:libpq: Bail out during SSL/GSS negotiation errors

  This commit changes libpq so that errors reported by the backend during
  the protocol negotiation for SSL and GSS are discarded by the client, as
  these may include bytes that could be consumed by the client and write
  arbitrary bytes to a client's terminal.

  A failure with the SSL negotiation now leads to an error immediately
  reported, without a retry on any other methods allowed, like a fallback
  to a plaintext connection.

  A failure with GSS discards the error message received, and we allow a
  fallback as it may be possible that the error is caused by a connection
  attempt with a pre-11 server, GSS encryption having been introduced in
  v12.  This was a problem only with v17 and newer versions; older
  versions discard the error message already in this case, assuming a
  failure caused by a lack of support for GSS encryption.

  Author: Jacob Champion
  Reviewed-by: Peter Eisentraut, Heikki Linnakangas, Michael Paquier
  Security: CVE-2024-10977
  Backpatch-through: 12
impacted_packages:
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: b3db5fdb05b6ca499f75d0ecf290dbd057bfb075
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: a5cc4c66719be2ae1eebe92ad97727dc905bbc6d
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: aee114bf1c84368db9e50ba4e7340ce632f89e19
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 67d28bd02ec06f5056754bc295f57d2dd2bbd749
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 052aa02971f2dd476c14689033727a0b8563d5d2
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: e6c9454764d880ee30735aa8c1e05d3674722ff9
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: b83b358b1bac61ca46af995a3da83cc515a434c6
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 03dc78ff644ca0c090cb4cdbf8fba64230e54238
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 2a951ef0aace58026c31b9a88aeeda19c9af4205
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: d2c3e31c13a6820980c2c6019f0b8f9f0b63ae6e
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: bf8835ea9717df50230c12133cff1b486dcc57be
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 575d673fe78f76e396ea7eb8160c30d96ccfea0f
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 7b49707b72612ef068ce9275b9b6da104f1960f3
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/postgres/postgres/tree/03dc78ff644ca0c090cb4cdbf8fba64230e54238
    reference_type: commit
    reference_id: 03dc78ff644ca0c090cb4cdbf8fba64230e54238
  - url: https://github.com/postgres/postgres/tree/052aa02971f2dd476c14689033727a0b8563d5d2
    reference_type: commit
    reference_id: 052aa02971f2dd476c14689033727a0b8563d5d2
  - url: https://github.com/postgres/postgres/tree/2a951ef0aace58026c31b9a88aeeda19c9af4205
    reference_type: commit
    reference_id: 2a951ef0aace58026c31b9a88aeeda19c9af4205
  - url: https://github.com/postgres/postgres/tree/575d673fe78f76e396ea7eb8160c30d96ccfea0f
    reference_type: commit
    reference_id: 575d673fe78f76e396ea7eb8160c30d96ccfea0f
  - url: https://github.com/postgres/postgres/tree/67d28bd02ec06f5056754bc295f57d2dd2bbd749
    reference_type: commit
    reference_id: 67d28bd02ec06f5056754bc295f57d2dd2bbd749
  - url: https://github.com/postgres/postgres/tree/7b49707b72612ef068ce9275b9b6da104f1960f3
    reference_type: commit
    reference_id: 7b49707b72612ef068ce9275b9b6da104f1960f3
  - url: https://github.com/postgres/postgres/tree/a5cc4c66719be2ae1eebe92ad97727dc905bbc6d
    reference_type: commit
    reference_id: a5cc4c66719be2ae1eebe92ad97727dc905bbc6d
  - url: https://github.com/postgres/postgres/tree/aee114bf1c84368db9e50ba4e7340ce632f89e19
    reference_type: commit
    reference_id: aee114bf1c84368db9e50ba4e7340ce632f89e19
  - url: https://github.com/postgres/postgres/tree/b3db5fdb05b6ca499f75d0ecf290dbd057bfb075
    reference_type: commit
    reference_id: b3db5fdb05b6ca499f75d0ecf290dbd057bfb075
  - url: https://github.com/postgres/postgres/tree/b83b358b1bac61ca46af995a3da83cc515a434c6
    reference_type: commit
    reference_id: b83b358b1bac61ca46af995a3da83cc515a434c6
  - url: https://github.com/postgres/postgres/tree/bf8835ea9717df50230c12133cff1b486dcc57be
    reference_type: commit
    reference_id: bf8835ea9717df50230c12133cff1b486dcc57be
  - url: https://github.com/postgres/postgres/tree/d2c3e31c13a6820980c2c6019f0b8f9f0b63ae6e
    reference_type: commit
    reference_id: d2c3e31c13a6820980c2c6019f0b8f9f0b63ae6e
  - url: https://github.com/postgres/postgres/tree/e6c9454764d880ee30735aa8c1e05d3674722ff9
    reference_type: commit
    reference_id: e6c9454764d880ee30735aa8c1e05d3674722ff9
