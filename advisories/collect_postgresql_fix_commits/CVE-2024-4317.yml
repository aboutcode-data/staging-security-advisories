advisory_id: CVE-2024-4317
datasource_id: collect_postgresql_fix_commits/CVE-2024-4317
datasource_url: https://github.com/postgres/postgres
aliases: []
summary: |
  b7712704f0bb3dc82f286516a7057b0fa5b1d260:Last-minute updates for release notes.

  Security: CVE-2024-4317
  7b2ac0f6039f0f64d80c7488f0f718094cfb89a2:Last-minute updates for release notes.

  Security: CVE-2024-4317
  a62be834aeb899dfc2e10e3cde6d0f48ba128373:Last-minute updates for release notes.

  Security: CVE-2024-4317
  c3425383ba67ae6ecaddc8896025a91faadb430a:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  c3425383ba67ae6ecaddc8896025a91faadb430a:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  9cc2b62894de6a8b3d78d20bcd1a6647a7553a6c:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  9cc2b62894de6a8b3d78d20bcd1a6647a7553a6c:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  2485a85e96db137f7962a2e702b99869957f0990:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  2485a85e96db137f7962a2e702b99869957f0990:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  521a7156ab47623e299855dd04a2a4ea3ad71afe:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
  521a7156ab47623e299855dd04a2a4ea3ad71afe:Fix privilege checks in pg_stats_ext and pg_stats_ext_exprs.

  The catalog view pg_stats_ext fails to consider privileges for
  expression statistics.  The catalog view pg_stats_ext_exprs fails
  to consider privileges and row-level security policies.  To fix,
  restrict the data in these views to table owners or roles that
  inherit privileges of the table owner.  It may be possible to apply
  less restrictive privilege checks in some cases, but that is left
  as a future exercise.  Furthermore, for pg_stats_ext_exprs, do not
  return data for tables with row-level security enabled, as is
  already done for pg_stats_ext.

  On the back-branches, a fix-CVE-2024-4317.sql script is provided
  that will install into the "share" directory.  This file can be
  used to apply the fix to existing clusters.

  Bumps catversion on 'master' branch only.

  Reported-by: Lukas Fittl
  Reviewed-by: Noah Misch, Tomas Vondra, Tom Lane
  Security: CVE-2024-4317
  Backpatch-through: 14
impacted_packages:
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: a62be834aeb899dfc2e10e3cde6d0f48ba128373
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 521a7156ab47623e299855dd04a2a4ea3ad71afe
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 2485a85e96db137f7962a2e702b99869957f0990
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: c3425383ba67ae6ecaddc8896025a91faadb430a
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: b7712704f0bb3dc82f286516a7057b0fa5b1d260
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 7b2ac0f6039f0f64d80c7488f0f718094cfb89a2
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 9cc2b62894de6a8b3d78d20bcd1a6647a7553a6c
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/postgres/postgres/tree/2485a85e96db137f7962a2e702b99869957f0990
    reference_type: commit
    reference_id: 2485a85e96db137f7962a2e702b99869957f0990
  - url: https://github.com/postgres/postgres/tree/521a7156ab47623e299855dd04a2a4ea3ad71afe
    reference_type: commit
    reference_id: 521a7156ab47623e299855dd04a2a4ea3ad71afe
  - url: https://github.com/postgres/postgres/tree/7b2ac0f6039f0f64d80c7488f0f718094cfb89a2
    reference_type: commit
    reference_id: 7b2ac0f6039f0f64d80c7488f0f718094cfb89a2
  - url: https://github.com/postgres/postgres/tree/9cc2b62894de6a8b3d78d20bcd1a6647a7553a6c
    reference_type: commit
    reference_id: 9cc2b62894de6a8b3d78d20bcd1a6647a7553a6c
  - url: https://github.com/postgres/postgres/tree/a62be834aeb899dfc2e10e3cde6d0f48ba128373
    reference_type: commit
    reference_id: a62be834aeb899dfc2e10e3cde6d0f48ba128373
  - url: https://github.com/postgres/postgres/tree/b7712704f0bb3dc82f286516a7057b0fa5b1d260
    reference_type: commit
    reference_id: b7712704f0bb3dc82f286516a7057b0fa5b1d260
  - url: https://github.com/postgres/postgres/tree/c3425383ba67ae6ecaddc8896025a91faadb430a
    reference_type: commit
    reference_id: c3425383ba67ae6ecaddc8896025a91faadb430a
