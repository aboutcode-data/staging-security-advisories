advisory_id: CVE-2018-1053
datasource_id: collect_postgresql_fix_commits/CVE-2018-1053
datasource_url: https://github.com/postgres/postgres
aliases: []
summary: |
  01b2db1cd6673a94cc5249aa25b34e7d98535c11:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  9a12ac37be9683da09c3dc33d0ee43728ca49517:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  2a08ab38d33021d92d8ee31d9e386da63c39424d:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  0ba3e3ec8166907df835895279bb9b832f6ae348:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  cbe0dd581e7c7a815f6df6d849449225c902b17c:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  1eb5d43beed9d8cdc61377867f0a53eb2cfba0c4:Last-minute updates for release notes.

  Security: CVE-2018-1052, CVE-2018-1053
  a926eb84e07a604da6d059eca1fd87f919bb5d7a:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
  9c59e48a22aa150c4d63017955328d87bea1cd29:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
  c3456208d1d4b281417c1e43fd24d211bf35ec95:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
  17aa0236811eb080dde7fb16ca70cb1283ad016a:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
  1341e017dffee00fb245081ec5a11d3b93d9aafb:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
  6ba52aeb24e62586b51e77723d87627c18a844ca:Ensure that all temp files made during pg_upgrade are non-world-readable.

  pg_upgrade has always attempted to ensure that the transient dump files
  it creates are inaccessible except to the owner.  However, refactoring
  in commit 76a7650c4 broke that for the file containing "pg_dumpall -g"
  output; since then, that file was protected according to the process's
  default umask.  Since that file may contain role passwords (hopefully
  encrypted, but passwords nonetheless), this is a particularly unfortunate
  oversight.  Prudent users of pg_upgrade on multiuser systems would
  probably run it under a umask tight enough that the issue is moot, but
  perhaps some users are depending only on pg_upgrade's umask changes to
  protect their data.

  To fix this in a future-proof way, let's just tighten the umask at
  process start.  There are no files pg_upgrade needs to write at a
  weaker security level; and if there were, transiently relaxing the
  umask around where they're created would be a safer approach.

  Report and patch by Tom Lane; the idea for the fix is due to Noah Misch.
  Back-patch to all supported branches.

  Security: CVE-2018-1053
impacted_packages:
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 0ba3e3ec8166907df835895279bb9b832f6ae348
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 9c59e48a22aa150c4d63017955328d87bea1cd29
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: c3456208d1d4b281417c1e43fd24d211bf35ec95
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: a926eb84e07a604da6d059eca1fd87f919bb5d7a
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 6ba52aeb24e62586b51e77723d87627c18a844ca
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 1eb5d43beed9d8cdc61377867f0a53eb2cfba0c4
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 17aa0236811eb080dde7fb16ca70cb1283ad016a
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 1341e017dffee00fb245081ec5a11d3b93d9aafb
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 01b2db1cd6673a94cc5249aa25b34e7d98535c11
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: cbe0dd581e7c7a815f6df6d849449225c902b17c
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 9a12ac37be9683da09c3dc33d0ee43728ca49517
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 2a08ab38d33021d92d8ee31d9e386da63c39424d
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/postgres/postgres/tree/01b2db1cd6673a94cc5249aa25b34e7d98535c11
    reference_type: commit
    reference_id: 01b2db1cd6673a94cc5249aa25b34e7d98535c11
  - url: https://github.com/postgres/postgres/tree/0ba3e3ec8166907df835895279bb9b832f6ae348
    reference_type: commit
    reference_id: 0ba3e3ec8166907df835895279bb9b832f6ae348
  - url: https://github.com/postgres/postgres/tree/1341e017dffee00fb245081ec5a11d3b93d9aafb
    reference_type: commit
    reference_id: 1341e017dffee00fb245081ec5a11d3b93d9aafb
  - url: https://github.com/postgres/postgres/tree/17aa0236811eb080dde7fb16ca70cb1283ad016a
    reference_type: commit
    reference_id: 17aa0236811eb080dde7fb16ca70cb1283ad016a
  - url: https://github.com/postgres/postgres/tree/1eb5d43beed9d8cdc61377867f0a53eb2cfba0c4
    reference_type: commit
    reference_id: 1eb5d43beed9d8cdc61377867f0a53eb2cfba0c4
  - url: https://github.com/postgres/postgres/tree/2a08ab38d33021d92d8ee31d9e386da63c39424d
    reference_type: commit
    reference_id: 2a08ab38d33021d92d8ee31d9e386da63c39424d
  - url: https://github.com/postgres/postgres/tree/6ba52aeb24e62586b51e77723d87627c18a844ca
    reference_type: commit
    reference_id: 6ba52aeb24e62586b51e77723d87627c18a844ca
  - url: https://github.com/postgres/postgres/tree/9a12ac37be9683da09c3dc33d0ee43728ca49517
    reference_type: commit
    reference_id: 9a12ac37be9683da09c3dc33d0ee43728ca49517
  - url: https://github.com/postgres/postgres/tree/9c59e48a22aa150c4d63017955328d87bea1cd29
    reference_type: commit
    reference_id: 9c59e48a22aa150c4d63017955328d87bea1cd29
  - url: https://github.com/postgres/postgres/tree/a926eb84e07a604da6d059eca1fd87f919bb5d7a
    reference_type: commit
    reference_id: a926eb84e07a604da6d059eca1fd87f919bb5d7a
  - url: https://github.com/postgres/postgres/tree/c3456208d1d4b281417c1e43fd24d211bf35ec95
    reference_type: commit
    reference_id: c3456208d1d4b281417c1e43fd24d211bf35ec95
  - url: https://github.com/postgres/postgres/tree/cbe0dd581e7c7a815f6df6d849449225c902b17c
    reference_type: commit
    reference_id: cbe0dd581e7c7a815f6df6d849449225c902b17c
