advisory_id: CVE-2017-15098
datasource_id: collect_postgresql_fix_commits/CVE-2017-15098
datasource_url: https://github.com/postgres/postgres
aliases: []
summary: |
  92d830f4bff643953a09563abaa106af42625207:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  203b965f275061894621a5a359213ac77558d33f:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  e7bae63e02dee20fdcbad2664d4722c80febf8a1:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  7b4c179b70a59ad2dbd5c928ce8fc84629da0237:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  d69c0710a68068c7a415aaefd2c7d51f3197fe38:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  50abeafc74a812d2449ec49dc16e99baf8c5023a:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  c0c8807ded2f59c25b375998ef24ff09994563a1:Make json{b}_populate_recordset() use the right tuple descriptor.

  json{b}_populate_recordset() used the tuple descriptor created from the
  query-level AS clause without worrying about whether it matched the actual
  input record type.  If it didn't, that would usually result in a crash,
  though disclosure of server memory contents seems possible as well, for a
  skilled attacker capable of issuing crafted SQL commands.  Instead, use
  the query-supplied descriptor only when there is no input tuple to look at,
  and otherwise get a tuple descriptor based on the input tuple's own type
  marking.  The core code will detect any type mismatch in the latter case.

  Michael Paquier and Tom Lane, per a report from David Rowley.
  Back-patch to 9.3 where this functionality was introduced.

  Security: CVE-2017-15098
  70846ee0597b4aabc11ffe252eb972de6f77a021:Make json{b}_populate_recordset() use the right tuple descriptor.

  json{b}_populate_recordset() used the tuple descriptor created from the
  query-level AS clause without worrying about whether it matched the actual
  input record type.  If it didn't, that would usually result in a crash,
  though disclosure of server memory contents seems possible as well, for a
  skilled attacker capable of issuing crafted SQL commands.  Instead, use
  the query-supplied descriptor only when there is no input tuple to look at,
  and otherwise get a tuple descriptor based on the input tuple's own type
  marking.  The core code will detect any type mismatch in the latter case.

  Michael Paquier and Tom Lane, per a report from David Rowley.
  Back-patch to 9.3 where this functionality was introduced.

  Security: CVE-2017-15098
  d5fe5fb232a4e57c66779b8b6acdcb458e9b8b9c:Make json{b}_populate_recordset() use the right tuple descriptor.

  json{b}_populate_recordset() used the tuple descriptor created from the
  query-level AS clause without worrying about whether it matched the actual
  input record type.  If it didn't, that would usually result in a crash,
  though disclosure of server memory contents seems possible as well, for a
  skilled attacker capable of issuing crafted SQL commands.  Instead, use
  the query-supplied descriptor only when there is no input tuple to look at,
  and otherwise get a tuple descriptor based on the input tuple's own type
  marking.  The core code will detect any type mismatch in the latter case.

  Michael Paquier and Tom Lane, per a report from David Rowley.
  Back-patch to 9.3 where this functionality was introduced.

  Security: CVE-2017-15098
  38e825632be777a6ea4a39796e121c39728403b3:Make json{b}_populate_recordset() use the right tuple descriptor.

  json{b}_populate_recordset() used the tuple descriptor created from the
  query-level AS clause without worrying about whether it matched the actual
  input record type.  If it didn't, that would usually result in a crash,
  though disclosure of server memory contents seems possible as well, for a
  skilled attacker capable of issuing crafted SQL commands.  Instead, use
  the query-supplied descriptor only when there is no input tuple to look at,
  and otherwise get a tuple descriptor based on the input tuple's own type
  marking.  The core code will detect any type mismatch in the latter case.

  Michael Paquier and Tom Lane, per a report from David Rowley.
  Back-patch to 9.3 where this functionality was introduced.

  Security: CVE-2017-15098
  c30f082d2767c22cefb8875dcb1932e5ed338db6:Make json{b}_populate_recordset() use the right tuple descriptor.

  json{b}_populate_recordset() used the tuple descriptor created from the
  query-level AS clause without worrying about whether it matched the actual
  input record type.  If it didn't, that would usually result in a crash,
  though disclosure of server memory contents seems possible as well, for a
  skilled attacker capable of issuing crafted SQL commands.  Instead, use
  the query-supplied descriptor only when there is no input tuple to look at,
  and otherwise get a tuple descriptor based on the input tuple's own type
  marking.  The core code will detect any type mismatch in the latter case.

  Michael Paquier and Tom Lane, per a report from David Rowley.
  Back-patch to 9.3 where this functionality was introduced.

  Security: CVE-2017-15098
  b574228715f0fd77ed1f4f084603cff9e757e992:Add tests for json{b}_populate_recordset() crash case.

  The problem reported as CVE-2017-15098 was already resolved in HEAD by
  commit 37a795a60, but let's add the relevant test cases anyway.

  Michael Paquier and Tom Lane, per a report from David Rowley.

  Security: CVE-2017-15098
  b574228715f0fd77ed1f4f084603cff9e757e992:Add tests for json{b}_populate_recordset() crash case.

  The problem reported as CVE-2017-15098 was already resolved in HEAD by
  commit 37a795a60, but let's add the relevant test cases anyway.

  Michael Paquier and Tom Lane, per a report from David Rowley.

  Security: CVE-2017-15098
impacted_packages:
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 7b4c179b70a59ad2dbd5c928ce8fc84629da0237
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: d69c0710a68068c7a415aaefd2c7d51f3197fe38
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: d5fe5fb232a4e57c66779b8b6acdcb458e9b8b9c
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: c0c8807ded2f59c25b375998ef24ff09994563a1
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 70846ee0597b4aabc11ffe252eb972de6f77a021
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: e7bae63e02dee20fdcbad2664d4722c80febf8a1
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: c30f082d2767c22cefb8875dcb1932e5ed338db6
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 38e825632be777a6ea4a39796e121c39728403b3
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 203b965f275061894621a5a359213ac77558d33f
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: b574228715f0fd77ed1f4f084603cff9e757e992
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 92d830f4bff643953a09563abaa106af42625207
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 50abeafc74a812d2449ec49dc16e99baf8c5023a
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/postgres/postgres/tree/203b965f275061894621a5a359213ac77558d33f
    reference_type: commit
    reference_id: 203b965f275061894621a5a359213ac77558d33f
  - url: https://github.com/postgres/postgres/tree/38e825632be777a6ea4a39796e121c39728403b3
    reference_type: commit
    reference_id: 38e825632be777a6ea4a39796e121c39728403b3
  - url: https://github.com/postgres/postgres/tree/50abeafc74a812d2449ec49dc16e99baf8c5023a
    reference_type: commit
    reference_id: 50abeafc74a812d2449ec49dc16e99baf8c5023a
  - url: https://github.com/postgres/postgres/tree/70846ee0597b4aabc11ffe252eb972de6f77a021
    reference_type: commit
    reference_id: 70846ee0597b4aabc11ffe252eb972de6f77a021
  - url: https://github.com/postgres/postgres/tree/7b4c179b70a59ad2dbd5c928ce8fc84629da0237
    reference_type: commit
    reference_id: 7b4c179b70a59ad2dbd5c928ce8fc84629da0237
  - url: https://github.com/postgres/postgres/tree/92d830f4bff643953a09563abaa106af42625207
    reference_type: commit
    reference_id: 92d830f4bff643953a09563abaa106af42625207
  - url: https://github.com/postgres/postgres/tree/b574228715f0fd77ed1f4f084603cff9e757e992
    reference_type: commit
    reference_id: b574228715f0fd77ed1f4f084603cff9e757e992
  - url: https://github.com/postgres/postgres/tree/c0c8807ded2f59c25b375998ef24ff09994563a1
    reference_type: commit
    reference_id: c0c8807ded2f59c25b375998ef24ff09994563a1
  - url: https://github.com/postgres/postgres/tree/c30f082d2767c22cefb8875dcb1932e5ed338db6
    reference_type: commit
    reference_id: c30f082d2767c22cefb8875dcb1932e5ed338db6
  - url: https://github.com/postgres/postgres/tree/d5fe5fb232a4e57c66779b8b6acdcb458e9b8b9c
    reference_type: commit
    reference_id: d5fe5fb232a4e57c66779b8b6acdcb458e9b8b9c
  - url: https://github.com/postgres/postgres/tree/d69c0710a68068c7a415aaefd2c7d51f3197fe38
    reference_type: commit
    reference_id: d69c0710a68068c7a415aaefd2c7d51f3197fe38
  - url: https://github.com/postgres/postgres/tree/e7bae63e02dee20fdcbad2664d4722c80febf8a1
    reference_type: commit
    reference_id: e7bae63e02dee20fdcbad2664d4722c80febf8a1
  - url: https://github.com/postgres/postgres/tree/fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
    reference_type: commit
    reference_id: fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
