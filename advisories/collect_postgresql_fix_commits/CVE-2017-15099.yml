advisory_id: CVE-2017-15099
datasource_id: collect_postgresql_fix_commits/CVE-2017-15099
datasource_url: https://github.com/postgres/postgres
aliases: []
summary: |
  92d830f4bff643953a09563abaa106af42625207:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  203b965f275061894621a5a359213ac77558d33f:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  e7bae63e02dee20fdcbad2664d4722c80febf8a1:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  7b4c179b70a59ad2dbd5c928ce8fc84629da0237:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  d69c0710a68068c7a415aaefd2c7d51f3197fe38:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  50abeafc74a812d2449ec49dc16e99baf8c5023a:Last-minute updates for release notes.

  Security: CVE-2017-12172, CVE-2017-15098, CVE-2017-15099
  87b2ebd352c4afe1ded0841604b59a3afbae97d1:Always require SELECT permission for ON CONFLICT DO UPDATE.

  The update path of an INSERT ... ON CONFLICT DO UPDATE requires SELECT
  permission on the columns of the arbiter index, but it failed to check
  for that in the case of an arbiter specified by constraint name.

  In addition, for a table with row level security enabled, it failed to
  check updated rows against the table's SELECT policies when the update
  path was taken (regardless of how the arbiter index was specified).

  Backpatch to 9.5 where ON CONFLICT DO UPDATE and RLS were introduced.

  Security: CVE-2017-15099
  3f80895723037c0d1c684dbdd50b7e03453df90f:Always require SELECT permission for ON CONFLICT DO UPDATE.

  The update path of an INSERT ... ON CONFLICT DO UPDATE requires SELECT
  permission on the columns of the arbiter index, but it failed to check
  for that in the case of an arbiter specified by constraint name.

  In addition, for a table with row level security enabled, it failed to
  check updated rows against the table's SELECT policies when the update
  path was taken (regardless of how the arbiter index was specified).

  Backpatch to 9.5 where ON CONFLICT DO UPDATE and RLS were introduced.

  Security: CVE-2017-15099
  1f23d1cd21ed46dba882729bedd9c40b71995989:Always require SELECT permission for ON CONFLICT DO UPDATE.

  The update path of an INSERT ... ON CONFLICT DO UPDATE requires SELECT
  permission on the columns of the arbiter index, but it failed to check
  for that in the case of an arbiter specified by constraint name.

  In addition, for a table with row level security enabled, it failed to
  check updated rows against the table's SELECT policies when the update
  path was taken (regardless of how the arbiter index was specified).

  Backpatch to 9.5 where ON CONFLICT DO UPDATE and RLS were introduced.

  Security: CVE-2017-15099
  045a18888f38bd46f5b50e145470095f461cc41c:Always require SELECT permission for ON CONFLICT DO UPDATE.

  The update path of an INSERT ... ON CONFLICT DO UPDATE requires SELECT
  permission on the columns of the arbiter index, but it failed to check
  for that in the case of an arbiter specified by constraint name.

  In addition, for a table with row level security enabled, it failed to
  check updated rows against the table's SELECT policies when the update
  path was taken (regardless of how the arbiter index was specified).

  Backpatch to 9.5 where ON CONFLICT DO UPDATE and RLS were introduced.

  Security: CVE-2017-15099
impacted_packages:
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 7b4c179b70a59ad2dbd5c928ce8fc84629da0237
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 87b2ebd352c4afe1ded0841604b59a3afbae97d1
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: d69c0710a68068c7a415aaefd2c7d51f3197fe38
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 1f23d1cd21ed46dba882729bedd9c40b71995989
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: e7bae63e02dee20fdcbad2664d4722c80febf8a1
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 3f80895723037c0d1c684dbdd50b7e03453df90f
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 045a18888f38bd46f5b50e145470095f461cc41c
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 203b965f275061894621a5a359213ac77558d33f
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 92d830f4bff643953a09563abaa106af42625207
    introduced_in_commits: []
  - purl: pkg:github/postgres/postgres
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/postgres/postgres
        commit: 50abeafc74a812d2449ec49dc16e99baf8c5023a
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/postgres/postgres/tree/045a18888f38bd46f5b50e145470095f461cc41c
    reference_type: commit
    reference_id: 045a18888f38bd46f5b50e145470095f461cc41c
  - url: https://github.com/postgres/postgres/tree/1f23d1cd21ed46dba882729bedd9c40b71995989
    reference_type: commit
    reference_id: 1f23d1cd21ed46dba882729bedd9c40b71995989
  - url: https://github.com/postgres/postgres/tree/203b965f275061894621a5a359213ac77558d33f
    reference_type: commit
    reference_id: 203b965f275061894621a5a359213ac77558d33f
  - url: https://github.com/postgres/postgres/tree/3f80895723037c0d1c684dbdd50b7e03453df90f
    reference_type: commit
    reference_id: 3f80895723037c0d1c684dbdd50b7e03453df90f
  - url: https://github.com/postgres/postgres/tree/50abeafc74a812d2449ec49dc16e99baf8c5023a
    reference_type: commit
    reference_id: 50abeafc74a812d2449ec49dc16e99baf8c5023a
  - url: https://github.com/postgres/postgres/tree/7b4c179b70a59ad2dbd5c928ce8fc84629da0237
    reference_type: commit
    reference_id: 7b4c179b70a59ad2dbd5c928ce8fc84629da0237
  - url: https://github.com/postgres/postgres/tree/87b2ebd352c4afe1ded0841604b59a3afbae97d1
    reference_type: commit
    reference_id: 87b2ebd352c4afe1ded0841604b59a3afbae97d1
  - url: https://github.com/postgres/postgres/tree/92d830f4bff643953a09563abaa106af42625207
    reference_type: commit
    reference_id: 92d830f4bff643953a09563abaa106af42625207
  - url: https://github.com/postgres/postgres/tree/d69c0710a68068c7a415aaefd2c7d51f3197fe38
    reference_type: commit
    reference_id: d69c0710a68068c7a415aaefd2c7d51f3197fe38
  - url: https://github.com/postgres/postgres/tree/e7bae63e02dee20fdcbad2664d4722c80febf8a1
    reference_type: commit
    reference_id: e7bae63e02dee20fdcbad2664d4722c80febf8a1
  - url: https://github.com/postgres/postgres/tree/fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
    reference_type: commit
    reference_id: fb3930ab1fdb53ad842307a47ddaa1fed4e85d5c
