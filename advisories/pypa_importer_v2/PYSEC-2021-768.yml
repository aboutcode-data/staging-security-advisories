advisory_id: PYSEC-2021-768
datasource_id: pypa_importer_v2/PYSEC-2021-768
datasource_url: https://github.com/pypa/advisory-database/blob/main/vulns/tensorflow-gpu/PYSEC-2021-768.yaml
aliases:
  - CVE-2021-37657
  - GHSA-5xwc-mrhx-5g3m
summary: TensorFlow is an end-to-end open source platform for machine learning. In affected
  versions an attacker can cause undefined behavior via binding a reference to null pointer
  in all operations of type `tf.raw_ops.MatrixDiagV*`. The [implementation](https://github.com/tensorflow/tensorflow/blob/84d053187cb80d975ef2b9684d4b61981bca0c41/tensorflow/core/kernels/linalg/matrix_diag_op.cc)
  has incomplete validation that the value of `k` is a valid tensor. We have check that this
  value is either a scalar or a vector, but there is no check for the number of elements. If
  this is an empty tensor, then code that accesses the first element of the tensor is wrong.
  We have patched the issue in GitHub commit f2a673bd34f0d64b8e40a551ac78989d16daad09. The fix
  will be included in TensorFlow 2.6.0. We will also cherrypick this commit on TensorFlow 2.5.1,
  TensorFlow 2.4.3, and TensorFlow 2.3.4, as these are also affected and still in supported
  range.
impacted_packages:
  - purl: pkg:pypi/tensorflow-gpu
    affected_versions: vers:pypi/2.3.0|2.3.1|2.3.2|2.3.3|2.4.0|2.4.1|2.4.2
    fixed_versions: vers:pypi/2.3.4|2.4.3
    fixed_in_commits:
      - vcs_url: https://github.com/tensorflow/tensorflow
        commit: f2a673bd34f0d64b8e40a551ac78989d16daad09
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/tensorflow/tensorflow/commit/f2a673bd34f0d64b8e40a551ac78989d16daad09
    reference_type:
    reference_id:
  - url: https://github.com/tensorflow/tensorflow/security/advisories/GHSA-5xwc-mrhx-5g3m
    reference_type:
    reference_id:
