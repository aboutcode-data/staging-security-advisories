advisory_id: CVE-2020-8694
datasource_id: collect_containerd_fix_commits/CVE-2020-8694
datasource_url: https://github.com/containerd/containerd
aliases: []
summary: |
  c94577e78d2924ddeb90d1601e31b50ee3acac48:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 106a9b776778eea9e1485f5340277dcd900590b9)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  c94577e78d2924ddeb90d1601e31b50ee3acac48:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 106a9b776778eea9e1485f5340277dcd900590b9)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  40162a576232b7d95325f85334590ea295d2ed2e:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 106a9b776778eea9e1485f5340277dcd900590b9)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  40162a576232b7d95325f85334590ea295d2ed2e:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 106a9b776778eea9e1485f5340277dcd900590b9)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  106a9b776778eea9e1485f5340277dcd900590b9:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  106a9b776778eea9e1485f5340277dcd900590b9:oci/spec: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
impacted_packages:
  - purl: pkg:github/containerd/containerd
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/containerd/containerd
        commit: c94577e78d2924ddeb90d1601e31b50ee3acac48
    introduced_in_commits: []
  - purl: pkg:github/containerd/containerd
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/containerd/containerd
        commit: 106a9b776778eea9e1485f5340277dcd900590b9
    introduced_in_commits: []
  - purl: pkg:github/containerd/containerd
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/containerd/containerd
        commit: 40162a576232b7d95325f85334590ea295d2ed2e
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/containerd/containerd/tree/106a9b776778eea9e1485f5340277dcd900590b9
    reference_type: commit
    reference_id: 106a9b776778eea9e1485f5340277dcd900590b9
  - url: https://github.com/containerd/containerd/tree/40162a576232b7d95325f85334590ea295d2ed2e
    reference_type: commit
    reference_id: 40162a576232b7d95325f85334590ea295d2ed2e
  - url: https://github.com/containerd/containerd/tree/c94577e78d2924ddeb90d1601e31b50ee3acac48
    reference_type: commit
    reference_id: c94577e78d2924ddeb90d1601e31b50ee3acac48
