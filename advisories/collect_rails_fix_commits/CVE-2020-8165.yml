advisory_id: CVE-2020-8165
datasource_id: collect_rails_fix_commits/CVE-2020-8165
datasource_url: https://github.com/rails/rails
aliases: []
summary: |
  9b4aef4be3dc58eb08f694387857b52be8050954:activesupport: Avoid Marshal.load on raw cache value in RedisCacheStore

  The same value for the `raw` option should be provided for both reading and
  writing to avoid Marshal.load being called on untrusted data.

  [CVE-2020-8165]
  0a4cf42311b35d46718ab3bbfac3d51568bdf23d:activesupport: Avoid Marshal.load on raw cache value in MemCacheStore

  Dalli is already being used for marshalling, so we should also rely
  on it for unmarshalling. Since Dalli tags the cache value as marshalled
  it can avoid unmarshalling a raw string which might have come from
  an untrusted source.

  [CVE-2020-8165]
  bd39a13cb9936e7261b271830950aae9bd0706bc:activesupport: Deprecate Marshal.load on raw cache read in RedisCacheStore

  The same value for the `raw` option should be provided for both reading and
  writing to avoid Marshal.load being called on untrusted data.

  [CVE-2020-8165]
  0a7ce52486adb36984174bd51257a0069fe7a9db:activesupport: Avoid Marshal.load on raw cache value in MemCacheStore

  Dalli is already being used for marshalling, so we should also rely
  on it for unmarshalling. Since Dalli tags the cache value as marshalled
  it can avoid unmarshalling a raw string which might have come from
  an untrusted source.

  [CVE-2020-8165]
  467e3399c9007996c03ffe3212689d48dd25ae99:activesupport: Deprecate Marshal.load on raw cache read in RedisCacheStore

  The same value for the `raw` option should be provided for both reading and
  writing to avoid Marshal.load being called on untrusted data.

  [CVE-2020-8165]
  f7e077f85e61fc0b7381963eda0ceb0e457546b5:activesupport: Avoid Marshal.load on raw cache value in MemCacheStore

  Dalli is already being used for marshalling, so we should also rely
  on it for unmarshalling. Since Dalli tags the cache value as marshalled
  it can avoid unmarshalling a raw string which might have come from
  an untrusted source.

  [CVE-2020-8165]
impacted_packages:
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: 0a4cf42311b35d46718ab3bbfac3d51568bdf23d
    introduced_in_commits: []
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: 9b4aef4be3dc58eb08f694387857b52be8050954
    introduced_in_commits: []
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: f7e077f85e61fc0b7381963eda0ceb0e457546b5
    introduced_in_commits: []
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: 467e3399c9007996c03ffe3212689d48dd25ae99
    introduced_in_commits: []
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: bd39a13cb9936e7261b271830950aae9bd0706bc
    introduced_in_commits: []
  - purl: pkg:github/rails/rails
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rails/rails
        commit: 0a7ce52486adb36984174bd51257a0069fe7a9db
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/rails/rails/tree/0a4cf42311b35d46718ab3bbfac3d51568bdf23d
    reference_type: commit
    reference_id: 0a4cf42311b35d46718ab3bbfac3d51568bdf23d
  - url: https://github.com/rails/rails/tree/0a7ce52486adb36984174bd51257a0069fe7a9db
    reference_type: commit
    reference_id: 0a7ce52486adb36984174bd51257a0069fe7a9db
  - url: https://github.com/rails/rails/tree/467e3399c9007996c03ffe3212689d48dd25ae99
    reference_type: commit
    reference_id: 467e3399c9007996c03ffe3212689d48dd25ae99
  - url: https://github.com/rails/rails/tree/9b4aef4be3dc58eb08f694387857b52be8050954
    reference_type: commit
    reference_id: 9b4aef4be3dc58eb08f694387857b52be8050954
  - url: https://github.com/rails/rails/tree/bd39a13cb9936e7261b271830950aae9bd0706bc
    reference_type: commit
    reference_id: bd39a13cb9936e7261b271830950aae9bd0706bc
  - url: https://github.com/rails/rails/tree/f7e077f85e61fc0b7381963eda0ceb0e457546b5
    reference_type: commit
    reference_id: f7e077f85e61fc0b7381963eda0ceb0e457546b5
