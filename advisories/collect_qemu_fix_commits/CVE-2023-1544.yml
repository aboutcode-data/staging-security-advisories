advisory_id: CVE-2023-1544
datasource_id: collect_qemu_fix_commits/CVE-2023-1544
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  06c9bf032f5581629819affd95fcbd7c54cf493a:hw/pvrdma: Protect against buggy or malicious guest driver

  Guest driver allocates and initialize page tables to be used as a ring
  of descriptors for CQ and async events.
  The page table that represents the ring, along with the number of pages
  in the page table is passed to the device.
  Currently our device supports only one page table for a ring.

  Let's make sure that the number of page table entries the driver
  reports, do not exceeds the one page table size.

  Reported-by: Soul Chen <soulchen8650@gmail.com>
  Signed-off-by: Yuval Shaia <yuval.shaia.ml@gmail.com>
  Fixes: CVE-2023-1544
  Message-ID: <20230301142926.18686-1-yuval.shaia.ml@gmail.com>
  Signed-off-by: Thomas Huth <thuth@redhat.com>
  (cherry picked from commit 85fc35afa93c7320d1641d344d0c5dfbe341d087)
  Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
  af566ccb38bdb65ed239c9cd22de3fbde9ad1483:hw/pvrdma: Protect against buggy or malicious guest driver

  Guest driver allocates and initialize page tables to be used as a ring
  of descriptors for CQ and async events.
  The page table that represents the ring, along with the number of pages
  in the page table is passed to the device.
  Currently our device supports only one page table for a ring.

  Let's make sure that the number of page table entries the driver
  reports, do not exceeds the one page table size.

  Reported-by: Soul Chen <soulchen8650@gmail.com>
  Signed-off-by: Yuval Shaia <yuval.shaia.ml@gmail.com>
  Fixes: CVE-2023-1544
  Message-ID: <20230301142926.18686-1-yuval.shaia.ml@gmail.com>
  Signed-off-by: Thomas Huth <thuth@redhat.com>
  (cherry picked from commit 85fc35afa93c7320d1641d344d0c5dfbe341d087)
  Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
  2a6299fb137e8f0fcee205f584c52481cb8461f7:Merge tag 'pull-request-2023-10-12' of https://gitlab.com/thuth/qemu into staging

  * Fix CVE-2023-1544
  * Deprecate the rdma code
  * Fix flaky npcm7xx_timer test
  * i2c-echo license statement and Kconfig switch
  * Disable the failing riscv64-debian-cross CI job by default

  * tag 'pull-request-2023-10-12' of https://gitlab.com/thuth/qemu:
    gitlab-ci: Disable the riscv64-debian-cross-container by default
    MAINTAINERS: Add include/sysemu/qtest.h to the qtest section
    hw/misc/Kconfig: add switch for i2c-echo
    hw/misc/i2c-echo: add copyright/license note
    tests/qtest: Fix npcm7xx_timer-test.c flaky test
    hw/rdma: Deprecate the pvrdma device and the rdma subsystem
    hw/pvrdma: Protect against buggy or malicious guest driver

  Conflicts:
    docs/about/deprecated.rst
    Context conflict between RISC-V and RDMA deprecation.

  Signed-off-by: Stefan Hajnoczi <stefanha@redhat.com>
  85fc35afa93c7320d1641d344d0c5dfbe341d087:hw/pvrdma: Protect against buggy or malicious guest driver

  Guest driver allocates and initialize page tables to be used as a ring
  of descriptors for CQ and async events.
  The page table that represents the ring, along with the number of pages
  in the page table is passed to the device.
  Currently our device supports only one page table for a ring.

  Let's make sure that the number of page table entries the driver
  reports, do not exceeds the one page table size.

  Reported-by: Soul Chen <soulchen8650@gmail.com>
  Signed-off-by: Yuval Shaia <yuval.shaia.ml@gmail.com>
  Fixes: CVE-2023-1544
  Message-ID: <20230301142926.18686-1-yuval.shaia.ml@gmail.com>
  Signed-off-by: Thomas Huth <thuth@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 2a6299fb137e8f0fcee205f584c52481cb8461f7
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: af566ccb38bdb65ed239c9cd22de3fbde9ad1483
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 85fc35afa93c7320d1641d344d0c5dfbe341d087
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 06c9bf032f5581629819affd95fcbd7c54cf493a
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
