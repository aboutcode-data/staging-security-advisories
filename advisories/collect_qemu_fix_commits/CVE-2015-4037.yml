advisory_id: CVE-2015-4037
datasource_id: collect_qemu_fix_commits/CVE-2015-4037
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  2700a976dba6b107365aa9af7fd927ffb3dd3b21:Merge remote-tracking branch 'remotes/mjt/tags/pull-trivial-patches-2015-06-03' into staging

  trivial patches for 2015-06-03

  # gpg: Signature made Wed Jun  3 14:07:47 2015 BST using RSA key ID A4C3D7DB
  # gpg: Good signature from "Michael Tokarev <mjt@tls.msk.ru>"
  # gpg:                 aka "Michael Tokarev <mjt@corpit.ru>"
  # gpg:                 aka "Michael Tokarev <mjt@debian.org>"

  * remotes/mjt/tags/pull-trivial-patches-2015-06-03: (30 commits)
    configure: postfix --extra-cflags to QEMU_CFLAGS
    cadence_gem: Fix Rx buffer size field mask
    slirp: use less predictable directory name in /tmp for smb config (CVE-2015-4037)
    translate-all: delete prototype for non-existent function
    Add -incoming help text
    hw/display/tc6393xb.c: Fix misusing qemu_allocate_irqs for single irq
    hw/arm/nseries.c: Fix misusing qemu_allocate_irqs for single irq
    hw/alpha/typhoon.c: Fix misusing qemu_allocate_irqs for single irq
    hw/unicore32/puv3.c: Fix misusing qemu_allocate_irqs for single irq
    hw/lm32/milkymist.c: Fix misusing qemu_allocate_irqs for single irq
    hw/lm32/lm32_boards.c: Fix misusing qemu_allocate_irqs for single irq
    hw/ppc/prep.c: Fix misusing qemu_allocate_irqs for single irq
    hw/sparc/sun4m.c: Fix misusing qemu_allocate_irqs for single irq
    hw/timer/arm_timer.c: Fix misusing qemu_allocate_irqs for single irq
    hw/isa/i82378.c: Fix misusing qemu_allocate_irqs for single irq
    hw/isa/lpc_ich9.c: Fix misusing qemu_allocate_irqs for single irq
    hw/i386/pc: Fix misusing qemu_allocate_irqs for single irq
    hw/intc/exynos4210_gic.c: Fix memory leak by adjusting order
    hw/arm/omap_sx1.c: Fix memory leak spotted by valgrind
    hw/ppc/e500.c: Fix memory leak
    ...

  Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
  8b8f1c7e9ddb2e88a144638f6527bf70e32343e3:slirp: use less predictable directory name in /tmp for smb config (CVE-2015-4037)

  In this version I used mkdtemp(3) which is:

          _BSD_SOURCE
          || /* Since glibc 2.10: */
              (_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700)

  (POSIX.1-2008), so should be available on systems we care about.

  While at it, reset the resulting directory name within smb structure
  on error so cleanup function wont try to remove directory which we
  failed to create.

  Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
  Reviewed-by: Markus Armbruster <armbru@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 2700a976dba6b107365aa9af7fd927ffb3dd3b21
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 8b8f1c7e9ddb2e88a144638f6527bf70e32343e3
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
