advisory_id: CVE-2021-3947
datasource_id: collect_qemu_fix_commits/CVE-2021-3947
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  2b2eb343a01bb84a9d988158f706a65b57604d65:hw/nvme: fix buffer overrun in nvme_changed_nslist (CVE-2021-3947)

  Fix missing offset verification.

  Cc: qemu-stable@nongnu.org
  Cc: Philippe Mathieu-Daudé <philmd@redhat.com>
  Reported-by: Qiuhao Li <Qiuhao.Li@outlook.com>
  Fixes: f432fdfa121 ("support changed namespace asynchronous event")
  Reviewed-by: Philippe Mathieu-Daudé <philmd@redhat.com>
  Signed-off-by: Klaus Jensen <k.jensen@samsung.com>
  (cherry picked from commit e2c57529c9306e4c9aac75d9879f6e7699584a22)
  Signed-off-by: Michael Roth <michael.roth@amd.com>
  9c25e1db18d872cbab3f028f93db37931dbc6ae2:Merge tag 'nvme-fixes-for-6.2-pull-request' of git://git.infradead.org/qemu-nvme into staging

  hw/nvme fixes

  * Fix CVE-2021-3947
  * Controller hotplugging fixes

  # gpg: Signature made Fri 19 Nov 2021 08:59:03 AM CET
  # gpg:                using RSA key 522833AA75E2DCE6A24766C04DE1AF316D4F0DE9
  # gpg: Good signature from "Klaus Jensen <its@irrelevant.dk>" [unknown]
  # gpg:                 aka "Klaus Jensen <k.jensen@samsung.com>" [unknown]
  # gpg: WARNING: This key is not certified with a trusted signature!
  # gpg:          There is no indication that the signature belongs to the owner.
  # Primary key fingerprint: DDCA 4D9C 9EF9 31CC 3468  4272 63D5 6FC5 E55D A838
  #      Subkey fingerprint: 5228 33AA 75E2 DCE6 A247  66C0 4DE1 AF31 6D4F 0DE9

  * tag 'nvme-fixes-for-6.2-pull-request' of git://git.infradead.org/qemu-nvme:
    hw/nvme: fix buffer overrun in nvme_changed_nslist (CVE-2021-3947)
    hw/nvme: change nvme-ns 'shared' default
    hw/nvme: reattach subsystem namespaces on hotplug

  Signed-off-by: Richard Henderson <richard.henderson@linaro.org>
  9c25e1db18d872cbab3f028f93db37931dbc6ae2:Merge tag 'nvme-fixes-for-6.2-pull-request' of git://git.infradead.org/qemu-nvme into staging

  hw/nvme fixes

  * Fix CVE-2021-3947
  * Controller hotplugging fixes

  # gpg: Signature made Fri 19 Nov 2021 08:59:03 AM CET
  # gpg:                using RSA key 522833AA75E2DCE6A24766C04DE1AF316D4F0DE9
  # gpg: Good signature from "Klaus Jensen <its@irrelevant.dk>" [unknown]
  # gpg:                 aka "Klaus Jensen <k.jensen@samsung.com>" [unknown]
  # gpg: WARNING: This key is not certified with a trusted signature!
  # gpg:          There is no indication that the signature belongs to the owner.
  # Primary key fingerprint: DDCA 4D9C 9EF9 31CC 3468  4272 63D5 6FC5 E55D A838
  #      Subkey fingerprint: 5228 33AA 75E2 DCE6 A247  66C0 4DE1 AF31 6D4F 0DE9

  * tag 'nvme-fixes-for-6.2-pull-request' of git://git.infradead.org/qemu-nvme:
    hw/nvme: fix buffer overrun in nvme_changed_nslist (CVE-2021-3947)
    hw/nvme: change nvme-ns 'shared' default
    hw/nvme: reattach subsystem namespaces on hotplug

  Signed-off-by: Richard Henderson <richard.henderson@linaro.org>
  e2c57529c9306e4c9aac75d9879f6e7699584a22:hw/nvme: fix buffer overrun in nvme_changed_nslist (CVE-2021-3947)

  Fix missing offset verification.

  Cc: qemu-stable@nongnu.org
  Cc: Philippe Mathieu-Daudé <philmd@redhat.com>
  Reported-by: Qiuhao Li <Qiuhao.Li@outlook.com>
  Fixes: f432fdfa121 ("support changed namespace asynchronous event")
  Reviewed-by: Philippe Mathieu-Daudé <philmd@redhat.com>
  Signed-off-by: Klaus Jensen <k.jensen@samsung.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: e2c57529c9306e4c9aac75d9879f6e7699584a22
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 9c25e1db18d872cbab3f028f93db37931dbc6ae2
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 2b2eb343a01bb84a9d988158f706a65b57604d65
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
