advisory_id: CVE-2017-2630
datasource_id: collect_qemu_fix_commits/CVE-2017-2630
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  8029d55a9362cbf6e210c9a33f62f5f30136ff50:nbd/client: fix drop_sync [CVE-2017-2630]

  Comparison symbol is misused. It may lead to memory corruption.
  Introduced in commit 7d3123e.

  Signed-off-by: Vladimir Sementsov-Ogievskiy <vsementsov@virtuozzo.com>
  Message-Id: <20170203154757.36140-6-vsementsov@virtuozzo.com>
  [eblake: add CVE details, update conditional]
  Signed-off-by: Eric Blake <eblake@redhat.com>
  Reviewed-by: Marc-AndrÃ© Lureau <marcandre.lureau@redhat.com>
  Message-Id: <20170307151627.27212-1-eblake@redhat.com>
  Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

  (cherry picked from commit 2563c9c6b8670400c48e562034b321a7cf3d9a85)
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>
  64c358a33ad984c9c4348b64f9507676f6c9db26:Merge remote-tracking branch 'remotes/bonzini/tags/for-upstream' into staging

  * "x" monitor command fix for KVM (Christian)
  * MemoryRegion name documentation (David)
  * mem-prealloc optimization (Jitendra)
  * -icount/MTTCG fixes (me)
  * "info mtree" niceness (Peter)
  * NBD drop_sync buffer overflow (Vladimir/Eric)
  * small cleanups and bugfixes (Li, Lin, Suramya, Thomas)
  * fix for "-device kvmclock" w/TCG (Eduardo)
  * debug output before crashing on KVM_{GET,SET}_MSRS (Eduardo)

  # gpg: Signature made Tue 14 Mar 2017 13:42:05 GMT
  # gpg:                using RSA key 0xBFFBD25F78C7AE83
  # gpg: Good signature from "Paolo Bonzini <bonzini@gnu.org>"
  # gpg:                 aka "Paolo Bonzini <pbonzini@redhat.com>"
  # Primary key fingerprint: 46F5 9FBD 57D6 12E7 BFD4  E2F7 7E15 100C CD36 69B1
  #      Subkey fingerprint: F133 3857 4B66 2389 866C  7682 BFFB D25F 78C7 AE83

  * remotes/bonzini/tags/for-upstream:
    nbd/client: fix drop_sync [CVE-2017-2630]
    memory: info mtree check mr range overflow
    icount: process QEMU_CLOCK_VIRTUAL timers in vCPU thread
    main-loop: remove now unnecessary optimization
    cpus: define QEMUTimerListNotifyCB for QEMU system emulation
    qemu-timer: do not include sysemu/cpus.h from util/qemu-timer.h
    qemu-timer: fix off-by-one
    target/nios2: take BQL around interrupt check
    scsi: mptsas: fix the wrong reading size in fetch request
    util: Removed unneeded header from path.c
    configure: add the missing help output for optional features
    scripts/dump-guest-memory.py: fix int128_get64 on recent gcc
    kvmclock: Don't crash QEMU if KVM is disabled
    kvm: Print MSR information if KVM_{GET,SET}_MSRS failed
    exec: add cpu_synchronize_state to cpu_memory_rw_debug
    mem-prealloc: reduce large guest start-up and migration time.
    docs: Add a note about mixing bootindex with "-boot order"
    memory_region: Fix name comments

  Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
  2563c9c6b8670400c48e562034b321a7cf3d9a85:nbd/client: fix drop_sync [CVE-2017-2630]

  Comparison symbol is misused. It may lead to memory corruption.
  Introduced in commit 7d3123e.

  Signed-off-by: Vladimir Sementsov-Ogievskiy <vsementsov@virtuozzo.com>
  Message-Id: <20170203154757.36140-6-vsementsov@virtuozzo.com>
  [eblake: add CVE details, update conditional]
  Signed-off-by: Eric Blake <eblake@redhat.com>
  Reviewed-by: Marc-AndrÃ© Lureau <marcandre.lureau@redhat.com>
  Message-Id: <20170307151627.27212-1-eblake@redhat.com>
  Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 64c358a33ad984c9c4348b64f9507676f6c9db26
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 8029d55a9362cbf6e210c9a33f62f5f30136ff50
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 2563c9c6b8670400c48e562034b321a7cf3d9a85
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
