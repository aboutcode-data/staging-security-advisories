advisory_id: CVE-2023-3019
datasource_id: collect_qemu_fix_commits/CVE-2023-3019
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  3c0463a650008aec7de29cf84540652730510921:net: Update MemReentrancyGuard for NIC

  Recently MemReentrancyGuard was added to DeviceState to record that the
  device is engaging in I/O. The network device backend needs to update it
  when delivering a packet to a device.

  This implementation follows what bottom half does, but it does not add
  a tracepoint for the case that the network device backend started
  delivering a packet to a device which is already engaging in I/O. This
  is because such reentrancy frequently happens for
  qemu_flush_queued_packets() and is insignificant.

  Fixes: CVE-2023-3019
  Reported-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Akihiko Odaki <akihiko.odaki@daynix.com>
  Acked-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Jason Wang <jasowang@redhat.com>
  (cherry picked from commit 9050f976e447444ea6ee2ba12c9f77e4b0dc54bc)
  Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
  88e79a2dfda319f9ebec2cc8a5c3c9733716d13f:net: Update MemReentrancyGuard for NIC

  Recently MemReentrancyGuard was added to DeviceState to record that the
  device is engaging in I/O. The network device backend needs to update it
  when delivering a packet to a device.

  This implementation follows what bottom half does, but it does not add
  a tracepoint for the case that the network device backend started
  delivering a packet to a device which is already engaging in I/O. This
  is because such reentrancy frequently happens for
  qemu_flush_queued_packets() and is insignificant.

  Fixes: CVE-2023-3019
  Reported-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Akihiko Odaki <akihiko.odaki@daynix.com>
  Acked-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Jason Wang <jasowang@redhat.com>
  (cherry picked from commit 9050f976e447444ea6ee2ba12c9f77e4b0dc54bc)
  Signed-off-by: Michael Tokarev <mjt@tls.msk.ru>
  9050f976e447444ea6ee2ba12c9f77e4b0dc54bc:net: Update MemReentrancyGuard for NIC

  Recently MemReentrancyGuard was added to DeviceState to record that the
  device is engaging in I/O. The network device backend needs to update it
  when delivering a packet to a device.

  This implementation follows what bottom half does, but it does not add
  a tracepoint for the case that the network device backend started
  delivering a packet to a device which is already engaging in I/O. This
  is because such reentrancy frequently happens for
  qemu_flush_queued_packets() and is insignificant.

  Fixes: CVE-2023-3019
  Reported-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Akihiko Odaki <akihiko.odaki@daynix.com>
  Acked-by: Alexander Bulekov <alxndr@bu.edu>
  Signed-off-by: Jason Wang <jasowang@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 9050f976e447444ea6ee2ba12c9f77e4b0dc54bc
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 88e79a2dfda319f9ebec2cc8a5c3c9733716d13f
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 3c0463a650008aec7de29cf84540652730510921
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
