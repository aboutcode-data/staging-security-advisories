advisory_id: CVE-2017-5715
datasource_id: collect_qemu_fix_commits/CVE-2017-5715
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  61efbbf869293f1deb9ee39d44bd4e635de59fa7:i386: Add new -IBRS versions of Intel CPU models

  The new MSR IA32_SPEC_CTRL MSR was introduced by a recent Intel
  microcode updated and can be used by OSes to mitigate
  CVE-2017-5715.  Unfortunately we can't change the existing CPU
  models without breaking existing setups, so users need to
  explicitly update their VM configuration to use the new *-IBRS
  CPU model if they want to expose IBRS to guests.

  The new CPU models are simple copies of the existing CPU models,
  with just CPUID_7_0_EDX_SPEC_CTRL added and model_id updated.

  Cc: Jiri Denemark <jdenemar@redhat.com>
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>
  Message-Id: <20180109154519.25634-6-ehabkost@redhat.com>
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>
  (cherry picked from commit ac96c41354b7e4c70b756342d9b686e31ab87458)
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>
  5cad8ca516011695a37d5be905292722b5249da8:Merge remote-tracking branch 'remotes/ehabkost/tags/x86-pull-request' into staging

  x86 queue, 2018-01-17

  Highlight: new CPU models that expose CPU features that guests
  can use to mitigate CVE-2017-5715 (Spectre variant #2).

  # gpg: Signature made Thu 18 Jan 2018 02:00:03 GMT
  # gpg:                using RSA key 0x2807936F984DC5A6
  # gpg: Good signature from "Eduardo Habkost <ehabkost@redhat.com>"
  # Primary key fingerprint: 5A32 2FD5 ABC4 D3DB ACCF  D1AA 2807 936F 984D C5A6

  * remotes/ehabkost/tags/x86-pull-request:
    i386: Add EPYC-IBPB CPU model
    i386: Add new -IBRS versions of Intel CPU models
    i386: Add FEAT_8000_0008_EBX CPUID feature word
    i386: Add spec-ctrl CPUID bit
    i386: Add support for SPEC_CTRL MSR
    i386: Change X86CPUDefinition::model_id to const char*
    target/i386: add clflushopt to "Skylake-Server" cpu model
    pc: add 2.12 machine types

  Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
  ac96c41354b7e4c70b756342d9b686e31ab87458:i386: Add new -IBRS versions of Intel CPU models

  The new MSR IA32_SPEC_CTRL MSR was introduced by a recent Intel
  microcode updated and can be used by OSes to mitigate
  CVE-2017-5715.  Unfortunately we can't change the existing CPU
  models without breaking existing setups, so users need to
  explicitly update their VM configuration to use the new *-IBRS
  CPU model if they want to expose IBRS to guests.

  The new CPU models are simple copies of the existing CPU models,
  with just CPUID_7_0_EDX_SPEC_CTRL added and model_id updated.

  Cc: Jiri Denemark <jdenemar@redhat.com>
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>
  Message-Id: <20180109154519.25634-6-ehabkost@redhat.com>
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: ac96c41354b7e4c70b756342d9b686e31ab87458
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 5cad8ca516011695a37d5be905292722b5249da8
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 61efbbf869293f1deb9ee39d44bd4e635de59fa7
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
