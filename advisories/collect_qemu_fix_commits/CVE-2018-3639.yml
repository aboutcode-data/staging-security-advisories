advisory_id: CVE-2018-3639
datasource_id: collect_qemu_fix_commits/CVE-2018-3639
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: "43163837d3d163baa8fe44fa2b08080f1cf2ed9d:i386: define the AMD 'virt-ssbd' CPUID feature\
  \ bit (CVE-2018-3639)\n\nAMD Zen expose the Intel equivalant to Speculative Store Bypass Disable\n\
  via the 0x80000008_EBX[25] CPUID feature bit.\n\nThis needs to be exposed to guest OS to allow\
  \ them to protect\nagainst CVE-2018-3639.\n\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Reviewed-by: Daniel P. Berrangé <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Message-Id: <20180521215424.13520-3-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  (cherry picked from commit 403503b162ffc33fb64cfefdf7b880acf41772cd)\nSigned-off-by: Michael\
  \ Roth <mdroth@linux.vnet.ibm.com>\n43163837d3d163baa8fe44fa2b08080f1cf2ed9d:i386: define\
  \ the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n\nAMD Zen expose the Intel equivalant\
  \ to Speculative Store Bypass Disable\nvia the 0x80000008_EBX[25] CPUID feature bit.\n\nThis\
  \ needs to be exposed to guest OS to allow them to protect\nagainst CVE-2018-3639.\n\nSigned-off-by:\
  \ Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nReviewed-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Signed-off-by: Daniel P. Berrangé <berrange@redhat.com>\nMessage-Id: <20180521215424.13520-3-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit 403503b162ffc33fb64cfefdf7b880acf41772cd)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n3129ddb9436fc059d9163a24b227a30ab694c282:i386:\
  \ Define the Virt SSBD MSR and handling of it (CVE-2018-3639)\n\n\"Some AMD processors only\
  \ support a non-architectural means of enabling\nspeculative store bypass disable (SSBD).\
  \  To allow a simplified view of\nthis to a guest, an architectural definition has been created\
  \ through a new\nCPUID bit, 0x80000008_EBX[25], and a new MSR, 0xc001011f.  With this, a\n\
  hypervisor can virtualize the existence of this definition and provide an\narchitectural method\
  \ for using SSBD to a guest.\n\nAdd the new CPUID feature, the new MSR and update the existing\
  \ SSBD\nsupport to use this MSR when present.\" (from x86/speculation: Add virtualized\nspeculative\
  \ store bypass disable support in Linux).\n\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Reviewed-by: Daniel P. Berrangé <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Message-Id: <20180521215424.13520-4-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  (cherry picked from commit cfeea0c021db6234c154dbc723730e81553924ff)\nSigned-off-by: Michael\
  \ Roth <mdroth@linux.vnet.ibm.com>\n8a302f42a5f84d89c4590022e55b1b61621b7f79:i386: define\
  \ the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\nNew microcode introduces the \"Speculative\
  \ Store Bypass Disable\"\nCPUID feature bit. This needs to be exposed to guest OS to allow\n\
  them to protect against CVE-2018-3639.\n\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Konrad Rzeszutek\
  \ Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit d19d1f965904a533998739698020ff4ee8a103da)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n8a302f42a5f84d89c4590022e55b1b61621b7f79:i386:\
  \ define the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\nNew microcode introduces the \"Speculative\
  \ Store Bypass Disable\"\nCPUID feature bit. This needs to be exposed to guest OS to allow\n\
  them to protect against CVE-2018-3639.\n\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Konrad Rzeszutek\
  \ Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit d19d1f965904a533998739698020ff4ee8a103da)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\nafa43eb63ee4f60c0370aec5aad9d11c585409cb:i386:\
  \ define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n\nAMD Zen expose the Intel\
  \ equivalant to Speculative Store Bypass Disable\nvia the 0x80000008_EBX[25] CPUID feature\
  \ bit.\n\nThis needs to be exposed to guest OS to allow them to protect\nagainst CVE-2018-3639.\n\
  \nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nReviewed-by: Daniel P. Berrangé\
  \ <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\nMessage-Id:\
  \ <20180521215424.13520-3-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  (cherry picked from commit 403503b162ffc33fb64cfefdf7b880acf41772cd)\nSigned-off-by: Michael\
  \ Roth <mdroth@linux.vnet.ibm.com>\nafa43eb63ee4f60c0370aec5aad9d11c585409cb:i386: define\
  \ the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n\nAMD Zen expose the Intel equivalant\
  \ to Speculative Store Bypass Disable\nvia the 0x80000008_EBX[25] CPUID feature bit.\n\nThis\
  \ needs to be exposed to guest OS to allow them to protect\nagainst CVE-2018-3639.\n\nSigned-off-by:\
  \ Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nReviewed-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Signed-off-by: Daniel P. Berrangé <berrange@redhat.com>\nMessage-Id: <20180521215424.13520-3-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit 403503b162ffc33fb64cfefdf7b880acf41772cd)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n73521f60f4ecb48d168021b193fe2e52fb0eea9a:i386:\
  \ Define the Virt SSBD MSR and handling of it (CVE-2018-3639)\n\n\"Some AMD processors only\
  \ support a non-architectural means of enabling\nspeculative store bypass disable (SSBD).\
  \  To allow a simplified view of\nthis to a guest, an architectural definition has been created\
  \ through a new\nCPUID bit, 0x80000008_EBX[25], and a new MSR, 0xc001011f.  With this, a\n\
  hypervisor can virtualize the existence of this definition and provide an\narchitectural method\
  \ for using SSBD to a guest.\n\nAdd the new CPUID feature, the new MSR and update the existing\
  \ SSBD\nsupport to use this MSR when present.\" (from x86/speculation: Add virtualized\nspeculative\
  \ store bypass disable support in Linux).\n\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Reviewed-by: Daniel P. Berrangé <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Message-Id: <20180521215424.13520-4-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  (cherry picked from commit cfeea0c021db6234c154dbc723730e81553924ff)\n Conflicts:\n\ttarget/i386/kvm.c\n\
  \ttarget/i386/machine.c\n* drop context dep on b77146e9a\nSigned-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n\
  4ce0b750a20a055736b073fa7dff3eba6f6e3b73:i386: define the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\
  \nNew microcode introduces the \"Speculative Store Bypass Disable\"\nCPUID feature bit. This\
  \ needs to be exposed to guest OS to allow\nthem to protect against CVE-2018-3639.\n\nSigned-off-by:\
  \ Daniel P. Berrangé <berrange@redhat.com>\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit d19d1f965904a533998739698020ff4ee8a103da)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n4ce0b750a20a055736b073fa7dff3eba6f6e3b73:i386:\
  \ define the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\nNew microcode introduces the \"Speculative\
  \ Store Bypass Disable\"\nCPUID feature bit. This needs to be exposed to guest OS to allow\n\
  them to protect against CVE-2018-3639.\n\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Konrad Rzeszutek\
  \ Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\n(cherry picked from commit d19d1f965904a533998739698020ff4ee8a103da)\n\
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>\n4f50c1673a89b07f376ce5c42d22d79a79cd466d:Merge\
  \ remote-tracking branch 'remotes/ehabkost/tags/x86-next-pull-request' into staging\n\nSpeculative\
  \ store buffer bypass mitigation (CVE-2018-3639)\n\n# gpg: Signature made Mon 21 May 2018\
  \ 23:00:46 BST\n# gpg:                using RSA key 2807936F984DC5A6\n# gpg: Good signature\
  \ from \"Eduardo Habkost <ehabkost@redhat.com>\"\n# Primary key fingerprint: 5A32 2FD5 ABC4\
  \ D3DB ACCF  D1AA 2807 936F 984D C5A6\n\n* remotes/ehabkost/tags/x86-next-pull-request:\n\
  \  i386: define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n  i386: Define the\
  \ Virt SSBD MSR and handling of it (CVE-2018-3639)\n  i386: define the 'ssbd' CPUID feature\
  \ bit (CVE-2018-3639)\n\nSigned-off-by: Peter Maydell <peter.maydell@linaro.org>\n4f50c1673a89b07f376ce5c42d22d79a79cd466d:Merge\
  \ remote-tracking branch 'remotes/ehabkost/tags/x86-next-pull-request' into staging\n\nSpeculative\
  \ store buffer bypass mitigation (CVE-2018-3639)\n\n# gpg: Signature made Mon 21 May 2018\
  \ 23:00:46 BST\n# gpg:                using RSA key 2807936F984DC5A6\n# gpg: Good signature\
  \ from \"Eduardo Habkost <ehabkost@redhat.com>\"\n# Primary key fingerprint: 5A32 2FD5 ABC4\
  \ D3DB ACCF  D1AA 2807 936F 984D C5A6\n\n* remotes/ehabkost/tags/x86-next-pull-request:\n\
  \  i386: define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n  i386: Define the\
  \ Virt SSBD MSR and handling of it (CVE-2018-3639)\n  i386: define the 'ssbd' CPUID feature\
  \ bit (CVE-2018-3639)\n\nSigned-off-by: Peter Maydell <peter.maydell@linaro.org>\n4f50c1673a89b07f376ce5c42d22d79a79cd466d:Merge\
  \ remote-tracking branch 'remotes/ehabkost/tags/x86-next-pull-request' into staging\n\nSpeculative\
  \ store buffer bypass mitigation (CVE-2018-3639)\n\n# gpg: Signature made Mon 21 May 2018\
  \ 23:00:46 BST\n# gpg:                using RSA key 2807936F984DC5A6\n# gpg: Good signature\
  \ from \"Eduardo Habkost <ehabkost@redhat.com>\"\n# Primary key fingerprint: 5A32 2FD5 ABC4\
  \ D3DB ACCF  D1AA 2807 936F 984D C5A6\n\n* remotes/ehabkost/tags/x86-next-pull-request:\n\
  \  i386: define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n  i386: Define the\
  \ Virt SSBD MSR and handling of it (CVE-2018-3639)\n  i386: define the 'ssbd' CPUID feature\
  \ bit (CVE-2018-3639)\n\nSigned-off-by: Peter Maydell <peter.maydell@linaro.org>\n4f50c1673a89b07f376ce5c42d22d79a79cd466d:Merge\
  \ remote-tracking branch 'remotes/ehabkost/tags/x86-next-pull-request' into staging\n\nSpeculative\
  \ store buffer bypass mitigation (CVE-2018-3639)\n\n# gpg: Signature made Mon 21 May 2018\
  \ 23:00:46 BST\n# gpg:                using RSA key 2807936F984DC5A6\n# gpg: Good signature\
  \ from \"Eduardo Habkost <ehabkost@redhat.com>\"\n# Primary key fingerprint: 5A32 2FD5 ABC4\
  \ D3DB ACCF  D1AA 2807 936F 984D C5A6\n\n* remotes/ehabkost/tags/x86-next-pull-request:\n\
  \  i386: define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n  i386: Define the\
  \ Virt SSBD MSR and handling of it (CVE-2018-3639)\n  i386: define the 'ssbd' CPUID feature\
  \ bit (CVE-2018-3639)\n\nSigned-off-by: Peter Maydell <peter.maydell@linaro.org>\n403503b162ffc33fb64cfefdf7b880acf41772cd:i386:\
  \ define the AMD 'virt-ssbd' CPUID feature bit (CVE-2018-3639)\n\nAMD Zen expose the Intel\
  \ equivalant to Speculative Store Bypass Disable\nvia the 0x80000008_EBX[25] CPUID feature\
  \ bit.\n\nThis needs to be exposed to guest OS to allow them to protect\nagainst CVE-2018-3639.\n\
  \nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nReviewed-by: Daniel P. Berrangé\
  \ <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\nMessage-Id:\
  \ <20180521215424.13520-3-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  403503b162ffc33fb64cfefdf7b880acf41772cd:i386: define the AMD 'virt-ssbd' CPUID feature bit\
  \ (CVE-2018-3639)\n\nAMD Zen expose the Intel equivalant to Speculative Store Bypass Disable\n\
  via the 0x80000008_EBX[25] CPUID feature bit.\n\nThis needs to be exposed to guest OS to allow\
  \ them to protect\nagainst CVE-2018-3639.\n\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Reviewed-by: Daniel P. Berrangé <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Message-Id: <20180521215424.13520-3-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  cfeea0c021db6234c154dbc723730e81553924ff:i386: Define the Virt SSBD MSR and handling of it\
  \ (CVE-2018-3639)\n\n\"Some AMD processors only support a non-architectural means of enabling\n\
  speculative store bypass disable (SSBD).  To allow a simplified view of\nthis to a guest,\
  \ an architectural definition has been created through a new\nCPUID bit, 0x80000008_EBX[25],\
  \ and a new MSR, 0xc001011f.  With this, a\nhypervisor can virtualize the existence of this\
  \ definition and provide an\narchitectural method for using SSBD to a guest.\n\nAdd the new\
  \ CPUID feature, the new MSR and update the existing SSBD\nsupport to use this MSR when present.\"\
  \ (from x86/speculation: Add virtualized\nspeculative store bypass disable support in Linux).\n\
  \nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nReviewed-by: Daniel P. Berrangé\
  \ <berrange@redhat.com>\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\nMessage-Id:\
  \ <20180521215424.13520-4-berrange@redhat.com>\nSigned-off-by: Eduardo Habkost <ehabkost@redhat.com>\n\
  d19d1f965904a533998739698020ff4ee8a103da:i386: define the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\
  \nNew microcode introduces the \"Speculative Store Bypass Disable\"\nCPUID feature bit. This\
  \ needs to be exposed to guest OS to allow\nthem to protect against CVE-2018-3639.\n\nSigned-off-by:\
  \ Daniel P. Berrangé <berrange@redhat.com>\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\n\
  Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>\nd19d1f965904a533998739698020ff4ee8a103da:i386:\
  \ define the 'ssbd' CPUID feature bit (CVE-2018-3639)\n\nNew microcode introduces the \"Speculative\
  \ Store Bypass Disable\"\nCPUID feature bit. This needs to be exposed to guest OS to allow\n\
  them to protect against CVE-2018-3639.\n\nSigned-off-by: Daniel P. Berrangé <berrange@redhat.com>\n\
  Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Konrad Rzeszutek\
  \ Wilk <konrad.wilk@oracle.com>\nMessage-Id: <20180521215424.13520-2-berrange@redhat.com>\n\
  Signed-off-by: Eduardo Habkost <ehabkost@redhat.com>"
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 4ce0b750a20a055736b073fa7dff3eba6f6e3b73
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: d19d1f965904a533998739698020ff4ee8a103da
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 4f50c1673a89b07f376ce5c42d22d79a79cd466d
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 403503b162ffc33fb64cfefdf7b880acf41772cd
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 8a302f42a5f84d89c4590022e55b1b61621b7f79
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: afa43eb63ee4f60c0370aec5aad9d11c585409cb
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 3129ddb9436fc059d9163a24b227a30ab694c282
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: cfeea0c021db6234c154dbc723730e81553924ff
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 43163837d3d163baa8fe44fa2b08080f1cf2ed9d
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 73521f60f4ecb48d168021b193fe2e52fb0eea9a
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
