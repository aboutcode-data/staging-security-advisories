advisory_id: CVE-2017-2615
datasource_id: collect_qemu_fix_commits/CVE-2017-2615
datasource_url: https://gitlab.com/qemu-project/qemu
aliases: []
summary: |
  f054cead44cef75d330cfba39aa0c46be483813d:cirrus: fix oob access issue (CVE-2017-2615)

  When doing bitblt copy in backward mode, we should minus the
  blt width first just like the adding in the forward mode. This
  can avoid the oob access of the front of vga's vram.

  Signed-off-by: Li Qiang <liqiang6-s@360.cn>

  { kraxel: with backward blits (negative pitch) addr is the topmost
            address, so check it as-is against vram size ]

  Cc: qemu-stable@nongnu.org
  Cc: P J P <ppandit@redhat.com>
  Cc: Laszlo Ersek <lersek@redhat.com>
  Cc: Paolo Bonzini <pbonzini@redhat.com>
  Cc: Wolfgang Bumiller <w.bumiller@proxmox.com>
  Fixes: d3532a0db02296e687711b8cdc7791924efccea0 (CVE-2014-8106)
  Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
  Message-id: 1485938101-26602-1-git-send-email-kraxel@redhat.com
  Reviewed-by: Laszlo Ersek <lersek@redhat.com>
  (cherry picked from commit 62d4c6bd5263bb8413a06c80144fc678df6dfb64)
  Signed-off-by: Michael Roth <mdroth@linux.vnet.ibm.com>
  5b66d7ae89411c01657ebfe76b9a8be346a4b1be:Merge remote-tracking branch 'remotes/kraxel/tags/pull-vga-20170202-2' into staging

  cirrus: multiple bugfixes, including CVE-2017-2615 fix.

  # gpg: Signature made Thu 02 Feb 2017 15:03:35 GMT
  # gpg:                using RSA key 0x4CB6D8EED3E87138
  # gpg: Good signature from "Gerd Hoffmann (work) <kraxel@redhat.com>"
  # gpg:                 aka "Gerd Hoffmann <gerd@kraxel.org>"
  # gpg:                 aka "Gerd Hoffmann (private) <kraxel@gmail.com>"
  # Primary key fingerprint: A032 8CFF B93A 17A7 9901  FE7D 4CB6 D8EE D3E8 7138

  * remotes/kraxel/tags/pull-vga-20170202-2:
    cirrus: fix oob access issue (CVE-2017-2615)
    cirrus: fix blit address mask handling
    cirrus: allow zero source pitch in pattern fill rops
    cirrus: handle negative pitch in cirrus_invalidate_region()

  Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
  5b66d7ae89411c01657ebfe76b9a8be346a4b1be:Merge remote-tracking branch 'remotes/kraxel/tags/pull-vga-20170202-2' into staging

  cirrus: multiple bugfixes, including CVE-2017-2615 fix.

  # gpg: Signature made Thu 02 Feb 2017 15:03:35 GMT
  # gpg:                using RSA key 0x4CB6D8EED3E87138
  # gpg: Good signature from "Gerd Hoffmann (work) <kraxel@redhat.com>"
  # gpg:                 aka "Gerd Hoffmann <gerd@kraxel.org>"
  # gpg:                 aka "Gerd Hoffmann (private) <kraxel@gmail.com>"
  # Primary key fingerprint: A032 8CFF B93A 17A7 9901  FE7D 4CB6 D8EE D3E8 7138

  * remotes/kraxel/tags/pull-vga-20170202-2:
    cirrus: fix oob access issue (CVE-2017-2615)
    cirrus: fix blit address mask handling
    cirrus: allow zero source pitch in pattern fill rops
    cirrus: handle negative pitch in cirrus_invalidate_region()

  Signed-off-by: Peter Maydell <peter.maydell@linaro.org>
  62d4c6bd5263bb8413a06c80144fc678df6dfb64:cirrus: fix oob access issue (CVE-2017-2615)

  When doing bitblt copy in backward mode, we should minus the
  blt width first just like the adding in the forward mode. This
  can avoid the oob access of the front of vga's vram.

  Signed-off-by: Li Qiang <liqiang6-s@360.cn>

  { kraxel: with backward blits (negative pitch) addr is the topmost
            address, so check it as-is against vram size ]

  Cc: qemu-stable@nongnu.org
  Cc: P J P <ppandit@redhat.com>
  Cc: Laszlo Ersek <lersek@redhat.com>
  Cc: Paolo Bonzini <pbonzini@redhat.com>
  Cc: Wolfgang Bumiller <w.bumiller@proxmox.com>
  Fixes: d3532a0db02296e687711b8cdc7791924efccea0 (CVE-2014-8106)
  Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
  Message-id: 1485938101-26602-1-git-send-email-kraxel@redhat.com
  Reviewed-by: Laszlo Ersek <lersek@redhat.com>
impacted_packages:
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 62d4c6bd5263bb8413a06c80144fc678df6dfb64
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: f054cead44cef75d330cfba39aa0c46be483813d
    introduced_in_commits: []
  - purl: pkg:gitlab/qemu-project/qemu
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://gitlab.com/qemu-project/qemu
        commit: 5b66d7ae89411c01657ebfe76b9a8be346a4b1be
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://gitlab.com/qemu-project/qemu
    reference_type: commit
    reference_id: 91c6438caffc880e999a7312825479685d659b44
