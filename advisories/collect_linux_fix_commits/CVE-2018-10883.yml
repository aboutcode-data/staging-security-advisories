advisory_id: CVE-2018-10883
datasource_id: collect_linux_fix_commits/CVE-2018-10883
datasource_url: https://github.com/torvalds/linux
aliases: []
summary: |
  8bc1379b82b8e809eef77a9fedbb75c6c297be19:ext4: avoid running out of journal credits when appending to an inline file

  Use a separate journal transaction if it turns out that we need to
  convert an inline file to use an data block.  Otherwise we could end
  up failing due to not having journal credits.

  This addresses CVE-2018-10883.

  https://bugzilla.kernel.org/show_bug.cgi?id=200071

  Signed-off-by: Theodore Ts'o <tytso@mit.edu>
  Cc: stable@kernel.org
  e09463f220ca9a1a1ecfda84fcda658f99a1f12a:jbd2: don't mark block as modified if the handle is out of credits

  Do not set the b_modified flag in block's journal head should not
  until after we're sure that jbd2_journal_dirty_metadat() will not
  abort with an error due to there not being enough space reserved in
  the jbd2 handle.

  Otherwise, future attempts to modify the buffer may lead a large
  number of spurious errors and warnings.

  This addresses CVE-2018-10883.

  https://bugzilla.kernel.org/show_bug.cgi?id=200071

  Signed-off-by: Theodore Ts'o <tytso@mit.edu>
  Cc: stable@kernel.org
impacted_packages:
  - purl: pkg:github/torvalds/linux
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/torvalds/linux
        commit: 8bc1379b82b8e809eef77a9fedbb75c6c297be19
    introduced_in_commits: []
  - purl: pkg:github/torvalds/linux
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/torvalds/linux
        commit: e09463f220ca9a1a1ecfda84fcda658f99a1f12a
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/torvalds/linux/tree/8bc1379b82b8e809eef77a9fedbb75c6c297be19
    reference_type: commit
    reference_id: 8bc1379b82b8e809eef77a9fedbb75c6c297be19
  - url: https://github.com/torvalds/linux/tree/e09463f220ca9a1a1ecfda84fcda658f99a1f12a
    reference_type: commit
    reference_id: e09463f220ca9a1a1ecfda84fcda658f99a1f12a
