advisory_id: GHSA-p99j-rfp4-xqvq
datasource_id: collect_php_fix_commits/GHSA-p99j-rfp4-xqvq
datasource_url: https://github.com/php/php-src
aliases: []
summary: |
  5f3e6e346c574bdcd564119e19828ff3204e3ee5:Fix failing soap tests on Windows

  These failures are caused by the fix for GHSA-p99j-rfp4-xqvq.  Since
  the two bug*.phpt tests don't need the "wsdl" query string, and don't
  even need php-cgi, we just remove the `--GET--` section.  The two
  server*.phpt tests are harder to fix, since during evaluation of the
  `--SKIPIF--` section, the soap extension can be loaded, but it may not
  during evaluation of the `--FILE--` section.  So for now, we skip these
  tests on Windows altogether.

  Co-authored-by: Niels Dossche <7771979+nielsdos@users.noreply.github.com>

  Closes GH-16084.
  1c9f4d1affc385050d9d002be2d30c368c50d5ce:Fix GHSA-p99j-rfp4-xqvq

  It's no use trying to work around whatever the operating system and Apache
  do because we'll be fighting that until eternity.
  Change the skip_getopt condition such that when we're running in
  CGI or FastCGI mode we always skip the argument parsing.
  This is a BC break, but this seems to be the only way to get rid of this
  class of issues.
  abcfd980bfa03298792fd3aba051c78d52f10642:Fix GHSA-p99j-rfp4-xqvq

  It's no use trying to work around whatever the operating system and Apache
  do because we'll be fighting that until eternity.
  Change the skip_getopt condition such that when we're running in
  CGI or FastCGI mode we always skip the argument parsing.
  This is a BC break, but this seems to be the only way to get rid of this
  class of issues.
  4b9cd27ff5c0177dcb160caeae1ea79e761ada58:Fix GHSA-p99j-rfp4-xqvq

  It's no use trying to work around whatever the operating system and Apache
  do because we'll be fighting that until eternity.
  Change the skip_getopt condition such that when we're running in
  CGI or FastCGI mode we always skip the argument parsing.
  This is a BC break, but this seems to be the only way to get rid of this
  class of issues.
impacted_packages:
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 1c9f4d1affc385050d9d002be2d30c368c50d5ce
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: abcfd980bfa03298792fd3aba051c78d52f10642
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 5f3e6e346c574bdcd564119e19828ff3204e3ee5
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 4b9cd27ff5c0177dcb160caeae1ea79e761ada58
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/php/php-src/tree/1c9f4d1affc385050d9d002be2d30c368c50d5ce
    reference_type: commit
    reference_id: 1c9f4d1affc385050d9d002be2d30c368c50d5ce
  - url: https://github.com/php/php-src/tree/4b9cd27ff5c0177dcb160caeae1ea79e761ada58
    reference_type: commit
    reference_id: 4b9cd27ff5c0177dcb160caeae1ea79e761ada58
  - url: https://github.com/php/php-src/tree/5f3e6e346c574bdcd564119e19828ff3204e3ee5
    reference_type: commit
    reference_id: 5f3e6e346c574bdcd564119e19828ff3204e3ee5
  - url: https://github.com/php/php-src/tree/abcfd980bfa03298792fd3aba051c78d52f10642
    reference_type: commit
    reference_id: abcfd980bfa03298792fd3aba051c78d52f10642
