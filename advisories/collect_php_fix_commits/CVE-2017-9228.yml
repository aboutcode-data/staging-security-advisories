advisory_id: CVE-2017-9228
datasource_id: collect_php_fix_commits/CVE-2017-9228
datasource_url: https://github.com/php/php-src
aliases: []
summary: |
  2a286ad5991ba06385b11e31dfdf59a31badb7b6:Added goblal optimisation passes based on data flow analyses using SSA form:
  SCCP - Sparse Conditional Constant Propagation, DCE - Dead Code Elimination
  and removing of unused local variablesi.

  Squashed commit of the following:

  commit bf5ac05fc0f5f6ab9c7f2e4eaa83a11c84f471d3
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 14:26:40 2017 +0300

      Added news entry

  commit 4cfa6984b1f3cd8008a0c0dc82ee3de2da02bf7c
  Merge: 1cdaaac 1f261d7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 13:30:50 2017 +0300

      Merge branch 'sccp' into dce

      * sccp:
        Bump OCI8 version for recent patch
        WS
        Fix test title
        Ensure that the stream position is kept between reads
        Turn off EXIF_DEBUG so Travis don't complain at me
        Don't add a new line to undefined tags in EXIF_DEBUG mode
        Fix compile error with EXIF_DEBUG
        update NEWS
        disable --with-pcre-valgrind on travis
        fix default args for --with-pcre-valgrind
        Enable valgrind support for PCRE by default in debug builds
        add oniguruma.patch to ease future upgrades
        SIZEOF_SIZE_T doesn't exist on AIX and POWER8 (ppc64le), keep using SIZEOF_LONG

  commit 1f261d77cb1cb966335097f364ace9349269c704
  Merge: a32a3fb b280ba8
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 13:30:39 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Bump OCI8 version for recent patch
        WS
        Fix test title
        Ensure that the stream position is kept between reads
        Turn off EXIF_DEBUG so Travis don't complain at me
        Don't add a new line to undefined tags in EXIF_DEBUG mode
        Fix compile error with EXIF_DEBUG
        update NEWS
        disable --with-pcre-valgrind on travis
        fix default args for --with-pcre-valgrind
        Enable valgrind support for PCRE by default in debug builds
        add oniguruma.patch to ease future upgrades
        SIZEOF_SIZE_T doesn't exist on AIX and POWER8 (ppc64le), keep using SIZEOF_LONG

  commit 1cdaaac601cff37fa729f3e6b31dc584782a1649
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 13:27:12 2017 +0300

      Use generic evalution mechanism for constant functions

  commit 75bd92a60928818358686410deec24a48e05d6da
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 12:39:05 2017 +0300

      Fixed use-def chain unlinking for "$a = 1; $a += $a;"

  commit 7d7746814dc382e468f9016d90c069b88b8b0f0d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 12:38:29 2017 +0300

      Enable duplicate predecessors verification

  commit 6b1667f2062d7c1b55e389b03b155cbe132f5dbf
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:55:20 2017 +0300

      Removed duplicate definitions

  commit 1415b53014bf5aa1521b779debea6847db8c7940
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:51:29 2017 +0300

      Enable evaluation of constant functions with 3 arguments

  commit ab367deef99f39dee15c6bbac45cb25eb9d29e00
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:45:13 2017 +0300

      Removed deprecated check

  commit c51659ea8c62e4e8fbf32a0567d4f541807d6b6d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:40:42 2017 +0300

      Reduce limit

  commit b1be5a04d783eb160a71fe26e030386b3e2771ba
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:38:23 2017 +0300

      Disable constant array_flip() evaluation

  commit 7a5b0596a149a2efc5893ea83be78ef9129009cb
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:33:20 2017 +0300

      Fixed comments

  commit 377e48b3426f9ccbcd6207acbbed87b9fdbf549d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:28:50 2017 +0300

      Cast of string to long/double can not produce exception

  commit 228dd01af3bf6daefbd7d5be82938dec8b55b6a0
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:24:50 2017 +0300

      Added missed return

  commit 0972a2163643757e7e270b8e1c466800aedf1308
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:22:36 2017 +0300

      objects may be nested in array operands

  commit bd346bfa5c4c58896fabd9ab2e4d9bb85b3c1402
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:19:20 2017 +0300

      ~$resource is unsupported.

  commit c77e45610c22e29b5f4ad7234e38a1f4e2498937
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:15:39 2017 +0300

      ws

  commit 0b64d71109fddfec736c91546b6df978adb1f4fd
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:14:40 2017 +0300

      Call to zend_ssa_unlink_use_chain() shouldn't be dropped

  commit cb7059fcf6e51616c08d5b8a933401a94ae0b6e0
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:11:58 2017 +0300

      Safer check for function name. The previous check is incorrect in ZTS build.

  commit 7280aba1e125fc314284d7ef1252e14d04c415a4
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 11:02:10 2017 +0300

      Missing warning

  commit 54bc7b576cee33037b7e575c013e3ede726647a2
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 14 10:56:42 2017 +0300

      Proper check for successors count

  commit ea8c004a155453b4e15684e2bd1bdb1dc99e8833
  Merge: 624f76d a32a3fb
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 13 15:56:26 2017 +0300

      Merge branch 'sccp' into dce

      * sccp:
        fix fold
        Fixed bug #74866 extension_dir = "./ext" now use current directory for base
        add next vc15 toolset to the list
        Revert "Enable whole program optimization for builds without PGO, too"
        extend comment
        cleanup discontinued target

  commit a32a3fb67cd03b9cdab8cd15f133ef55e717408d
  Merge: 2722dbf 5fb2abd
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 13 15:56:14 2017 +0300

      Merge branch 'master' into sccp

      * master:
        fix fold
        Fixed bug #74866 extension_dir = "./ext" now use current directory for base
        add next vc15 toolset to the list
        Revert "Enable whole program optimization for builds without PGO, too"
        extend comment
        cleanup discontinued target

  commit 624f76df48db42f616bdfd02e9b26515a97c68e2
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 13 12:30:27 2017 +0300

      Set RETURN_VALUE_UNUSED instead of additional FREE opcode, if possible.
      Keep alive dead instructions that have to free two temporary variables.

  commit 94c9b26695702e863ebeb40fa3cce5f5f2db7744
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 13 11:51:14 2017 +0300

      More accurate "vararg" handling in DCE

  commit 665ed8491ca07cd6d3363abf42c5777e132a3da1
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 13 09:31:45 2017 +0300

      Improved DCE performance, by avoiding redundand checks and repeatable iterations.

  commit 3f42ce18ba4420aabb9b07b838096cce340d06b7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 23:03:11 2017 +0300

      Added few more instructions without side effects and exceptions

  commit b17178f991c095d9137c1536b53b933208e575bf
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 20:39:02 2017 +0300

      Temprary enable SSA validation in DEBUG build

  commit e238a8dc79debcf2f833e07323f975173aec6205
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 20:37:53 2017 +0300

      Inegrate SSA validation developed by Nikita

  commit a247cee80b47ca335162e8bd46d06274f8af5a4d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 20:31:27 2017 +0300

      Perform DCE pass before other DFA optimisations, to properly reconstruct "no value" use-def chains.

  commit a651564f299e3b413af1146149de0d7eec0dfb28
  Merge: 06f6eb0 2722dbf
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 18:55:05 2017 +0300

      Merge branch 'sccp' into dce

      * sccp:
        Resources should be closed during object destructioin, not during freeing.
        Guard against AppVeyor losing deps issue
        increase poll timeout as false positives mitigation
        Value of EG(user_exception_handler) should't relive request boundary
        sodium ext: remove function names before exception messages
        sodium ext: update the crypto_kx_*() API to the libsodium one
        Revert "fix macro redifinitions"

  commit 2722dbfdf54702c8b429ed792e96f91219031eb6
  Merge: 6595ea3 09d3b73
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 18:54:48 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Resources should be closed during object destructioin, not during freeing.
        Guard against AppVeyor losing deps issue
        increase poll timeout as false positives mitigation
        Value of EG(user_exception_handler) should't relive request boundary
        sodium ext: remove function names before exception messages
        sodium ext: update the crypto_kx_*() API to the libsodium one
        Revert "fix macro redifinitions"

  commit 06f6eb0e6877d8b26c621f5627587539ebcc781f
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 14:52:28 2017 +0300

      Use zend_ssa_is_no_val_use() instead of zend_has_improper_op1_use()

  commit 4b64dbb30d519be359c44ad4f3802e93a7f5fa65
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 13:07:14 2017 +0300

      Check if instruction may throw exception only for instructions without known side effects.
      Always disable removing ASSIGN and UNSET_VAR that may throw.

  commit c5aa1f47cd16290c77fb988504dc0dd8bad242a3
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 11:21:07 2017 +0300

      Use existing bit

  commit c2af153baea6e05401f78a856a8ae436e5f37bf9
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 11:10:48 2017 +0300

      Updated Windows build

  commit de5e8fc12971e55c81b0768daa96adcd6074038e
  Merge: 8c0de53 6595ea3
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 11:10:12 2017 +0300

      Merge branch 'sccp' into dce

      * sccp: (29 commits)
        Use existing bit
        Updated Windows build
        Fixed compilation error
        Remove debug code
        We need to check for the length here too, or we crash and no one likes that! :(
        * Implemented #65187 (exif_read_data/thumbnail: add support for stream resource) * ext/exif now uses FAST_ZPP
        Remove extraneous configure flag
        Revert "remove excessive checks and fix warnings"
        parametrize zip names
        Upgrade bundled PCRE to 8.41
        Updated NEWS file with LDAP changes
        Fixed removing all controls by passing an empty array to ldap_set_option
        Filled in NEWS file with ext/ldap last modifications
        change order, allow to build as shared extension
        restore file deleted by mistake in a merge commit
        Fix segfault in php_stream_context_get_option call
        remove excessive checks and fix warnings
        fix macro redifinitions
        fix symbol availability and ws
        Remove this for now, as not found
        ...

  commit 6595ea3420b686d1bfe49fbd5893b6a42115c60b
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 10:27:02 2017 +0300

      Use existing bit

  commit f0bfd36cb822dbbe28df827a53a2ed96aa61051f
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 10:21:22 2017 +0300

      Updated Windows build

  commit a9bd7c89f28cf99933a4d3d026a6da5f5e3ca0f7
  Merge: d1eb5ed 2b7d3fb
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 12 09:51:32 2017 +0300

      Merge branch 'master' into sccp

      * master: (27 commits)
        Fixed compilation error
        Remove debug code
        We need to check for the length here too, or we crash and no one likes that! :(
        * Implemented #65187 (exif_read_data/thumbnail: add support for stream resource) * ext/exif now uses FAST_ZPP
        Remove extraneous configure flag
        Revert "remove excessive checks and fix warnings"
        parametrize zip names
        Upgrade bundled PCRE to 8.41
        Updated NEWS file with LDAP changes
        Fixed removing all controls by passing an empty array to ldap_set_option
        Filled in NEWS file with ext/ldap last modifications
        change order, allow to build as shared extension
        restore file deleted by mistake in a merge commit
        Fix segfault in php_stream_context_get_option call
        remove excessive checks and fix warnings
        fix macro redifinitions
        fix symbol availability and ws
        Remove this for now, as not found
        fix authors
        NEWS for Sodium
        ...

  commit 8c0de53e5f599c83fa03c78931527ab4ff14cf93
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 21:54:36 2017 +0300

      Initial integration of Dead Code Elimination (DCE) and unused variable removing passes, originally developed in https://github.com/nikic/php-src/tree/opt, into DFA optimization pass.

  commit d1eb5ede3a2b9a0bf57e06783f7913a6383f5d6d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 12:19:11 2017 +0300

      Proper SSA reconstruction for "$a = $a;"

  commit 4872d139b55c22c2325459dba0ee557c708567b5
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 11:57:33 2017 +0300

      Replace conditions, that should be always true, by ZEND_ASSERT()

  commit 9915b1f5cd2bdd92d0cc5e90244a90fbef06740b
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 11:56:51 2017 +0300

      Fixed pass name

  commit d26ff1b88d3b3b1e8742f2e7812ae5e2531958a6
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 11:55:47 2017 +0300

      Don't create identical predecessors

  commit 0625fbe32bd66b7bcca29e65b131f0cfccd3e074
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 09:36:07 2017 +0300

      Update unreachable blocks.

  commit 9d7d409e6abda5c2e13458f01b8133095fb68531
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 09:28:49 2017 +0300

      Keep consistent cfg.map[]

  commit 85a86e58b220eaf2012f652b97fbeb2d2f85646d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 02:36:14 2017 +0300

      Remove unusded phi

  commit d5e0f2df4c76656bbe5973e69e12e1b7415de5ee
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Tue Jul 11 02:35:00 2017 +0300

      Don't clear phi->spources[] too early.

  commit a90ed34295a0bab09c00bb7001a368a858a38399
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 21:29:39 2017 +0300

      Make SCCP to remove dead live ranges.

  commit 320237f3d84b872dfa096b9a604ae4d5b4d28c8e
  Merge: 63bbed5 7be2637
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 17:35:21 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Fixed memory leak introduced by 7cb5bdf64a95bd70623d33d6ea122c13b01113bd
        eliminate casts
        remove checks for eol dependencies
        improve test
        Small fix in ext/ldap, Moved vars definitions to the beginning of the block using them
        ZipArchive implements countable, added ZipArchive::count() method

  commit 63bbed5e71432d14217b591de511f09937a3c00c
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 17:01:15 2017 +0300

      Evaluation of few more constant functions

  commit 07f45d8a3dbfa67bc28c9ef4bb14c753816f4e44
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 16:22:47 2017 +0300

      Properly unlinking dead blocks from predecessors/successors and dominators

  commit 502002aa6e11452ed27829f7e29604b27fc69ad2
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 13:33:14 2017 +0300

      Replacel constant JMPZ/NZ/ZNZ by JMP or NOP

  commit 3253e61b66b3aa324115ec57ff1cb271ca27dc14
  Merge: e7f69f0 161c378
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 12:22:39 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Revert "Fixed bug #74878"
        Upgrading note for #74837
        Fixed bug #74837 - NEWS
        Implement Countable for DomNodeList and DOMNamedNodeMap (Request #74837)
        Fix #49649 - Handle property visibility changes on unserialization

  commit e7f69f07fc649692218d01dab34b8f8555a6f88c
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 12:15:08 2017 +0300

      Prevent compile-time evaluation of implode() with arguments causing run-time warnings

  commit 0e882f189a01b6ee648420776fb473c1efd22380
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 11:54:04 2017 +0300

      Constant evaluation of ini_get() for some safe cases

  commit 9e36a748b28850bd15ac621879e1d28ed8e36169
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 11:13:37 2017 +0300

      Constant evaluation of implode()

  commit e73046e266617ae23caa7f40344fc6e8e41e3c56
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 10:51:23 2017 +0300

      Fixed uninitialized value

  commit f5e2e8e68cc46cfc1380d000672d01b243ad7f59
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 10:05:37 2017 +0300

      Remove (compact) unused constants after SCCP pass

  commit f0b7bb86ebe93373a02ef36029f76239ba9ec1d4
  Merge: e69d4f6 cfacf84
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Mon Jul 10 09:10:00 2017 +0300

      Merge branch 'master' into sccp

      * master: (37 commits)
        #73594 tests only check the extra params if dns_get_record is successful
        Fixed bug #74852 (property_exists returns true on unknown DateInterval property)
        fix uninitialized var
        fix comparison warning
        comply with POSIX signature
        fix warning
        remove some casts
        cleanup casts
        remove useless cast
        eliminate casts
        sync vim mode lines in main
        [ci skip] update NEWS
        [ci skip] update NEWS
        [ci skip] update NEWS
        Fixed bug #74883 SQLite3::__construct() produces "out of memory" exception with invalid flags
        Silent compiler warning
        Fix test
        Deprecated the read_exif_data() alias
        Add myself as exif maintainer
        update libs versions
        ...

  commit e69d4f61409c473ae36d85c3779ad5f786fecdc0
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 7 12:51:41 2017 +0300

      Avoid in-place modification of referenced data

  commit 58f7c17978dec7b5fe6fe80b4efc55e2168bab61
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 7 12:33:24 2017 +0300

      Use arena for temporary data.

  commit 93d3e7ddc22f1bc7323abae2256b0b50bc1f8b29
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 7 11:54:47 2017 +0300

      Made sccp_ctx to be an "extension" of scdf_ctx and remove duplicate data.

  commit f810c6f7c47b03412c61878b761e1bb687fbcf28
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 7 11:20:48 2017 +0300

      Improved SSCP integration

  commit d17ed887f304af0f6ccba76a3dbfca888867ea01
  Merge: d90805a 29653da
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Fri Jul 7 10:22:37 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Fixed bug #74873 (Minor BC break: PCRE_JIT changes output of preg_match()).
        Fixed bug #72324 (imap_mailboxmsginfo() return wrong size)
        Fix redefine warnings
        Expand sb's name and capitalize my own
        Write the URL on a new line, so that it is easier copyable

  commit d90805a40bd5d75d197f7b95c69680f636932868
  Merge: 2e5e03b fc336c7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 23:07:04 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Added missed dump of "main" script code
        replace the stack var by a macro
        [ci skip] sync NEWS
        minor fix for web announce
        add missing NEWS entry for #74087 and also fix the formatting
        move NEWS entry to the correct place, also bump the version

  commit 2e5e03b673cb86ee0fa6be06496553fa6b8c52e7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 23:03:41 2017 +0300

      Call info should be removed, but at least we should prevent incorrect stack adjustment.

  commit 1ee9110b35eab79f74d08278c104c92796740fa7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 19:34:43 2017 +0300

      Remove NOP instructions, introduced bvy SCCP.
      This commit discloses unrelated issue caused ext/soap/tests/bug70211.phpt failure.

  commit 9a2f50070d1afde8ee4784a1dade2537e1ac30d5
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 16:34:02 2017 +0300

      Avoid useless iterations for first SSA variablesi, always marked BOT.

  commit c57dd7c6efb98c89a8c87af0eaad76b71c9cda16
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 16:33:46 2017 +0300

      Use reference-counting

  commit 90f822d68ef1cb68befa3fff289c9e8d1b2068c8
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 14:00:22 2017 +0300

      Support for few more opcodes

  commit cffee2f7e5bb4198e645e291fafe5690443cf26c
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 12:35:13 2017 +0300

      Combined constants substitutaion and dead instruction removing in single pass. This eleminates substitution in dead instructions.

  commit f890375c16052a9d79bf77c9021914cb9c6616f8
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 10:34:48 2017 +0300

      Use reference-counting instead of duplication

  commit db0cd64dfa7a2ff809b49a049074b5fa39d37314
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 03:04:27 2017 +0300

      Improved SCDF<->SCCP interface

       - "get_feasible_successors" callback is changed into "mark_feasible_successors" and should mark necessary edges through scdf_mark_edge_feasible()
       - SCDF takes care about OP_DATA instruction
       - SCDF code is re-arranged to avoid repeatable checks

  commit e0ad5dd48942c71033fad985c591549a35c21ef3
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 00:55:40 2017 +0300

      Changed representation of "feasible_edges", using one bit per edge.

  commit afee3138fe49588b3967f54bf66375f880a51924
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Thu Jul 6 00:49:56 2017 +0300

      Revert "Don't propagate unused values"

      This reverts commit 84e5bfd4304d34e3a7107db71783882013f8de59.

  commit 84e5bfd4304d34e3a7107db71783882013f8de59
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 23:39:42 2017 +0300

      Don't propagate unused values

  commit d4f15b95061a8a2303d90e6e54effeb9733f90b7
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 23:39:10 2017 +0300

      Don't visit the same Phi twice

  commit 2558311b4d530fb84539db304d03dfeba5eda789
  Merge: 722a59d 7bb4ae5
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 21:51:06 2017 +0300

      Merge branch 'master' into sccp

      * master:
        Fixed final dump "after optimizer"

  commit 722a59ddb12e641aea99ca8853ef921c4fdf9819
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 21:09:29 2017 +0300

      SCCP doesn't support VERIFY_RETURN_TYPE (ext/opcache/tests/bug73789.phpt failure)

  commit 7084fade4dcb74415f0644d8e207f0fab6c6509d
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 20:37:21 2017 +0300

      Fixed SSA reconstruction

  commit 37ec4e0845a5b25fe2b523452d32dba22605d2e3
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 19:34:46 2017 +0300

      Disable constant propagation for variables that can be modified indirectly

  commit 4bb9b6526e44c2f324f9a7c08890ab9bdedd639c
  Merge: 6800460 73d5097
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 19:17:04 2017 +0300

      Merge branch 'master' into sccp

      * master: (43 commits)
        Keep information about SSA variables, that may be modified indirectly.
        Added constants for known ldap controls OID and tests for ldap_get/set_option for controls
        Added support for controls to ldap_get_option
        [ci skip] sync NEWS
        NEWS for oniguruma
        Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
        Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
        Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
        Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
        Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
        valid_symbol_table removed
        Improve fix for #74145
        Fix wddx
        Fix tests
        Fixed bug #74111
        Fix bug #74603 - use correct buffer size
        Fix bug #74651 - check EVP_SealInit as it can return -1
        Update NEWS
        Fix bug #74087
        Fixed parsing of strange formats with mixed month/day and time strings
        ...

  commit 680046086c17b938e0288fca820668a183b86834
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 16:14:38 2017 +0300

      Support for few more internal functions evaluation

  commit 74a29468ef14260ea3c210a2d1e3548806c81339
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 13:42:55 2017 +0300

      Disabled evaluation of strpos() with empty needle.

  commit e8908946e52127727da9f0dd22a053befe8bf848
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 13:17:30 2017 +0300

      Replace calls to in_array() with constant array by IN_ARRAY instruction after SCCP.

  commit 4e8fa2c3dd087a49ba90a3ef8231cc81f0399548
  Author: Dmitry Stogov <dmitry@zend.com>
  Date:   Wed Jul 5 00:58:12 2017 +0300

      Initial integration of Sparse Conditional Constant Propagation (SCCP), originally developed in https://github.com/nikic/php-src/tree/opt, into DFA optimization pass.
  e1f1ee1eb5f0fa1dda7ffa8d3982b3f82484d9cb:Merge branch 'PHP-7.1'

  * PHP-7.1:
    NEWS for oniguruma
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
  1e3b960ab5c1ec9fd53177f539d2908a4439d2d2:Merge branch 'PHP-7.0' into PHP-7.1

  * PHP-7.0:
    NEWS for oniguruma
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
  8b1559b9f417bdc6099704c29a6e1cd9ece3355b:Merge branch 'PHP-5.6' into PHP-7.0

  * PHP-5.6:
    NEWS for oniguruma
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
  703be4f77e662837b64499b0d046a5c8d06a98b9:Patch from the upstream git
  https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)

  Thanks to Mamoru TASAKA <mtasaka@fedoraproject.org>
  20eacb787f4543604f3c657e191baf274bb943c2:Merge branch 'PHP-7.1'

  * PHP-7.1:
    NEWS
    NEWS
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
  bee52f352f00d86593bef43ed4cec4dbfd9edfcf:Merge branch 'PHP-7.0' into PHP-7.1

  * PHP-7.0:
    NEWS
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/59 (CVE-2017-9229) b690371bbf97794b4a1d3f295d4fb9a8b05d402d Modified for onig 5.9.6
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/58 (CVE-2017-9227)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/57 (CVE-2017-9224)
    Patch from the upstream git https://github.com/kkos/oniguruma/issues/55 (CVE-2017-9226) b4bf968ad52afe14e60a2dc8a95d3555c543353a Modified for onig 5.9.6 f015fbdd95f76438cd86366467bb2b39870dd7c6 Modified for onig 5.9.6
  1c845d295037702d63097e2216b3c5db53f79273:Patch from the upstream git
  https://github.com/kkos/oniguruma/issues/60 (CVE-2017-9228)

  Thanks to Mamoru TASAKA <mtasaka@fedoraproject.org>
impacted_packages:
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 703be4f77e662837b64499b0d046a5c8d06a98b9
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 2a286ad5991ba06385b11e31dfdf59a31badb7b6
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 20eacb787f4543604f3c657e191baf274bb943c2
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: bee52f352f00d86593bef43ed4cec4dbfd9edfcf
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 1c845d295037702d63097e2216b3c5db53f79273
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: e1f1ee1eb5f0fa1dda7ffa8d3982b3f82484d9cb
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 1e3b960ab5c1ec9fd53177f539d2908a4439d2d2
    introduced_in_commits: []
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: 8b1559b9f417bdc6099704c29a6e1cd9ece3355b
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/php/php-src/tree/1c845d295037702d63097e2216b3c5db53f79273
    reference_type: commit
    reference_id: 1c845d295037702d63097e2216b3c5db53f79273
  - url: https://github.com/php/php-src/tree/1e3b960ab5c1ec9fd53177f539d2908a4439d2d2
    reference_type: commit
    reference_id: 1e3b960ab5c1ec9fd53177f539d2908a4439d2d2
  - url: https://github.com/php/php-src/tree/20eacb787f4543604f3c657e191baf274bb943c2
    reference_type: commit
    reference_id: 20eacb787f4543604f3c657e191baf274bb943c2
  - url: https://github.com/php/php-src/tree/2a286ad5991ba06385b11e31dfdf59a31badb7b6
    reference_type: commit
    reference_id: 2a286ad5991ba06385b11e31dfdf59a31badb7b6
  - url: https://github.com/php/php-src/tree/703be4f77e662837b64499b0d046a5c8d06a98b9
    reference_type: commit
    reference_id: 703be4f77e662837b64499b0d046a5c8d06a98b9
  - url: https://github.com/php/php-src/tree/8b1559b9f417bdc6099704c29a6e1cd9ece3355b
    reference_type: commit
    reference_id: 8b1559b9f417bdc6099704c29a6e1cd9ece3355b
  - url: https://github.com/php/php-src/tree/bee52f352f00d86593bef43ed4cec4dbfd9edfcf
    reference_type: commit
    reference_id: bee52f352f00d86593bef43ed4cec4dbfd9edfcf
  - url: https://github.com/php/php-src/tree/e1f1ee1eb5f0fa1dda7ffa8d3982b3f82484d9cb
    reference_type: commit
    reference_id: e1f1ee1eb5f0fa1dda7ffa8d3982b3f82484d9cb
