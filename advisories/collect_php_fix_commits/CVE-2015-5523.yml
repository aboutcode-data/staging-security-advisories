advisory_id: CVE-2015-5523
datasource_id: collect_php_fix_commits/CVE-2015-5523
datasource_url: https://github.com/php/php-src
aliases: []
summary: |
  a552ac5bd589035b66c899b74511b29a3d1a4718:ext/tidy: add support for the new tidy-html5 library.

  Our existing libtidy support is based on the legacy "HTML tidy"
  project. That project now has a successor called tidy-html5, where all
  new features and bugfixes happen. Of particular note are the fixes for
  two security vulnerabilities, CVE-2015-5522 and CVE-2015-5523.

  The API is largely unchanged in the new project (which is truly the
  successor of the original -- not a fork), and so it is almost a
  drop-in replacement as far as PHP is concerned. However, one file has
  changed in the new project: "buffio.h" has been moved to
  "tidybuffio.h".

  This commit detects the presence of tidybuffio.h at build time, and
  then adjusts the import statement in tidy.c accordingly. The result is
  a build that works against either the legacy project or the new
  tidy-html5 project, although the test suite for the tidy extension now
  fails. Those failures are not critical and will be fixed.

  Gentoo-Bug: 561452
  Gentoo-Bug: 585474
  PHP-Bug: 72379
impacted_packages:
  - purl: pkg:github/php/php-src
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/php/php-src
        commit: a552ac5bd589035b66c899b74511b29a3d1a4718
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/php/php-src/tree/a552ac5bd589035b66c899b74511b29a3d1a4718
    reference_type: commit
    reference_id: a552ac5bd589035b66c899b74511b29a3d1a4718
