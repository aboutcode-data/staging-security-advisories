advisory_id: CVE-2018-7166
datasource_id: collect_node_js_fix_commits/CVE-2018-7166
datasource_url: https://github.com/nodejs/node
aliases: []
summary: |
  40a7beeddac9b9ec9ef5b49157daaf8470648b08:buffer: stop alloc() uninitialized memory return

  CVE-2018-7166
  Discovered by ChALkeR - Сковорода Никита Андреевич

  Prevent Buffer.alloc(size, fill, number) from returning uninitialized memory.

  Fixes: https://github.com/nodejs-private/security/issues/202
  PR-URL: https://github.com/nodejs-private/node-private/pull/137
  Reviewed-By: Rod Vagg <rod@vagg.org>
  Reviewed-By: Matteo Collina <matteo.collina@gmail.com>
  Reviewed-By: Ruben Bridgewater <ruben@bridgewater.de>
  Reviewed-By: Evan Lucas <evanlucas@me.com>
  Reviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>
  Reviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>
  97c1fa3d3b98bf1b28cf3362e197ae91093cf68f:2018-08-15, Version 10.9.0 (Current)

  Notable changes:

  * buffer:
    * Fix out-of-bounds (OOB) write in `Buffer.write()` for UCS-2 encoding
      (CVE-2018-12115)
    * Fix unintentional exposure of uninitialized memory in `Buffer.alloc()`
      (CVE-2018-7166)
  * deps:
    * Upgrade to OpenSSL 1.1.0i, fixing:
      - Client DoS due to large DH parameter (CVE-2018-0732)
      - ECDSA key extraction via local side-channel (CVE not assigned)
    * Upgrade V8 from 6.7 to 6.8 (Michaël Zasso) #21079
      - Memory reduction and performance improvements, details at:
        https://v8project.blogspot.com/2018/06/v8-release-68.html
  * http: `http.get()` and `http.request()` (and `https` variants) can now accept
    three arguments to allow for a `URL` _and_ an `options` object
    (Sam Ruby) #21616
  * Added new collaborators
    * Sam Ruby (https://github.com/rubys)
    * George Adams (https://github.com/gdams)
  03b825811ed4af0addcdf6e75bacb3dc1c4c5940:2018-08-15, Version 10.9.0 (Current)

  Notable changes:

  * buffer:
    * Fix out-of-bounds (OOB) write in `Buffer.write()` for UCS-2 encoding
      (CVE-2018-12115)
    * Fix unintentional exposure of uninitialized memory in `Buffer.alloc()`
      (CVE-2018-7166)
  * deps:
    * Upgrade to OpenSSL 1.1.0i, fixing:
      - Client DoS due to large DH parameter (CVE-2018-0732)
      - ECDSA key extraction via local side-channel (CVE not assigned)
    * Upgrade V8 from 6.7 to 6.8 (Michaël Zasso) #21079
      - Memory reduction and performance improvements, details at:
        https://v8project.blogspot.com/2018/06/v8-release-68.html
  * http: `http.get()` and `http.request()` (and `https` variants) can now accept
    three arguments to allow for a `URL` _and_ an `options` object
    (Sam Ruby) #21616
  * Added new collaborators
    * Sam Ruby (https://github.com/rubys)
    * George Adams (https://github.com/gdams)
  734323d9eb4debf64034ce8320121e2318f572a9:buffer: stop alloc() uninitialized memory return

  CVE-2018-7166
  Discovered by ChALkeR - Сковорода Никита Андреевич

  Prevent Buffer.alloc(size, fill, number) from returning uninitialized memory.

  Fixes: https://github.com/nodejs-private/security/issues/202
  PR-URL: https://github.com/nodejs-private/node-private/pull/137
  Reviewed-By: Rod Vagg <rod@vagg.org>
  Reviewed-By: Matteo Collina <matteo.collina@gmail.com>
  Reviewed-By: Ruben Bridgewater <ruben@bridgewater.de>
  Reviewed-By: Evan Lucas <evanlucas@me.com>
  Reviewed-By: Сковорода Никита Андреевич <chalkerx@gmail.com>
  Reviewed-By: Michael Dawson <michael_dawson@ca.ibm.com>
impacted_packages:
  - purl: pkg:github/nodejs/node
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/nodejs/node
        commit: 734323d9eb4debf64034ce8320121e2318f572a9
    introduced_in_commits: []
  - purl: pkg:github/nodejs/node
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/nodejs/node
        commit: 40a7beeddac9b9ec9ef5b49157daaf8470648b08
    introduced_in_commits: []
  - purl: pkg:github/nodejs/node
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/nodejs/node
        commit: 03b825811ed4af0addcdf6e75bacb3dc1c4c5940
    introduced_in_commits: []
  - purl: pkg:github/nodejs/node
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/nodejs/node
        commit: 97c1fa3d3b98bf1b28cf3362e197ae91093cf68f
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/nodejs/node/tree/03b825811ed4af0addcdf6e75bacb3dc1c4c5940
    reference_type: commit
    reference_id: 03b825811ed4af0addcdf6e75bacb3dc1c4c5940
  - url: https://github.com/nodejs/node/tree/40a7beeddac9b9ec9ef5b49157daaf8470648b08
    reference_type: commit
    reference_id: 40a7beeddac9b9ec9ef5b49157daaf8470648b08
  - url: https://github.com/nodejs/node/tree/734323d9eb4debf64034ce8320121e2318f572a9
    reference_type: commit
    reference_id: 734323d9eb4debf64034ce8320121e2318f572a9
  - url: https://github.com/nodejs/node/tree/97c1fa3d3b98bf1b28cf3362e197ae91093cf68f
    reference_type: commit
    reference_id: 97c1fa3d3b98bf1b28cf3362e197ae91093cf68f
