advisory_id: GHSA-mfwh-5m23-j46w
datasource_id: collect_rust_fix_commits/GHSA-mfwh-5m23-j46w
datasource_url: https://github.com/rust-lang/rust
aliases: []
summary: |
  a585aaefb662ae26f8675955f26fad9be4fea96b:Auto merge of #77418 - pietroalbini:ci-environment-files, r=Mark-Simulacrum

  Switch to environment files to change the environment on GHA

  This PR switches our CI to use GitHub's new [environment files](https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-commands-for-github-actions#environment-files) to set environment variables and add items to `$PATH`, as GitHub [plans to disable the old `::set-env` and `::add-path` log commands](https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/) due to a [security issue](https://github.com/actions/toolkit/security/advisories/GHSA-mfwh-5m23-j46w).

  Our self-hosted runners are on version 2.273.4, so they already have support for this.

  r? `@Mark-Simulacrum`
impacted_packages:
  - purl: pkg:github/rust-lang/rust
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/rust-lang/rust
        commit: a585aaefb662ae26f8675955f26fad9be4fea96b
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/rust-lang/rust/tree/a585aaefb662ae26f8675955f26fad9be4fea96b
    reference_type: commit
    reference_id: a585aaefb662ae26f8675955f26fad9be4fea96b
