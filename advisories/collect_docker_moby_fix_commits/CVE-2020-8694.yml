advisory_id: CVE-2020-8694
datasource_id: collect_docker_moby_fix_commits/CVE-2020-8694
datasource_url: https://github.com/moby/moby
aliases: []
summary: |
  4b242784cab8603d68431a64405e6b9d6b018ae5:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  4b242784cab8603d68431a64405e6b9d6b018ae5:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  177ca589099c83d54ff3dea73a9364f3efad7665:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  177ca589099c83d54ff3dea73a9364f3efad7665:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  164a1a0f14e869473bb565bab165873968811acb:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  164a1a0f14e869473bb565bab165873968811acb:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  (cherry picked from commit 83cac3c3e3adcba2ef113b2272f467566c903e0b)
  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  83cac3c3e3adcba2ef113b2272f467566c903e0b:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
  83cac3c3e3adcba2ef113b2272f467566c903e0b:oci/defaults: deny /sys/devices/virtual/powercap

  The ability to read these files may offer a power-based sidechannel
  attack against any workloads running on the same kernel.

  This was originally [CVE-2020-8694][1], which was fixed in
  [949dd0104c496fa7c14991a23c03c62e44637e71][2] by restricting read access
  to root. However, since many containers run as root, this is not
  sufficient for our use case.

  While untrusted code should ideally never be run, we can add some
  defense in depth here by masking out the device class by default.

  [Other mechanisms][3] to access this hardware exist, but they should not
  be accessible to a container due to other safeguards in the
  kernel/container stack (e.g. capabilities, perf paranoia).

  [1]: https://nvd.nist.gov/vuln/detail/CVE-2020-8694
  [2]: https://github.com/torvalds/linux/commit/949dd0104c496fa7c14991a23c03c62e44637e71
  [3]: https://web.eece.maine.edu/~vweaver/projects/rapl/

  Signed-off-by: Bjorn Neergaard <bjorn.neergaard@docker.com>
impacted_packages:
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 177ca589099c83d54ff3dea73a9364f3efad7665
    introduced_in_commits: []
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 164a1a0f14e869473bb565bab165873968811acb
    introduced_in_commits: []
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 83cac3c3e3adcba2ef113b2272f467566c903e0b
    introduced_in_commits: []
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 4b242784cab8603d68431a64405e6b9d6b018ae5
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/moby/moby/tree/164a1a0f14e869473bb565bab165873968811acb
    reference_type: commit
    reference_id: 164a1a0f14e869473bb565bab165873968811acb
  - url: https://github.com/moby/moby/tree/177ca589099c83d54ff3dea73a9364f3efad7665
    reference_type: commit
    reference_id: 177ca589099c83d54ff3dea73a9364f3efad7665
  - url: https://github.com/moby/moby/tree/4b242784cab8603d68431a64405e6b9d6b018ae5
    reference_type: commit
    reference_id: 4b242784cab8603d68431a64405e6b9d6b018ae5
  - url: https://github.com/moby/moby/tree/83cac3c3e3adcba2ef113b2272f467566c903e0b
    reference_type: commit
    reference_id: 83cac3c3e3adcba2ef113b2272f467566c903e0b
