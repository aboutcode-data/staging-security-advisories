advisory_id: CVE-2021-21334
datasource_id: collect_docker_moby_fix_commits/CVE-2021-21334
datasource_url: https://github.com/moby/moby
aliases: []
summary: |
  2ab3cd8c9e5752d0753fb0fcd95640d05ebeefdf:update containerd binary to v1.4.4

  full diff: https://github.com/containerd/containerd/compare/v1.4.3...v1.4.4

  Release notes:

  The fourth patch release for `containerd` 1.4 contains a fix for CVE-2021-21334
  along with various other minor issues.
  See [GHSA-36xw-fx78-c5r4](https://github.com/containerd/containerd/security/advisories/GHSA-36xw-fx78-c5r4)
  for more details related to CVE-2021-21334.

  Notable Updates

  - Fix container create in CRI to prevent possible environment variable leak between containers
  - Update shim server to return grpc NotFound error
  - Add bounds on max `oom_score_adj` value for shim's AdjustOOMScore
  - Update task manager to use fresh context when calling shim shutdown
  - Update Docker resolver to avoid possible concurrent map access panic
  - Update shim's log file open flags to avoid containerd hang on syscall open
  - Fix incorrect usage calculation

  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
  (cherry picked from commit 1a493934033919b91c4e471638ac1a8bbc5792c5)
  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
  2ab3cd8c9e5752d0753fb0fcd95640d05ebeefdf:update containerd binary to v1.4.4

  full diff: https://github.com/containerd/containerd/compare/v1.4.3...v1.4.4

  Release notes:

  The fourth patch release for `containerd` 1.4 contains a fix for CVE-2021-21334
  along with various other minor issues.
  See [GHSA-36xw-fx78-c5r4](https://github.com/containerd/containerd/security/advisories/GHSA-36xw-fx78-c5r4)
  for more details related to CVE-2021-21334.

  Notable Updates

  - Fix container create in CRI to prevent possible environment variable leak between containers
  - Update shim server to return grpc NotFound error
  - Add bounds on max `oom_score_adj` value for shim's AdjustOOMScore
  - Update task manager to use fresh context when calling shim shutdown
  - Update Docker resolver to avoid possible concurrent map access panic
  - Update shim's log file open flags to avoid containerd hang on syscall open
  - Fix incorrect usage calculation

  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
  (cherry picked from commit 1a493934033919b91c4e471638ac1a8bbc5792c5)
  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
  1a493934033919b91c4e471638ac1a8bbc5792c5:update containerd binary to v1.4.4

  full diff: https://github.com/containerd/containerd/compare/v1.4.3...v1.4.4

  Release notes:

  The fourth patch release for `containerd` 1.4 contains a fix for CVE-2021-21334
  along with various other minor issues.
  See [GHSA-36xw-fx78-c5r4](https://github.com/containerd/containerd/security/advisories/GHSA-36xw-fx78-c5r4)
  for more details related to CVE-2021-21334.

  Notable Updates

  - Fix container create in CRI to prevent possible environment variable leak between containers
  - Update shim server to return grpc NotFound error
  - Add bounds on max `oom_score_adj` value for shim's AdjustOOMScore
  - Update task manager to use fresh context when calling shim shutdown
  - Update Docker resolver to avoid possible concurrent map access panic
  - Update shim's log file open flags to avoid containerd hang on syscall open
  - Fix incorrect usage calculation

  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
  1a493934033919b91c4e471638ac1a8bbc5792c5:update containerd binary to v1.4.4

  full diff: https://github.com/containerd/containerd/compare/v1.4.3...v1.4.4

  Release notes:

  The fourth patch release for `containerd` 1.4 contains a fix for CVE-2021-21334
  along with various other minor issues.
  See [GHSA-36xw-fx78-c5r4](https://github.com/containerd/containerd/security/advisories/GHSA-36xw-fx78-c5r4)
  for more details related to CVE-2021-21334.

  Notable Updates

  - Fix container create in CRI to prevent possible environment variable leak between containers
  - Update shim server to return grpc NotFound error
  - Add bounds on max `oom_score_adj` value for shim's AdjustOOMScore
  - Update task manager to use fresh context when calling shim shutdown
  - Update Docker resolver to avoid possible concurrent map access panic
  - Update shim's log file open flags to avoid containerd hang on syscall open
  - Fix incorrect usage calculation

  Signed-off-by: Sebastiaan van Stijn <github@gone.nl>
impacted_packages:
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 1a493934033919b91c4e471638ac1a8bbc5792c5
    introduced_in_commits: []
  - purl: pkg:github/moby/moby
    affected_versions:
    fixed_versions:
    fixed_in_commits:
      - vcs_url: https://github.com/moby/moby
        commit: 2ab3cd8c9e5752d0753fb0fcd95640d05ebeefdf
    introduced_in_commits: []
severities: []
weaknesses: []
references:
  - url: https://github.com/moby/moby/tree/1a493934033919b91c4e471638ac1a8bbc5792c5
    reference_type: commit
    reference_id: 1a493934033919b91c4e471638ac1a8bbc5792c5
  - url: https://github.com/moby/moby/tree/2ab3cd8c9e5752d0753fb0fcd95640d05ebeefdf
    reference_type: commit
    reference_id: 2ab3cd8c9e5752d0753fb0fcd95640d05ebeefdf
